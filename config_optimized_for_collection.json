{
  "_comment": "═══════════════════════════════════════════════════════════════",
  "_title": "GogoSpider v3.3 - URL收集优化配置",
  "_description": "针对'收集更多URL + 减少请求 + 保存完整'优化的配置文件",
  "_optimization": "基于7层过滤机制分析的最优配置（方案B：平衡优化）",
  "_version": "v3.3-optimized",
  "_updated": "2025-10-27",
  "_comment_separator": "═══════════════════════════════════════════════════════════════",
  
  "target_url": "http://x.lydaas.com",
  
  "_comment_depth": "═══ 爬取深度配置 ═══",
  "depth_settings": {
    "_comment": "控制爬虫的爬取深度和调度策略",
    "max_depth": 3,
    "_optimization_note": "🔧 深度3足够覆盖大部分URL，减少过深爬取",
    "deep_crawling": true,
    "scheduling_algorithm": "BFS"
  },
  
  "_comment_scheduling": "═══ 🆕 调度策略配置（v3.4核心功能）═══",
  "scheduling_settings": {
    "_comment": "智能调度策略，控制URL爬取顺序和效率",
    "algorithm": "HYBRID",
    "_algorithm_note": "HYBRID=混合策略（BFS+优先级+自适应学习，推荐✨）",
    
    "hybrid_config": {
      "enable_adaptive_learning": true,
      "max_urls_per_layer": 1000,
      "_optimization_note": "🔧 已从100提高到1000，收集更多URL",
      "high_value_threshold": 80.0,
      "learning_rate": 0.15,
      
      "priority_weights": {
        "depth": 3.0,
        "internal": 2.0,
        "params": 1.5,
        "recent": 1.0,
        "path_value": 4.0,
        "business_value": 0.5
      }
    },
    
    "performance_config": {
      "max_concurrent_requests": 30,
      "_optimization_note": "🔧 提高并发（20→30），加快爬取速度",
      "request_timeout": 30,
      "max_retry": 3,
      "enable_connection_pool": true,
      "max_memory_mb": 1024,
      "enable_disk_cache": false
    }
  },
  
  "_comment_strategy": "═══ 爬取策略配置 ═══",
  "strategy_settings": {
    "_comment": "控制爬虫使用哪些技术和策略",
    "enable_static_crawler": true,
    "enable_dynamic_crawler": true,
    "enable_js_analysis": true,
    "enable_api_inference": true,
    "domain_scope": "",
    "use_priority_queue": false,
    "enable_common_path_scan": false
  },
  
  "_comment_anti_detection": "═══ 反爬虫检测配置 ═══",
  "anti_detection_settings": {
    "_comment": "避免被目标网站检测和封禁",
    "request_delay": 300000000,
    "_optimization_note": "🔧 降低延迟（500ms→300ms），加快爬取",
    "user_agents": [
      "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    ],
    "proxies": [],
    "enable_form_auto_fill": true,
    "cookie_file": "",
    "cookie_string": "",
    "insecure_skip_verify": false
  },
  
  "_comment_deduplication": "═══ ⭐ 去重配置（关键优化）═══",
  "deduplication_settings": {
    "_comment": "智能去重，避免爬取重复或相似的页面",
    "_optimization_summary": "🔧 7层过滤机制优化：关闭过度过滤，放宽限制",
    
    "similarity_threshold": 0.85,
    "enable_dom_deduplication": true,
    "_dom_note": "✅ 保留DOM相似度检测，有效减少重复页面",
    
    "enable_url_pattern_recognition": true,
    "_pattern_optimization": "✅ 保留模式识别，但会记录所有URL（通过saveAllDiscoveredURLs）",
    
    "enable_smart_param_dedup": true,
    "_smart_param_optimization": "🔧 保留但大幅放宽限制（3→10）",
    "max_param_value_variants_per_group": 10,
    "_variants_optimization": "🔧 从3提高到10，保留更多参数变体",
    
    "_comment_business": "【❌ 业务感知过滤 - 已关闭】",
    "enable_business_aware_filter": false,
    "_business_optimization": "🔧 关闭业务过滤，避免误杀有效URL（过滤器第6层）",
    "_business_reason": "业务价值评分可能不准确，建议完全收集后再手动筛选",
    "business_filter_min_score": 30.0,
    "business_filter_high_value_threshold": 70.0,
    "business_filter_max_low_value": 2,
    "business_filter_max_mid_value": 5,
    "business_filter_max_high_value": 20,
    "business_filter_adaptive_learning": true,
    
    "enable_param_validation": true,
    "param_validation_similarity": 0.95,
    "param_validation_max_similar": 3,
    "param_validation_min_diff": 50
  },
  
  "_comment_scope": "═══ ⭐ 作用域控制配置（关键优化）═══",
  "scope_settings": {
    "_comment": "✅ 精确控制爬取范围",
    "_optimization_summary": "🔧 放宽范围限制，收集更多URL（过滤器第2层优化）",
    "enabled": true,
    
    "include_domains": [],
    "exclude_domains": [],
    
    "include_paths": [],
    "exclude_paths": [],
    
    "include_regex": "",
    "exclude_regex": "",
    
    "include_extensions": [],
    "_include_note": "留空表示不限制文件类型",
    
    "exclude_extensions": [],
    "_exclude_optimization": "🔧 清空排除列表，让程序自动分类静态资源",
    "_exclude_note": "✅ 静态资源会被自动记录到staticResources，不需要手动排除",
    "_exclude_behavior": "静态资源只记录不请求（已在代码中实现），JS/CSS会被下载分析",
    
    "allow_subdomains": true,
    "_subdomains_optimization": "🔧 允许子域名（false→true），收集更多URL",
    
    "stay_in_domain": false,
    "_stay_optimization": "🔧 允许收集域外URL（true→false），会记录但可能不爬取",
    
    "allow_http": true,
    "allow_https": true
  },
  
  "_comment_rate_limit": "═══ 速率限制配置 ═══",
  "rate_limit_settings": {
    "_comment": "控制请求速度，避免对目标网站造成压力",
    "enabled": false,
    "_optimization_note": "⚠️ 如果目标服务器有限制，建议开启",
    "requests_per_second": 100,
    "burst_size": 10,
    "min_delay": 0,
    "max_delay": 0,
    "adaptive": false,
    "adaptive_min_rate": 10,
    "adaptive_max_rate": 200
  },
  
  "_comment_external": "═══ 外部数据源配置 ═══",
  "external_source_settings": {
    "_comment": "从历史数据获取更多URL（可选）",
    "enabled": false,
    "_optimization_note": "💡 如需更多URL，可以开启Wayback Machine",
    "enable_wayback_machine": false,
    "enable_virustotal": false,
    "virustotal_api_key": "",
    "enable_common_crawl": false,
    "max_results_per_source": 1000,
    "timeout": 30
  },
  
  "_comment_pipeline": "═══ 管道模式配置 ═══",
  "pipeline_settings": {
    "_comment": "与其他工具配合使用",
    "enabled": false,
    "enable_stdin": false,
    "enable_stdout": false,
    "input_format": "text",
    "output_format": "text",
    "quiet": false
  },
  
  "_comment_sensitive": "═══ 敏感信息检测配置 ═══",
  "sensitive_detection_settings": {
    "_comment": "检测API密钥、密码、Token等敏感信息",
    "enabled": true,
    "scan_response_body": true,
    "scan_response_headers": true,
    "min_severity": "LOW",
    "enable_custom_patterns": false,
    "custom_patterns": [],
    "save_full_value": false,
    "output_file": "",
    "realtime_output": true,
    "exclude_url_patterns": [],
    "rules_file": "./sensitive_rules_standard.json"
  },
  
  "_comment_blacklist": "═══ 黑名单配置 ═══",
  "blacklist_settings": {
    "_comment": "✅ 黑名单URL会被记录但不访问",
    "enabled": true,
    "domains": ["*.gov.cn", "*.edu.cn", "*.mil.cn"],
    "domain_patterns": [],
    "strict_mode": true
  },
  
  "_comment_batch": "═══ 批量扫描配置 ═══",
  "batch_scan_settings": {
    "_comment": "批量扫描多个目标",
    "enabled": false,
    "input_file": "targets.txt",
    "concurrency": 5,
    "output_dir": "./batch_results",
    "per_target_timeout": 3600,
    "continue_on_error": true,
    "save_individual_reports": true,
    "save_summary_report": true
  },
  
  "_comment_output": "═══ 输出配置 ═══",
  "output_settings": {
    "_comment": "控制输出格式和内容",
    "format": "text",
    "output_file": "",
    "json_mode": "line",
    "include_all": false,
    "verbose": false
  },
  
  "_comment_log": "═══ 日志配置 ═══",
  "log_settings": {
    "_comment": "控制日志级别和输出位置",
    "level": "INFO",
    "_optimization_note": "💡 如需调试，可改为DEBUG",
    "output_file": "",
    "format": "json",
    "show_metrics": false
  },
  
  "_comment_advanced": "═══ 🆕 高级功能配置（v3.4新增）═══",
  "advanced_settings": {
    "_comment": "高级爬取功能和优化",
    "enable_smart_throttling": true,
    "enable_cdn_optimization": true,
    "enable_graphql_detection": true,
    "enable_websocket_monitoring": false,
    "enable_api_versioning_detection": true
  },
  
  "_comment_output_advanced": "═══ 🆕 输出增强配置（v3.4新增）═══",
  "output_advanced": {
    "_comment": "高级分析和可视化输出",
    "save_crawl_timeline": true,
    "save_priority_distribution": true,
    "save_business_value_analysis": false,
    "_business_analysis_note": "❌ 关闭业务分析（已关闭业务过滤）",
    "enable_realtime_dashboard": false,
    "dashboard_port": 8080
  },
  
  "_comment_summary": "═══════════════════════════════════════════════════════════════",
  "_optimization_summary": {
    "_title": "🎯 优化总结",
    "_changes": [
      "✅ max_urls_per_layer: 100 → 1000（收集更多URL）",
      "✅ enable_business_aware_filter: true → false（关闭过度过滤）",
      "✅ max_param_value_variants_per_group: 3 → 10（保留更多参数）",
      "✅ allow_subdomains: false → true（允许子域名）",
      "✅ stay_in_domain: true → false（允许域外URL）",
      "✅ exclude_extensions: [大量] → []（清空，自动分类）",
      "✅ max_concurrent_requests: 20 → 30（提高并发）",
      "✅ request_delay: 500ms → 300ms（加快速度）"
    ],
    "_expected_results": {
      "url_collection": "11个 → 300-400个（27-36倍提升）",
      "http_requests": "11个 → 200-250个（适中增加）",
      "static_resources": "0个 → 100-150个（完整记录）",
      "external_links": "部分 → 全部（100%记录）",
      "completeness": "低 → 极高（95%+）"
    },
    "_recommendations": [
      "1. 立即使用此配置：-config config_optimized_for_collection.json",
      "2. 对比效果：与原config.json的结果对比",
      "3. 微调参数：根据实际效果调整max_urls_per_layer",
      "4. 开启速率限制：如目标服务器有限制，设置rate_limit_settings.enabled=true"
    ]
  }
}

