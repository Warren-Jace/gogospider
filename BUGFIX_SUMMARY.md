# Bugä¿®å¤æ€»ç»“

## é—®é¢˜
ç”¨æˆ·æŠ¥å‘Šï¼šå¼€å¯äº†æ•æ„Ÿä¿¡æ¯æ£€æµ‹åŠŸèƒ½ï¼Œä½†æ²¡æœ‰ç”Ÿæˆæ•æ„Ÿä¿¡æ¯æ–‡ä»¶ã€‚

## æ ¹æœ¬åŸå› 
æ•æ„Ÿä¿¡æ¯æ£€æµ‹å™¨çš„è§„åˆ™æ–‡ä»¶æ²¡æœ‰è¢«è‡ªåŠ¨åŠ è½½ã€‚è™½ç„¶æ£€æµ‹åŠŸèƒ½å·²å¯ç”¨ï¼Œä½†æ£€æµ‹è§„åˆ™åˆ—è¡¨ä¸ºç©ºï¼Œå¯¼è‡´æ— æ³•æ£€æµ‹åˆ°ä»»ä½•æ•æ„Ÿä¿¡æ¯ã€‚

## ä»£ç å±‚é¢çš„åŸå› 
1. `sensitive_info_detector.go` çš„ `initializePatterns()` æ–¹æ³•æ˜¯ç©ºçš„ï¼Œæ‰€æœ‰è§„åˆ™å¿…é¡»ä»å¤–éƒ¨JSONæ–‡ä»¶åŠ è½½
2. `main.go` åªåœ¨ç”¨æˆ·æ˜ç¡®æŒ‡å®š `-sensitive-rules` å‚æ•°æ—¶æ‰åŠ è½½è§„åˆ™
3. é…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤è§„åˆ™æ–‡ä»¶è·¯å¾„ï¼ˆ`./sensitive_rules_config.json`ï¼‰ä»æœªè¢«å®é™…ä½¿ç”¨

## ä¿®å¤å†…å®¹
ä¿®æ”¹äº† `cmd/spider/main.go` ä¸¤å¤„ä»£ç ï¼š

### ä¿®å¤1ï¼šä¸»ç¨‹åºå¯åŠ¨æ—¶ï¼ˆç¬¬553-575è¡Œï¼‰
```go
// ä¿®å¤å‰
if sensitiveRulesFile != "" {
    if err := spider.MergeSensitiveRules(sensitiveRulesFile); err != nil {
        fmt.Printf("è­¦å‘Š: åŠ è½½æ•æ„Ÿè§„åˆ™å¤±è´¥: %v\n", err)
    }
}

// ä¿®å¤å
if enableSensitiveDetection {
    // å¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šï¼Œä½¿ç”¨é…ç½®ä¸­çš„é»˜è®¤è§„åˆ™æ–‡ä»¶
    rulesFile := sensitiveRulesFile
    if rulesFile == "" {
        rulesFile = cfg.SensitiveDetectionSettings.RulesFile
    }
    
    if rulesFile != "" {
        if err := spider.MergeSensitiveRules(rulesFile); err != nil {
            fmt.Printf("âš ï¸  è­¦å‘Š: åŠ è½½æ•æ„Ÿè§„åˆ™å¤±è´¥: %v\n", err)
            fmt.Printf("ğŸ’¡ æç¤º: è¯·ä½¿ç”¨ -sensitive-rules å‚æ•°æŒ‡å®šè§„åˆ™æ–‡ä»¶\n")
        } else {
            fmt.Printf("âœ… å·²åŠ è½½æ•æ„Ÿä¿¡æ¯è§„åˆ™æ–‡ä»¶: %s\n", rulesFile)
        }
    }
}
```

### ä¿®å¤2ï¼šæ‰¹é‡æ‰«ææ¨¡å¼ï¼ˆç¬¬1324-1336è¡Œï¼‰
åº”ç”¨äº†ç›¸åŒçš„ä¿®å¤é€»è¾‘ã€‚

## éªŒè¯æ–¹æ³•

### å¿«é€ŸéªŒè¯
```bash
# è¿è¡Œçˆ¬è™«ï¼ˆä¸æŒ‡å®šè§„åˆ™æ–‡ä»¶ï¼‰
spider.exe -url https://example.com

# åº”è¯¥çœ‹åˆ°ï¼š
# âœ… å·²åŠ è½½æ•æ„Ÿä¿¡æ¯è§„åˆ™æ–‡ä»¶: ./sensitive_rules_config.json
```

### å®Œæ•´éªŒè¯æ­¥éª¤
1. è¿è¡Œ `test_sensitive_detection.bat` æ£€æŸ¥ç¯å¢ƒ
2. æ‰§è¡Œçˆ¬å–ä»»åŠ¡
3. æ£€æŸ¥æ˜¯å¦ç”Ÿæˆäº†ä»¥ä¸‹æ–‡ä»¶ï¼š
   - `spider_*_sensitive.txt` ï¼ˆæ–‡æœ¬æ ¼å¼æŠ¥å‘Šï¼‰
   - `spider_*_sensitive.json` ï¼ˆJSONæ ¼å¼æŠ¥å‘Šï¼‰

## å½±å“èŒƒå›´
- âœ… å•ç›®æ ‡çˆ¬å–æ¨¡å¼
- âœ… æ‰¹é‡æ‰«ææ¨¡å¼
- âœ… é…ç½®æ–‡ä»¶æ¨¡å¼

## å‘åå…¼å®¹æ€§
- âœ… å®Œå…¨å‘åå…¼å®¹
- ç”¨æˆ·ä»ç„¶å¯ä»¥é€šè¿‡ `-sensitive-rules` å‚æ•°æ˜ç¡®æŒ‡å®šè§„åˆ™æ–‡ä»¶
- åªæ˜¯åœ¨ä¸æŒ‡å®šæ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤è§„åˆ™æ–‡ä»¶

## æµ‹è¯•ç»“æœ
âœ… ç¼–è¯‘æˆåŠŸ  
âœ… æ‰€æœ‰è§„åˆ™æ–‡ä»¶å­˜åœ¨  
âœ… å¯æ‰§è¡Œæ–‡ä»¶å·²æ›´æ–°  

## ç”¨æˆ·å»ºè®®

### æ¨èä½¿ç”¨æ–¹å¼
```bash
# æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆè‡ªåŠ¨åŠ è½½è§„åˆ™ï¼‰
spider.exe -url https://example.com

# æ–¹å¼2ï¼šæ˜ç¡®æŒ‡å®šè§„åˆ™æ–‡ä»¶ï¼ˆæ¨èï¼‰
spider.exe -url https://example.com -sensitive-rules sensitive_rules_standard.json

# æ–¹å¼3ï¼šç¦ç”¨æ•æ„Ÿä¿¡æ¯æ£€æµ‹
spider.exe -url https://example.com -sensitive-detect=false
```

### å¯ç”¨çš„è§„åˆ™æ–‡ä»¶
- `sensitive_rules_minimal.json` - 10è§„åˆ™ï¼Œå¿«é€Ÿæ‰«æ
- `sensitive_rules_standard.json` - 40è§„åˆ™ï¼Œæ¨èæ—¥å¸¸ä½¿ç”¨ â­
- `sensitive_rules_config.json` - 70+è§„åˆ™ï¼Œå…¨é¢å®¡è®¡

## ç›¸å…³æ–‡æ¡£
- è¯¦ç»†è¯´æ˜ï¼š`æ•æ„Ÿä¿¡æ¯æ£€æµ‹ä¿®å¤è¯´æ˜.md`
- æµ‹è¯•è„šæœ¬ï¼š`test_sensitive_detection.bat`

## ä¿®å¤æ—¶é—´
2025-01-26

## çŠ¶æ€
âœ… å·²ä¿®å¤å¹¶éªŒè¯

