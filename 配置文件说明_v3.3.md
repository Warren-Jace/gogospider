# GogoSpider v3.3 配置文件说明

## 📋 配置文件统一

### ✅ 现在只有一个配置文件：`config.json`

**原来的4个配置文件**:
- ❌ `example_config.json` (已删除)
- ❌ `example_config_fixed.json` (已删除)
- ❌ `example_config_optimized.json` (已删除)
- ❌ `example_config_crawler.json` (已删除)

**现在只有1个配置文件**:
- ✅ **`config.json`** - 最全面、最详细的配置文件

---

## 🎯 config.json 特点

### 1. 最全面
包含所有配置项:
- ✅ 爬取深度配置
- ✅ 爬取策略配置
- ✅ Cookie认证配置
- ✅ HTTPS证书配置
- ✅ 作用域控制配置
- ✅ 速率限制配置
- ✅ 敏感信息检测配置
- ✅ 黑名单配置
- ✅ 批量扫描配置
- ✅ 输出配置
- ✅ 日志配置
- ✅ 外部数据源配置
- ✅ 管道模式配置

### 2. 最详细
每个配置项都有:
- ✅ 注释说明
- ✅ 推荐值
- ✅ 使用示例
- ✅ 注意事项

### 3. 开箱即用
- ✅ 合理的默认值
- ✅ 可直接使用
- ✅ 或根据需求修改

---

## 🚀 使用方法

### 快速开始
```bash
# 1. 复制配置文件
cp config.json my_config.json

# 2. 编辑配置文件，修改target_url为你的目标
notepad my_config.json

# 3. 运行爬虫
spider -config my_config.json
```

### 直接使用
```bash
# 使用默认配置文件（需要修改target_url）
spider -config config.json
```

---

## 📖 配置文件结构

### 必填配置
```json
{
  "target_url": "https://example.com"
}
```
**最简配置**: 只需要target_url，其他使用默认值

### Cookie认证配置
```json
{
  "target_url": "https://example.com",
  "anti_detection_settings": {
    "cookie_file": "cookies.json"
  }
}
```

### HTTPS证书配置
```json
{
  "target_url": "https://internal.com",
  "anti_detection_settings": {
    "insecure_skip_verify": true
  }
}
```

### API发现配置
```json
{
  "target_url": "https://api.example.com",
  "scope_settings": {
    "include_paths": ["/api/*", "/v1/*", "/graphql"]
  }
}
```

### 静态资源过滤
```json
{
  "scope_settings": {
    "exclude_extensions": [
      "jpg", "png", "gif", "css", "pdf"
    ]
  }
}
```
**注意**: JS文件会自动访问，不需要从exclude_extensions中移除

---

## 🎨 配置项分类

### 核心配置
- `target_url` - 目标URL（必填）
- `depth_settings` - 爬取深度
- `strategy_settings` - 爬取策略

### 反爬配置
- `anti_detection_settings` - User-Agent、代理、延迟
  - `cookie_file` - Cookie文件
  - `cookie_string` - Cookie字符串
  - `insecure_skip_verify` - 忽略证书错误

### 范围控制
- `scope_settings` - 域名、路径、扩展名过滤
- `blacklist_settings` - 黑名单配置

### 去重优化
- `deduplication_settings` - 智能去重配置

### 功能增强
- `sensitive_detection_settings` - 敏感信息检测
- `rate_limit_settings` - 速率控制
- `external_source_settings` - 外部数据源

### 批量和输出
- `batch_scan_settings` - 批量扫描
- `output_settings` - 输出格式
- `log_settings` - 日志配置
- `pipeline_settings` - 管道模式

---

## 💡 使用建议

### 场景1: 快速扫描
```json
{
  "target_url": "https://example.com",
  "depth_settings": {
    "max_depth": 2
  }
}
```

### 场景2: 深度扫描
```json
{
  "target_url": "https://example.com",
  "depth_settings": {
    "max_depth": 10,
    "deep_crawling": true
  },
  "strategy_settings": {
    "enable_common_path_scan": true
  }
}
```

### 场景3: 需要认证
```json
{
  "target_url": "https://example.com",
  "anti_detection_settings": {
    "cookie_file": "cookies.json"
  }
}
```

### 场景4: 内网扫描
```json
{
  "target_url": "https://internal.company.com",
  "anti_detection_settings": {
    "insecure_skip_verify": true,
    "cookie_file": "auth_cookies.json"
  }
}
```

### 场景5: 隐蔽扫描
```json
{
  "target_url": "https://example.com",
  "rate_limit_settings": {
    "enabled": true,
    "requests_per_second": 5,
    "min_delay": 500,
    "max_delay": 2000
  }
}
```

---

## 🔧 高级配置技巧

### 1. 为不同场景准备配置文件
```bash
config_quick.json       # 快速扫描（depth=2）
config_deep.json        # 深度扫描（depth=10）
config_api.json         # API发现
config_auth.json        # 需要认证
config_insecure.json    # 忽略证书
```

### 2. 使用配置模板
```bash
# 从config.json复制
cp config.json config_myproject.json

# 修改必要的配置项
# - target_url
# - cookie_file
# - depth_settings
# 其他保持默认值即可
```

### 3. 配置文件版本管理
```bash
# 为不同项目准备配置
project1/
  ├── config.json
  ├── cookies.json
  └── targets.txt

project2/
  ├── config.json
  ├── cookies.json
  └── targets.txt
```

---

## ❓ 常见问题

### Q1: 配置文件太长了，能简化吗？
**A**: 可以！只保留需要修改的配置项：
```json
{
  "target_url": "https://example.com",
  "depth_settings": {
    "max_depth": 5
  },
  "anti_detection_settings": {
    "cookie_file": "cookies.json"
  }
}
```
其他配置项会使用默认值。

### Q2: 如何查看完整的配置项？
**A**: 查看 `config.json`，里面有所有配置项和详细注释。

### Q3: 配置文件报错怎么办？
**A**: 
1. 检查JSON格式是否正确（注意逗号、引号）
2. 使用JSON验证工具检查
3. 参考config.json的格式

### Q4: 旧的配置文件还能用吗？
**A**: 
- 旧配置文件已删除
- 请使用新的 `config.json`
- 参考 `快速迁移指南_v3.3.md` 进行迁移

### Q5: 如何快速生成配置文件？
**A**:
```bash
# 复制模板
cp config.json my_config.json

# 只修改这几项
# 1. target_url
# 2. cookie_file (如需要)
# 3. max_depth (如需要)
# 其他保持默认
```

---

## 📚 相关文档

1. **config.json** - 完整配置文件（包含所有配置项和注释）
2. **使用指南_v3.3.md** - 使用手册（8个场景示例）
3. **快速迁移指南_v3.3.md** - 从旧版本迁移
4. **CONFIG_GUIDE.md** - 配置详细指南

---

## 🎉 总结

### 简化前
- ❌ 4个配置文件，不知道用哪个
- ❌ 配置分散，难以维护
- ❌ 重复内容多

### 简化后
- ✅ 只有1个配置文件
- ✅ 最全面、最详细
- ✅ 开箱即用
- ✅ 易于维护

### 推荐做法
```
1. 使用 config.json 作为模板
2. 复制并重命名为项目配置
3. 修改必要的配置项
4. 其他保持默认值
```

---

**版本**: v3.3  
**配置文件**: config.json（唯一）  
**状态**: 生产就绪 ✅

