# GogoSpiderçˆ¬è™«å·¥å…·å®Œæ•´åˆ†ææŠ¥å‘Š

## ä¸€ã€ä»£ç å’Œé…ç½®æ–‡ä»¶åˆ†ææ€»ç»“

### 1.1 é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
gogospider/
â”œâ”€â”€ cmd/spider/main.go          # ä¸»ç¨‹åºå…¥å£å’Œè¾“å‡ºé€»è¾‘
â”œâ”€â”€ config.json                 # é…ç½®æ–‡ä»¶
â””â”€â”€ core/                       # æ ¸å¿ƒä»£ç ç›®å½•
    â”œâ”€â”€ spider.go               # çˆ¬è™«åè°ƒå™¨
    â”œâ”€â”€ static_crawler.go       # é™æ€çˆ¬è™«
    â”œâ”€â”€ dynamic_crawler.go      # åŠ¨æ€çˆ¬è™«
    â”œâ”€â”€ resource_classifier.go  # èµ„æºåˆ†ç±»å™¨
    â”œâ”€â”€ scope_control.go        # ä½œç”¨åŸŸæ§åˆ¶
    â”œâ”€â”€ advanced_scope.go       # é«˜çº§ä½œç”¨åŸŸ
    â”œâ”€â”€ url_validator.go        # URLéªŒè¯å™¨
    â””â”€â”€ ...                     # å…¶ä»–æ ¸å¿ƒç»„ä»¶
```

---

## äºŒã€è¶…å‡ºé™åˆ¶çš„é“¾æ¥åœ°å€åˆ†æ

### 2.1 å½“å‰å®ç°æƒ…å†µ

**âœ… å·²å®ç°ï¼š**
- Spiderç»“æ„ä½“ä¸­æœ‰`externalLinks`å­—æ®µç”¨äºè®°å½•å¤–éƒ¨é“¾æ¥
- åœ¨`collectLinksForLayer`å‡½æ•°ä¸­ä¼šè®°å½•å¤–éƒ¨é“¾æ¥

**âŒ å­˜åœ¨é—®é¢˜ï¼š**

#### é—®é¢˜1ï¼šé¦–æ¬¡çˆ¬å–æ—¶çš„å¤–éƒ¨é“¾æ¥æœªè¢«è®°å½•
```go
// åœ¨ spider.go çš„ Start() å‡½æ•°ä¸­
// é¦–æ¬¡ä½¿ç”¨é™æ€/åŠ¨æ€çˆ¬è™«çˆ¬å–æ—¶ï¼Œå‘ç°çš„å¤–éƒ¨é“¾æ¥æ²¡æœ‰è¢«è®°å½•åˆ° externalLinks ä¸­
// åªæœ‰åœ¨é€’å½’çˆ¬å–çš„ collectLinksForLayer() å‡½æ•°ä¸­æ‰ä¼šè®°å½•
```

**å½±å“ï¼š** ç¬¬ä¸€æ¬¡çˆ¬å–ç›®æ ‡URLæ—¶å‘ç°çš„æ‰€æœ‰å¤–éƒ¨é“¾æ¥éƒ½ä¼šä¸¢å¤±ã€‚

#### é—®é¢˜2ï¼šæ²¡æœ‰ä¿å­˜å¤–éƒ¨é“¾æ¥åˆ°æ–‡ä»¶
```go
// main.go ä¸­æ²¡æœ‰ä¿å­˜ externalLinks çš„ä»£ç 
// externalLinks å­—æ®µè™½ç„¶è¢«æ”¶é›†ï¼Œä½†ä»æœªè¾“å‡ºåˆ°æ–‡ä»¶
```

**å½±å“ï¼š** å³ä½¿æ”¶é›†äº†å¤–éƒ¨é“¾æ¥ï¼Œç”¨æˆ·ä¹Ÿæ— æ³•çœ‹åˆ°ã€‚

#### é—®é¢˜3ï¼šåŸŸå¤–é“¾æ¥åˆ¤æ–­ä¸ä¸€è‡´
åœ¨ä¸åŒçš„ä»£ç ä½ç½®ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºå¤–éƒ¨é“¾æ¥çš„é€»è¾‘ä¸ç»Ÿä¸€ï¼š
- `collectLinksForLayer`: ä½¿ç”¨`parsedURL.Host != s.targetDomain`
- `isInTargetDomain`: ä½¿ç”¨æ›´å¤æ‚çš„å­åŸŸååŒ¹é…é€»è¾‘
- `saveAllURLs`: ä½¿ç”¨`isInTargetDomain`å‡½æ•°

**å½±å“ï¼š** å¯èƒ½å¯¼è‡´éƒ¨åˆ†å¤–éƒ¨é“¾æ¥æ²¡æœ‰è¢«æ­£ç¡®è¯†åˆ«å’Œè®°å½•ã€‚

### 2.2 é—æ¼çš„è¶…å‡ºèŒƒå›´é“¾æ¥ç±»å‹

1. **é»‘åå•åŸŸåçš„URL**
   - é…ç½®æ–‡ä»¶ä¸­æœ‰`blacklist_settings.domains`é…ç½®
   - ä»£ç ä¸­ä¼šæ‹’ç»è®¿é—®é»‘åå•åŸŸåï¼Œä½†**æ²¡æœ‰è®°å½•**è¿™äº›URL

2. **ä½œç”¨åŸŸè¿‡æ»¤çš„URL**
   - `scope_settings`é…ç½®äº†å„ç§è¿‡æ»¤è§„åˆ™
   - è¢«è¿‡æ»¤çš„URLåªæ˜¯ç®€å•è·³è¿‡ï¼Œ**æ²¡æœ‰ä¿å­˜**

3. **å­åŸŸåURLï¼ˆå½“ä¸å…è®¸å­åŸŸåæ—¶ï¼‰**
   - `allow_subdomains: false`æ—¶ï¼Œå­åŸŸåä¼šè¢«è¿‡æ»¤
   - è¿™äº›å­åŸŸåURL**æ²¡æœ‰è¢«è®°å½•**

### 2.3 ä¼˜åŒ–å»ºè®®

**æ–¹æ¡ˆ1ï¼šåœ¨Spiderä¸­æ·»åŠ ç»Ÿä¸€çš„URLæ”¶é›†æ¥å£**
```go
// æ·»åŠ æ–°å­—æ®µè®°å½•æ‰€æœ‰è¢«è¿‡æ»¤çš„URL
type Spider struct {
    // ... ç°æœ‰å­—æ®µ
    filteredURLs      []FilteredURL    // æ‰€æœ‰è¢«è¿‡æ»¤çš„URL
    externalURLs      []string         // å¤–éƒ¨åŸŸåURL
    blacklistedURLs   []string         // é»‘åå•URL
    staticResourceURLs []string        // é™æ€èµ„æºURL
}

type FilteredURL struct {
    URL    string
    Reason string  // è¿‡æ»¤åŸå› 
    Type   string  // URLç±»å‹
}
```

**æ–¹æ¡ˆ2ï¼šä¿®æ”¹é™æ€çˆ¬è™«ï¼Œè®°å½•æ‰€æœ‰å‘ç°çš„é“¾æ¥**
```go
// åœ¨ static_crawler.go çš„å›è°ƒå‡½æ•°ä¸­
collector.OnHTML("a[href]", func(e *colly.HTMLElement) {
    link := e.Attr("href")
    absoluteURL := e.Request.AbsoluteURL(link)
    
    // æ— è®ºæ˜¯å¦åœ¨ä½œç”¨åŸŸå†…ï¼Œéƒ½å…ˆè®°å½•
    // ç„¶åæ ¹æ®ç±»å‹åˆ†ç±»ä¿å­˜
})
```

---

## ä¸‰ã€é™æ€èµ„æºé“¾æ¥åœ°å€åˆ†æ

### 3.1 å½“å‰å®ç°æƒ…å†µ

**âœ… å·²å®ç°ï¼š**
- `ResourceClassifier`ç±»å¯ä»¥åˆ†ç±»7ç§èµ„æºç±»å‹
- `config.json`ä¸­çš„`exclude_extensions`é…ç½®äº†éœ€è¦æ’é™¤çš„é™æ€æ–‡ä»¶æ‰©å±•å
- JSå’ŒCSSæ–‡ä»¶ä¼šè¢«ä¸‹è½½å’Œåˆ†æï¼ˆä¸åœ¨æ’é™¤åˆ—è¡¨ä¸­ï¼‰

**âŒ å­˜åœ¨é—®é¢˜ï¼š**

#### é—®é¢˜1ï¼šResult.Assetså­—æ®µæœªè¢«æœ‰æ•ˆä½¿ç”¨
```go
// åœ¨ spider.go ä¸­å®šä¹‰äº† Result.Assets å­—æ®µ
type Result struct {
    // ...
    Assets []string  // é™æ€èµ„æº
}

// ä½†æ˜¯åœ¨ main.go çš„ saveAllURLs å‡½æ•°ä¸­ï¼ŒAssets å­—æ®µä»æœªè¢«è¯»å–å’Œä¿å­˜
```

**å½±å“ï¼š** å³ä½¿çˆ¬è™«æ”¶é›†äº†é™æ€èµ„æºé“¾æ¥ï¼Œä¹Ÿä¸ä¼šè¢«è¾“å‡ºã€‚

#### é—®é¢˜2ï¼šexclude_extensionsä¸­çš„æ–‡ä»¶ç›´æ¥ä¸¢å¼ƒ
```go
// åœ¨ scope_control.go å’Œ advanced_scope.go ä¸­
// æ£€æŸ¥æ‰©å±•åæ—¶ï¼Œå¦‚æœåŒ¹é… exclude_extensionsï¼Œç›´æ¥è¿”å› false
// è¿™å¯¼è‡´è¿™äº›URLè¢«å®Œå…¨è·³è¿‡ï¼Œæ—¢ä¸è¯·æ±‚ä¹Ÿä¸è®°å½•
```

**å½±å“ï¼š** é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰é™æ€èµ„æºç±»å‹ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€å­—ä½“ç­‰ï¼‰çš„URLéƒ½ä¼šä¸¢å¤±ã€‚

#### é—®é¢˜3ï¼šResourceClassifierçš„åˆ†ç±»ç»“æœæœªè¢«ä¿å­˜
```go
// ResourceClassifier å¯ä»¥åˆ†ç±»èµ„æºï¼š
// - éœ€è¦è¯·æ±‚ï¼šPage, JavaScript, CSS, API
// - åªæ”¶é›†ä¸è¯·æ±‚ï¼šImage, Video, Audio, Font, Document, Archive, Other, External

// ä½†æ˜¯"åªæ”¶é›†ä¸è¯·æ±‚"çš„èµ„æºï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰è¢«æ”¶é›†åˆ°ä»»ä½•åœ°æ–¹
```

**å½±å“ï¼š** ç²¾å¿ƒè®¾è®¡çš„èµ„æºåˆ†ç±»åŠŸèƒ½å½¢åŒè™šè®¾ã€‚

### 3.2 é™æ€èµ„æºé“¾æ¥çš„å®Œæ•´åˆ—è¡¨

æ ¹æ®ä»£ç åˆ†æï¼Œä»¥ä¸‹ç±»å‹çš„é™æ€èµ„æºå¯èƒ½æœªè¢«è®°å½•ï¼š

1. **å›¾ç‰‡èµ„æº**
   - .jpg, .jpeg, .png, .gif, .svg, .ico, .webp, .bmp, .tif, .tiff, .avif

2. **è§†é¢‘èµ„æº**
   - .mp4, .avi, .mov, .wmv, .flv, .mkv, .webm, .m4v, .mpg, .mpeg, .3gp

3. **éŸ³é¢‘èµ„æº**
   - .mp3, .wav, .ogg, .m4a, .aac, .flac, .wma, .opus, .aiff

4. **å­—ä½“èµ„æº**
   - .woff, .woff2, .ttf, .eot, .otf

5. **æ–‡æ¡£èµ„æº**
   - .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .txt, .csv, .rtf

6. **å‹ç¼©åŒ…èµ„æº**
   - .zip, .rar, .tar, .gz, .bz2, .7z, .tgz, .tar.gz, .tar.bz2

7. **CSSèµ„æº**ï¼ˆç‰¹æ®Šï¼šåº”è¯¥è¢«è¯·æ±‚å’Œåˆ†æï¼‰
   - .css, .scss, .sass, .less

### 3.3 ä¼˜åŒ–å»ºè®®

**æ–¹æ¡ˆ1ï¼šä¿®æ”¹Resultç»“æ„ï¼Œå¢åŠ åˆ†ç±»å­—æ®µ**
```go
type Result struct {
    URL          string
    Links        []string
    Assets       []string          // ä¿ç•™åŸå­—æ®µ
    StaticResources StaticResources  // æ–°å¢ï¼šåˆ†ç±»çš„é™æ€èµ„æº
    // ...
}

type StaticResources struct {
    Images    []string
    Videos    []string
    Audios    []string
    Fonts     []string
    Documents []string
    Archives  []string
    CSS       []string
    External  []string
}
```

**æ–¹æ¡ˆ2ï¼šä¿®æ”¹çˆ¬è™«é€»è¾‘ï¼Œç¡®ä¿æ‰€æœ‰é“¾æ¥éƒ½è¢«è®°å½•**
```go
// åœ¨ static_crawler.go ä¸­
collector.OnHTML("a[href], img[src], link[href], script[src]", func(e *colly.HTMLElement) {
    // æå–URL
    var urlStr string
    switch e.Name {
    case "a":
        urlStr = e.Attr("href")
    case "img", "script":
        urlStr = e.Attr("src")
    case "link":
        urlStr = e.Attr("href")
    }
    
    absoluteURL := e.Request.AbsoluteURL(urlStr)
    
    // åˆ†ç±»å¹¶è®°å½•ï¼ˆå³ä½¿ä¸è¯·æ±‚ä¹Ÿè¦è®°å½•ï¼‰
    resourceType, shouldRequest := classifier.ClassifyURL(absoluteURL)
    
    if shouldRequest {
        result.Links = append(result.Links, absoluteURL)
    } else {
        // è®°å½•åˆ°é™æ€èµ„æº
        result.Assets = append(result.Assets, absoluteURL)
    }
})
```

**æ–¹æ¡ˆ3ï¼šåœ¨main.goä¸­æ·»åŠ ä¿å­˜é™æ€èµ„æºçš„é€»è¾‘**
```go
func saveAllURLs(results []*core.Result, baseFilename string) error {
    // ... ç°æœ‰ä»£ç 
    
    // æ–°å¢ï¼šæ”¶é›†æ‰€æœ‰é™æ€èµ„æº
    staticResources := make(map[string]bool)
    for _, result := range results {
        for _, asset := range result.Assets {
            staticResources[asset] = true
        }
    }
    
    // ä¿å­˜é™æ€èµ„æº
    if len(staticResources) > 0 {
        if err := writeURLsToFile(staticResources, baseFilename+"_static_resources.txt"); err != nil {
            log.Printf("è­¦å‘Š: ä¿å­˜é™æ€èµ„æºå¤±è´¥: %v", err)
        }
    }
    
    return nil
}
```

---

## å››ã€JSæ–‡ä»¶å¤„ç†åˆ†æ

### 4.1 å½“å‰å®ç°æƒ…å†µ

**âœ… å·²å®ç°ï¼š**
- JSæ–‡ä»¶å·²ä»`exclude_extensions`åˆ—è¡¨ç§»é™¤ï¼ˆé…ç½®æ–‡ä»¶æ³¨é‡Šä¸­è¯´æ˜ï¼‰
- `JSAnalyzer`ç»„ä»¶ä¼šåˆ†æJSä»£ç ï¼Œæå–URL
- `CDNDetector`æ”¯æŒ60+ä¸ªCDNçš„è·¨åŸŸJSåˆ†æ
- `ResourceClassifier`å°†JSæ–‡ä»¶åˆ†ç±»ä¸ºéœ€è¦è¯·æ±‚çš„èµ„æº

**âœ… å·¥ä½œæ­£å¸¸ï¼š**
```go
// åœ¨ resource_classifier.go ä¸­
func (r *ResourceClassifier) isJavaScript(path string) bool {
    jsExtensions := []string{".js", ".mjs", ".jsx"}
    for _, ext := range jsExtensions {
        if strings.HasSuffix(path, ext) {
            return true
        }
    }
    return false
}

// ClassifyURL å‡½æ•°ä¸­
if r.isJavaScript(path) {
    return ResourceTypeJavaScript, true // éœ€è¦è¯·æ±‚
}
```

**âœ… JSåˆ†ææµç¨‹ï¼š**
1. é™æ€çˆ¬è™«æå–`<script src="">`æ ‡ç­¾ä¸­çš„JSé“¾æ¥
2. åŠ¨æ€çˆ¬è™«ï¼ˆChromeï¼‰æ‹¦æˆªæ‰€æœ‰JSè¯·æ±‚
3. JSæ–‡ä»¶è¢«ä¸‹è½½åï¼Œç”±`JSAnalyzer`è§£æ
4. ä»JSä¸­æå–URLã€APIç«¯ç‚¹ã€é…ç½®ç­‰ä¿¡æ¯

### 4.2 æ½œåœ¨é—®é¢˜

#### é—®é¢˜1ï¼šå†…è”JSä»£ç çš„å¤„ç†
```go
// éœ€è¦ç¡®è®¤æ˜¯å¦å¤„ç†äº† <script> æ ‡ç­¾å†…çš„å†…è”JSä»£ç 
// ä¾‹å¦‚ï¼š<script>var api = '/api/user';</script>
```

**æ£€æŸ¥ç»“æœï¼š** ä»£ç ä¸­æœ‰å¤„ç†å†…è”JSçš„é€»è¾‘ï¼ˆåœ¨JSAnalyzerä¸­ï¼‰

#### é—®é¢˜2ï¼šåŠ¨æ€åŠ è½½çš„JS
```javascript
// é€šè¿‡JSåŠ¨æ€åŠ è½½çš„è„šæœ¬
document.write('<script src="dynamic.js"></script>');
$.getScript('lazy.js');
```

**æ£€æŸ¥ç»“æœï¼š** åŠ¨æ€çˆ¬è™«ä½¿ç”¨Chromeï¼Œå¯ä»¥æ•è·åŠ¨æ€åŠ è½½çš„JS

#### é—®é¢˜3ï¼šJSæ–‡ä»¶çš„è®°å½•
```go
// éœ€è¦ç¡®è®¤ï¼šä¸‹è½½å’Œåˆ†æçš„JSæ–‡ä»¶URLæœ¬èº«æ˜¯å¦è¢«è®°å½•
```

**å­˜åœ¨çš„é—®é¢˜ï¼š** JSæ–‡ä»¶URLå¯èƒ½è¢«è®°å½•åœ¨`result.Links`ä¸­ï¼Œä½†æ²¡æœ‰å•ç‹¬åˆ†ç±»ä¿å­˜ã€‚

### 4.3 ä¼˜åŒ–å»ºè®®

**æ–¹æ¡ˆ1ï¼šå•ç‹¬è®°å½•JSæ–‡ä»¶åˆ—è¡¨**
```go
// åœ¨ Result ç»“æ„ä¸­æ·»åŠ 
type Result struct {
    // ...
    JSFiles  []string  // å‘ç°çš„JSæ–‡ä»¶åˆ—è¡¨
    CSSFiles []string  // å‘ç°çš„CSSæ–‡ä»¶åˆ—è¡¨
}
```

**æ–¹æ¡ˆ2ï¼šåœ¨è¾“å‡ºæ—¶åˆ†ç±»ä¿å­˜**
```go
func saveAllURLs(results []*core.Result, baseFilename string) error {
    // ... ç°æœ‰ä»£ç 
    
    // æ”¶é›†JSå’ŒCSSæ–‡ä»¶
    jsFiles := make(map[string]bool)
    cssFiles := make(map[string]bool)
    
    for _, result := range results {
        for _, link := range result.Links {
            if strings.HasSuffix(strings.ToLower(link), ".js") ||
               strings.HasSuffix(strings.ToLower(link), ".mjs") {
                jsFiles[link] = true
            } else if strings.HasSuffix(strings.ToLower(link), ".css") {
                cssFiles[link] = true
            }
        }
    }
    
    // ä¿å­˜JSæ–‡ä»¶åˆ—è¡¨
    if len(jsFiles) > 0 {
        if err := writeURLsToFile(jsFiles, baseFilename+"_js_files.txt"); err != nil {
            log.Printf("è­¦å‘Š: ä¿å­˜JSæ–‡ä»¶å¤±è´¥: %v", err)
        }
    }
    
    // ä¿å­˜CSSæ–‡ä»¶åˆ—è¡¨
    if len(cssFiles) > 0 {
        if err := writeURLsToFile(cssFiles, baseFilename+"_css_files.txt"); err != nil {
            log.Printf("è­¦å‘Š: ä¿å­˜CSSæ–‡ä»¶å¤±è´¥: %v", err)
        }
    }
    
    return nil
}
```

### 4.4 ç»“è®º

**âœ… JSæ–‡ä»¶å¤„ç†åŸºæœ¬æ­£å¸¸ï¼š**
- æ‰€æœ‰JSæ–‡ä»¶éƒ½ä¼šè¢«ä¸‹è½½å’Œåˆ†æ
- JSä¸­çš„URLä¼šè¢«æå–
- è·¨åŸŸJSä¹Ÿèƒ½è¢«åˆ†æ

**âš ï¸ éœ€è¦æ”¹è¿›ï¼š**
- JSæ–‡ä»¶URLåº”è¯¥å•ç‹¬åˆ†ç±»ä¿å­˜ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹å’Œä½¿ç”¨

---

## äº”ã€å…¶ä»–æœªè®°å½•çš„é“¾æ¥ç±»å‹

### 5.1 é»‘åå•URL

**é…ç½®ï¼š**
```json
"blacklist_settings": {
    "enabled": true,
    "domains": ["*.gov.cn", "*.edu.cn", "*.mil.cn"],
    "strict_mode": true
}
```

**å½“å‰å¤„ç†ï¼š**
- ä»£ç ä¸­ä¼šæ£€æŸ¥é»‘åå•
- å¦‚æœåŒ¹é…ï¼Œç›´æ¥æ‹’ç»è®¿é—®
- **ä½†æ²¡æœ‰è®°å½•è¿™äº›URL**

**å½±å“ï¼š** ç”¨æˆ·æ— æ³•çŸ¥é“æœ‰å¤šå°‘URLå› ä¸ºé»‘åå•è€Œè¢«è·³è¿‡ã€‚

**ä¼˜åŒ–å»ºè®®ï¼š**
```go
// åœ¨ Spider ä¸­æ·»åŠ 
type Spider struct {
    // ...
    blacklistedURLs []string  // é»‘åå•URLåˆ—è¡¨
}

// åœ¨æ£€æŸ¥é»‘åå•æ—¶è®°å½•
if isBlacklisted(url) {
    s.mutex.Lock()
    s.blacklistedURLs = append(s.blacklistedURLs, url)
    s.mutex.Unlock()
    return false
}
```

### 5.2 è¢«URLéªŒè¯å™¨è¿‡æ»¤çš„åƒåœ¾URL

**å½“å‰å®ç°ï¼š**
```go
// URLValidator ä¼šè¿‡æ»¤å„ç§åƒåœ¾URL
// ä¾‹å¦‚ï¼šJavaScriptä»£ç ç‰‡æ®µã€MIMEç±»å‹ã€HTMLæ ‡ç­¾ç­‰
if s.urlValidator != nil && !s.urlValidator.IsValidBusinessURL(absoluteURL) {
    invalidCount++
    return  // ç›´æ¥è·³è¿‡ï¼Œä¸è®°å½•
}
```

**é—®é¢˜ï¼š** è¿™äº›è¢«è¿‡æ»¤çš„"åƒåœ¾URL"è™½ç„¶ç¡®å®æ— æ•ˆï¼Œä½†ç”¨æˆ·å¯èƒ½å¸Œæœ›çŸ¥é“è¿‡æ»¤äº†å“ªäº›ã€‚

**ä¼˜åŒ–å»ºè®®ï¼š**
```go
// æ·»åŠ è¯¦ç»†çš„è¿‡æ»¤ç»Ÿè®¡
type URLFilterStats struct {
    InvalidFormat     []string  // æ ¼å¼é”™è¯¯
    JavaScriptCode    []string  // JSä»£ç ç‰‡æ®µ
    TooShort          []string  // è·¯å¾„è¿‡çŸ­
    OnlyNumbers       []string  // çº¯æ•°å­—
    // ...
}

// åœ¨è¿‡æ»¤æ—¶è®°å½•åŸå› 
if !validator.IsValidBusinessURL(url) {
    reason := validator.GetInvalidReason(url)
    s.recordFilteredURL(url, reason)
}
```

### 5.3 è¢«ä¸šåŠ¡æ„ŸçŸ¥è¿‡æ»¤å™¨è¿‡æ»¤çš„ä½ä»·å€¼URL

**å½“å‰å®ç°ï¼š**
```go
// ä¸šåŠ¡æ„ŸçŸ¥è¿‡æ»¤å™¨ä¼šè¿‡æ»¤ä½ä»·å€¼URL
shouldCrawl, reason, score := s.businessFilter.ShouldCrawlURL(link)
if !shouldCrawl {
    skippedByBusiness++
    // åªæ‰“å°å‰5ä¸ªï¼Œå…¶ä»–çš„å°±ä¸¢å¤±äº†
    continue
}
```

**é—®é¢˜ï¼š** è¢«è¿‡æ»¤çš„URLè™½ç„¶ä»·å€¼ä½ï¼Œä½†ç”¨æˆ·å¯èƒ½ä»ç„¶å¸Œæœ›çœ‹åˆ°å®Œæ•´åˆ—è¡¨ã€‚

### 5.4 è¢«æ™ºèƒ½å»é‡è¿‡æ»¤çš„URL

**ç±»å‹ï¼š**
1. ç›¸ä¼¼å‚æ•°å€¼çš„URLï¼ˆæ™ºèƒ½å‚æ•°å»é‡ï¼‰
2. é‡å¤æ¨¡å¼çš„URLï¼ˆURLæ¨¡å¼å»é‡ï¼‰
3. DOMç›¸ä¼¼çš„é¡µé¢ï¼ˆDOMå»é‡ï¼‰

**å½“å‰å¤„ç†ï¼š** åªç»Ÿè®¡æ•°é‡ï¼Œä¸ä¿å­˜å…·ä½“URLã€‚

### 5.5 è¢«ç™»å½•å¢™æ£€æµ‹å™¨è¿‡æ»¤çš„URL

**å½“å‰å®ç°ï¼š**
```go
// v3.2 æ–°å¢çš„ç™»å½•å¢™æ£€æµ‹
shouldSkip, reason := s.loginWallDetector.ShouldSkipURL(link)
if shouldSkip {
    skippedByLoginWall++
    // åªè®°å½•åˆ°æ—¥å¿—ï¼Œä¸ä¿å­˜
    continue
}
```

### 5.6 å…¶ä»–é—æ¼çš„é“¾æ¥ç±»å‹

1. **WebSocketè¿æ¥**
   - `ws://` å’Œ `wss://` åè®®çš„é“¾æ¥
   - å¯èƒ½åœ¨JSä»£ç ä¸­å‘ç°ï¼Œä½†æœªä¸“é—¨åˆ†ç±»

2. **æ•°æ®URL**
   - `data:` åè®®çš„é“¾æ¥
   - é€šå¸¸åŒ…å«Base64ç¼–ç çš„æ•°æ®

3. **Mailtoé“¾æ¥**
   - `mailto:` åè®®çš„é“¾æ¥
   - å¯èƒ½åŒ…å«é‚®ç®±åœ°å€ä¿¡æ¯

4. **ç”µè¯é“¾æ¥**
   - `tel:` åè®®çš„é“¾æ¥

5. **FTPé“¾æ¥**
   - `ftp://` åè®®çš„é“¾æ¥

**å½“å‰å¤„ç†ï¼š** è¿™äº›ç‰¹æ®Šåè®®çš„é“¾æ¥è¢«`isInTargetDomain`å‡½æ•°ç›´æ¥æ’é™¤ï¼š
```go
func (s *Spider) isInTargetDomain(urlStr string) bool {
    if strings.HasPrefix(urlStr, "mailto:") || 
       strings.HasPrefix(urlStr, "tel:") ||
       strings.HasPrefix(urlStr, "javascript:") ||
       strings.HasPrefix(urlStr, "data:") {
        return false  // ç›´æ¥æ’é™¤ï¼Œä¸è®°å½•
    }
    // ...
}
```

### 5.7 å®Œæ•´çš„URLåˆ†ç±»å»ºè®®

```go
type URLClassification struct {
    // æœ‰æ•ˆURLï¼ˆä¼šè¢«çˆ¬å–ï¼‰
    ValidPages       []string
    ValidAPIs        []string
    ValidJSFiles     []string
    ValidCSSFiles    []string
    
    // é™æ€èµ„æºï¼ˆè®°å½•ä½†ä¸è¯·æ±‚ï¼‰
    Images           []string
    Videos           []string
    Audios           []string
    Fonts            []string
    Documents        []string
    Archives         []string
    
    // è¶…å‡ºèŒƒå›´ï¼ˆè®°å½•ä½†ä¸è¯·æ±‚ï¼‰
    ExternalDomains  []string  // å¤–éƒ¨åŸŸå
    SubdomainsBlocked []string // è¢«ç¦æ­¢çš„å­åŸŸå
    BlacklistedURLs  []string  // é»‘åå•URL
    
    // ç‰¹æ®Šåè®®ï¼ˆä»…è®°å½•ï¼‰
    MailtoLinks      []string
    TelLinks         []string
    WebSocketLinks   []string
    FTPLinks         []string
    DataURLs         []string
    
    // è¢«è¿‡æ»¤çš„URL
    InvalidURLs      []string  // æ ¼å¼é”™è¯¯
    DuplicateURLs    []string  // é‡å¤URL
    LowValueURLs     []string  // ä½ä»·å€¼URL
    LoginWallURLs    []string  // ç™»å½•å¢™URL
    
    // ç»Ÿè®¡ä¿¡æ¯
    TotalDiscovered  int
    TotalCrawled     int
    TotalFiltered    int
}
```

---

## å…­ã€è¾“å‡ºæ–‡ä»¶ä¼˜åŒ–

### 6.1 éœ€è¦åˆ é™¤çš„æ–‡ä»¶

æ ¹æ®ç”¨æˆ·è¦æ±‚ï¼Œéœ€è¦åˆ é™¤ä»¥ä¸‹ä¸‰ä¸ªè¾“å‡ºæ–‡ä»¶åŠç›¸å…³ä»£ç ï¼š

#### æ–‡ä»¶1ï¼šspider_example.com_20251026_143000_params.txtï¼ˆå¸¦å‚æ•°çš„URLï¼‰

**ä½ç½®ï¼š** `cmd/spider/main.go` ç¬¬852-856è¡Œ

```go
// ä¿å­˜å¸¦å‚æ•°çš„URLï¼ˆæ–¹ä¾¿å‚æ•°Fuzzï¼‰
if len(paramURLs) > 0 {
    if err := writeURLsToFile(paramURLs, baseFilename+"_params.txt"); err != nil {
        log.Printf("è­¦å‘Š: ä¿å­˜å‚æ•°URLå¤±è´¥: %v", err)
    }
}
```

**åˆ é™¤åŸå› ï¼š** ç”¨æˆ·ä¸éœ€è¦å•ç‹¬çš„å‚æ•°URLæ–‡ä»¶ï¼Œè¿™äº›URLå·²åŒ…å«åœ¨`_all_urls.txt`ä¸­ã€‚

#### æ–‡ä»¶2ï¼šspider_example.com_20251026_143000_forms.txtï¼ˆè¡¨å•URLï¼‰

**ä½ç½®ï¼š** `cmd/spider/main.go` ç¬¬866-870è¡Œ

```go
// ä¿å­˜è¡¨å•URLï¼ˆæ–¹ä¾¿è¡¨å•æµ‹è¯•ï¼‰
if len(formURLs) > 0 {
    if err := writeURLsToFile(formURLs, baseFilename+"_forms.txt"); err != nil {
        log.Printf("è­¦å‘Š: ä¿å­˜è¡¨å•URLå¤±è´¥: %v", err)
    }
}
```

**åˆ é™¤åŸå› ï¼š** è¡¨å•URLä¹Ÿå·²åŒ…å«åœ¨`_all_urls.txt`ä¸­ï¼Œæ— éœ€é‡å¤ã€‚

#### æ–‡ä»¶3ï¼šspider_example.com_20251026_143000_structure_unique_urls.txtï¼ˆç»“æ„åŒ–å»é‡URLï¼‰

**ä½ç½®ï¼š** `cmd/spider/main.go` ç¬¬583-591è¡Œ

```go
// ğŸ†• ç»“æ„åŒ–å»é‡: ä¿å­˜ç»“æ„åŒ–å»é‡åçš„URLï¼ˆè¯†åˆ«è·¯å¾„å˜é‡+å‚æ•°å€¼ï¼‰
// å…ˆæ”¶é›†æ‰€æœ‰URLåˆ°ç»“æ„åŒ–å»é‡å™¨
spider.CollectAllURLsForStructureDedup()

// ä¿å­˜ç»“æ„åŒ–å»é‡åçš„URL
structureUniqueFile := baseFilename + "_structure_unique_urls.txt"
if err := spider.SaveStructureUniqueURLsToFile(structureUniqueFile); err != nil {
    log.Printf("ä¿å­˜ç»“æ„åŒ–å»é‡URLå¤±è´¥: %v", err)
}
```

**åˆ é™¤åŸå› ï¼š** ç”¨æˆ·ä¸éœ€è¦å»é‡åçš„URLåˆ—è¡¨ï¼Œåªéœ€è¦å®Œæ•´çš„URLåˆ—è¡¨ã€‚

### 6.2 ä¿ç•™çš„è¾“å‡ºæ–‡ä»¶

ä¿ç•™ä»¥ä¸‹æœ‰ä»·å€¼çš„è¾“å‡ºæ–‡ä»¶ï¼š

1. **spider_xxx.txt** - ä¸»æŠ¥å‘Šæ–‡ä»¶ï¼ˆè¯¦ç»†ä¿¡æ¯ï¼‰
2. **spider_xxx_urls.txt** - URLåˆ—è¡¨ï¼ˆå…¼å®¹æ€§ä¿ç•™ï¼‰
3. **spider_xxx_all_urls.txt** - å®Œæ•´URLåˆ—è¡¨
4. **spider_xxx_unique_urls.txt** - å»é‡URLåˆ—è¡¨ï¼ˆå¿½ç•¥å‚æ•°å€¼ï¼‰
5. **spider_xxx_apis.txt** - APIæ¥å£åˆ—è¡¨
6. **spider_xxx_post_requests.txt** - POSTè¯·æ±‚åˆ—è¡¨
7. **spider_xxx_sensitive.txt** - æ•æ„Ÿä¿¡æ¯ï¼ˆæ–‡æœ¬æ ¼å¼ï¼‰
8. **spider_xxx_sensitive.json** - æ•æ„Ÿä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼‰

### 6.3 æ–°å¢è¾“å‡ºæ–‡ä»¶å»ºè®®

æ ¹æ®å‰é¢çš„åˆ†æï¼Œå»ºè®®æ–°å¢ä»¥ä¸‹è¾“å‡ºæ–‡ä»¶ï¼š

1. **spider_xxx_excluded.txt** - è¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æºçš„ç»Ÿä¸€æ–‡ä»¶
   - å¤–éƒ¨åŸŸåURL
   - é™æ€èµ„æºURL
   - é»‘åå•URL
   - ç‰¹æ®Šåè®®é“¾æ¥

2. **spider_xxx_js_files.txt** - JSæ–‡ä»¶åˆ—è¡¨

3. **spider_xxx_css_files.txt** - CSSæ–‡ä»¶åˆ—è¡¨

4. **spider_xxx_filter_report.txt** - è¿‡æ»¤æŠ¥å‘Š
   - å„ç§è¿‡æ»¤å™¨çš„ç»Ÿè®¡ä¿¡æ¯
   - è¿‡æ»¤åŸå› åˆ†ç±»

---

## ä¸ƒã€é“¾æ¥å½’æ¡£è¦æ±‚

### 7.1 å½“å‰é—®é¢˜

**ç”¨æˆ·è¦æ±‚ï¼š**
> "å¯¹äºè¶…å‡ºèŒƒå›´çš„é“¾æ¥åœ°å€åŠé™æ€æ–‡ä»¶é“¾æ¥åœ°å€ï¼Œéœ€ç»Ÿä¸€è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚"

**å½“å‰çŠ¶æ€ï¼š**
- å¤–éƒ¨é“¾æ¥è™½ç„¶è¢«æ”¶é›†åˆ°`s.externalLinks`ï¼Œä½†ä»æœªä¿å­˜åˆ°æ–‡ä»¶
- é™æ€èµ„æºè™½ç„¶å¯ä»¥è¢«åˆ†ç±»ï¼Œä½†æ²¡æœ‰ä¿å­˜é€»è¾‘
- å„ç§ç±»å‹çš„è¢«è¿‡æ»¤URLéƒ½åªæ˜¯è¢«è·³è¿‡ï¼Œæ²¡æœ‰è®°å½•

### 7.2 exclude_extensionsé…ç½®é—®é¢˜

**ç”¨æˆ·è¦æ±‚ï¼š**
> "é…ç½®æ–‡ä»¶ä¸­exclude_extensionså­—æ®µä¸­æåˆ°çš„æ–‡ä»¶åç¼€ï¼Œåœ¨çˆ¬å–æ—¶éœ€ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸¢å¼ƒã€‚"

**å½“å‰é…ç½®ï¼š**
```json
"exclude_extensions": [
    "jpg", "jpeg", "png", "gif", "svg", "ico", "webp", "bmp",
    "css", "scss", "sass",
    "woff", "woff2", "ttf", "eot", "otf",
    "mp4", "mp3", "avi", "mov", "wmv", "flv", "webm", "ogg", "wav",
    "pdf", "doc", "docx", "xls", "xlsx", "ppt", "pptx",
    "zip", "rar", "tar", "gz", "7z"
]
```

**å½“å‰å¤„ç†ï¼š**
```go
// åœ¨ scope_control.go ä¸­
func (sc *ScopeController) checkExtension(path string) bool {
    // ...
    for _, ext := range sc.config.ExcludeExtensions {
        if "."+strings.ToLower(ext) == extLower {
            return false  // ç›´æ¥è¿”å›falseï¼Œä¸è®°å½•
        }
    }
    // ...
}
```

**é—®é¢˜ï¼š** è¿™äº›æ–‡ä»¶è¢«å®Œå…¨è·³è¿‡ï¼Œæ—¢ä¸è¯·æ±‚ä¹Ÿä¸è®°å½•URLã€‚

### 7.3 è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆ1ï¼šä¿®æ”¹è¿‡æ»¤é€»è¾‘ï¼ŒåŒºåˆ†"ä¸è¯·æ±‚"å’Œ"ä¸è®°å½•"

```go
// æ–°å¢å‡½æ•°ï¼šåˆ¤æ–­æ˜¯å¦åº”è¯¥è®°å½•URLï¼ˆå³ä½¿ä¸è¯·æ±‚ï¼‰
func (sc *ScopeController) ShouldRecordURL(rawURL string) bool {
    // æ‰€æœ‰å‘ç°çš„URLéƒ½åº”è¯¥è¢«è®°å½•
    return true
}

// ä¿®æ”¹å‡½æ•°ï¼šåˆ¤æ–­æ˜¯å¦åº”è¯¥è¯·æ±‚URL
func (sc *ScopeController) ShouldRequestURL(rawURL string) (bool, string) {
    // è§£æURL
    parsedURL, err := url.Parse(rawURL)
    if err != nil {
        return false, "URLè§£æå¤±è´¥"
    }
    
    path := strings.ToLower(parsedURL.Path)
    
    // JSå’ŒCSSå§‹ç»ˆè¯·æ±‚ï¼ˆéœ€è¦åˆ†æï¼‰
    if strings.HasSuffix(path, ".js") || strings.HasSuffix(path, ".css") {
        return true, "JS/CSSéœ€è¦åˆ†æ"
    }
    
    // æ£€æŸ¥æ˜¯å¦åœ¨æ’é™¤æ‰©å±•ååˆ—è¡¨
    for _, ext := range sc.config.ExcludeExtensions {
        if strings.HasSuffix(path, "."+strings.ToLower(ext)) {
            return false, "é™æ€èµ„æºï¼š" + ext
        }
    }
    
    return true, "éœ€è¦è¯·æ±‚"
}
```

#### æ–¹æ¡ˆ2ï¼šåœ¨Spiderä¸­ç»Ÿä¸€æ”¶é›†æ‰€æœ‰URL

```go
type Spider struct {
    // ... ç°æœ‰å­—æ®µ
    
    // æ–°å¢ï¼šå®Œæ•´çš„URLåˆ†ç±»æ”¶é›†
    urlCollector *URLCollector
}

type URLCollector struct {
    // æŒ‰æ¥æºåˆ†ç±»
    FromHTML        []string  // ä»HTMLæå–
    FromJS          []string  // ä»JSæå–
    FromCSS         []string  // ä»CSSæå–
    FromHeaders     []string  // ä»HTTPå¤´æå–
    
    // æŒ‰å¤„ç†çŠ¶æ€åˆ†ç±»
    Crawled         []string  // å·²çˆ¬å–
    Recorded        []string  // ä»…è®°å½•
    Filtered        []string  // è¢«è¿‡æ»¤
    
    // æŒ‰URLç±»å‹åˆ†ç±»
    Pages           []string
    APIs            []string
    JSFiles         []string
    CSSFiles        []string
    Images          []string
    Videos          []string
    Fonts           []string
    Documents       []string
    Archives        []string
    External        []string
    Blacklisted     []string
    SpecialProtocol []string
    
    // ç»Ÿè®¡
    mu              sync.Mutex
    stats           map[string]int
}

// æ·»åŠ URLçš„ç»Ÿä¸€æ¥å£
func (uc *URLCollector) AddURL(url string, metadata URLMetadata) {
    uc.mu.Lock()
    defer uc.mu.Unlock()
    
    // åˆ†ç±»å¹¶è®°å½•
    // ...
}
```

#### æ–¹æ¡ˆ3ï¼šåˆ›å»ºç»Ÿä¸€çš„æ’é™¤æ–‡ä»¶

```go
// åœ¨ main.go ä¸­æ·»åŠ 
func saveExcludedURLs(spider *core.Spider, baseFilename string) error {
    file, err := os.Create(baseFilename + "_excluded.txt")
    if err != nil {
        return err
    }
    defer file.Close()
    
    writer := bufio.NewWriter(file)
    defer writer.Flush()
    
    // æ–‡ä»¶å¤´
    writer.WriteString("# è¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æºURLåˆ—è¡¨\n")
    writer.WriteString("# ç”Ÿæˆæ—¶é—´: " + time.Now().Format("2006-01-02 15:04:05") + "\n\n")
    
    // 1. å¤–éƒ¨åŸŸå
    externalLinks := spider.GetExternalLinks()
    if len(externalLinks) > 0 {
        writer.WriteString("## å¤–éƒ¨åŸŸåURL (" + strconv.Itoa(len(externalLinks)) + ")\n\n")
        for _, link := range externalLinks {
            writer.WriteString(link + "\n")
        }
        writer.WriteString("\n")
    }
    
    // 2. é™æ€èµ„æºï¼ˆæŒ‰ç±»å‹åˆ†ç»„ï¼‰
    staticResources := spider.GetStaticResources()
    
    if len(staticResources.Images) > 0 {
        writer.WriteString("## å›¾ç‰‡èµ„æº (" + strconv.Itoa(len(staticResources.Images)) + ")\n\n")
        for _, img := range staticResources.Images {
            writer.WriteString(img + "\n")
        }
        writer.WriteString("\n")
    }
    
    if len(staticResources.Videos) > 0 {
        writer.WriteString("## è§†é¢‘èµ„æº (" + strconv.Itoa(len(staticResources.Videos)) + ")\n\n")
        for _, video := range staticResources.Videos {
            writer.WriteString(video + "\n")
        }
        writer.WriteString("\n")
    }
    
    // ... å…¶ä»–ç±»å‹
    
    // 3. é»‘åå•URL
    blacklisted := spider.GetBlacklistedURLs()
    if len(blacklisted) > 0 {
        writer.WriteString("## é»‘åå•URL (" + strconv.Itoa(len(blacklisted)) + ")\n\n")
        for _, url := range blacklisted {
            writer.WriteString(url + "\n")
        }
        writer.WriteString("\n")
    }
    
    // 4. ç‰¹æ®Šåè®®é“¾æ¥
    specialLinks := spider.GetSpecialProtocolLinks()
    if len(specialLinks.Mailto) > 0 {
        writer.WriteString("## Mailtoé“¾æ¥ (" + strconv.Itoa(len(specialLinks.Mailto)) + ")\n\n")
        for _, link := range specialLinks.Mailto {
            writer.WriteString(link + "\n")
        }
        writer.WriteString("\n")
    }
    
    // ... å…¶ä»–ç‰¹æ®Šåè®®
    
    fmt.Printf("  - %s_excluded.txt : æ’é™¤çš„URLåˆ—è¡¨\n", baseFilename)
    return nil
}
```

---

## å…«ã€å®Œæ•´ä¼˜åŒ–æ–¹æ¡ˆ

### 8.1 ä»£ç ä¿®æ”¹æ¸…å•

#### 8.1.1 core/spider.go ä¿®æ”¹

**æ·»åŠ æ–°å­—æ®µï¼š**
```go
type Spider struct {
    // ... ç°æœ‰å­—æ®µ
    
    // æ–°å¢å­—æ®µ
    staticResources   StaticResources   // é™æ€èµ„æºåˆ†ç±»
    blacklistedURLs   []string          // é»‘åå•URL
    specialLinks      SpecialLinks      // ç‰¹æ®Šåè®®é“¾æ¥
    filteredURLs      []FilteredURL     // è¢«è¿‡æ»¤çš„URLåŠåŸå› 
}

type StaticResources struct {
    Images    []string
    Videos    []string
    Audios    []string
    Fonts     []string
    Documents []string
    Archives  []string
}

type SpecialLinks struct {
    Mailto    []string
    Tel       []string
    WebSocket []string
    FTP       []string
    Data      []string
}

type FilteredURL struct {
    URL    string
    Reason string
    Type   string
    Time   time.Time
}
```

**æ·»åŠ æ–°æ–¹æ³•ï¼š**
```go
// GetExternalLinks è·å–å¤–éƒ¨é“¾æ¥åˆ—è¡¨
func (s *Spider) GetExternalLinks() []string {
    s.mutex.Lock()
    defer s.mutex.Unlock()
    return s.externalLinks
}

// GetStaticResources è·å–é™æ€èµ„æºåˆ—è¡¨
func (s *Spider) GetStaticResources() StaticResources {
    s.mutex.Lock()
    defer s.mutex.Unlock()
    return s.staticResources
}

// GetBlacklistedURLs è·å–é»‘åå•URLåˆ—è¡¨
func (s *Spider) GetBlacklistedURLs() []string {
    s.mutex.Lock()
    defer s.mutex.Unlock()
    return s.blacklistedURLs
}

// GetSpecialProtocolLinks è·å–ç‰¹æ®Šåè®®é“¾æ¥
func (s *Spider) GetSpecialProtocolLinks() SpecialLinks {
    s.mutex.Lock()
    defer s.mutex.Unlock()
    return s.specialLinks
}

// GetFilteredURLs è·å–è¢«è¿‡æ»¤çš„URLåˆ—è¡¨
func (s *Spider) GetFilteredURLs() []FilteredURL {
    s.mutex.Lock()
    defer s.mutex.Unlock()
    return s.filteredURLs
}

// RecordURL ç»Ÿä¸€çš„URLè®°å½•æ¥å£
func (s *Spider) RecordURL(url string, urlType string, shouldRequest bool, reason string) {
    s.mutex.Lock()
    defer s.mutex.Unlock()
    
    if !shouldRequest {
        s.filteredURLs = append(s.filteredURLs, FilteredURL{
            URL:    url,
            Type:   urlType,
            Reason: reason,
            Time:   time.Now(),
        })
    }
    
    // æ ¹æ®ç±»å‹åˆ†ç±»å­˜å‚¨
    switch urlType {
    case "external":
        s.externalLinks = append(s.externalLinks, url)
    case "image":
        s.staticResources.Images = append(s.staticResources.Images, url)
    case "video":
        s.staticResources.Videos = append(s.staticResources.Videos, url)
    // ... å…¶ä»–ç±»å‹
    }
}
```

#### 8.1.2 core/static_crawler.go ä¿®æ”¹

**ä¿®æ”¹é“¾æ¥æå–é€»è¾‘ï¼š**
```go
// åœ¨ OnHTML å›è°ƒä¸­
collector.OnHTML("a[href]", func(e *colly.HTMLElement) {
    link := e.Attr("href")
    absoluteURL := e.Request.AbsoluteURL(link)
    
    // æ£€æŸ¥ç‰¹æ®Šåè®®
    if strings.HasPrefix(link, "mailto:") {
        // è®°å½•é‚®ç®±é“¾æ¥
        s.recordSpecialLink(absoluteURL, "mailto")
        return
    }
    if strings.HasPrefix(link, "tel:") {
        s.recordSpecialLink(absoluteURL, "tel")
        return
    }
    
    // åˆ†ç±»URL
    resourceType, shouldRequest := s.resourceClassifier.ClassifyURL(absoluteURL)
    
    // è®°å½•URLï¼ˆæ— è®ºæ˜¯å¦è¯·æ±‚ï¼‰
    // ... è®°å½•é€»è¾‘
    
    if shouldRequest {
        result.Links = append(result.Links, absoluteURL)
    } else {
        result.Assets = append(result.Assets, absoluteURL)
    }
})

// æ·»åŠ å›¾ç‰‡ã€CSSã€JSç­‰èµ„æºçš„æå–
collector.OnHTML("img[src]", func(e *colly.HTMLElement) {
    src := e.Attr("src")
    absoluteURL := e.Request.AbsoluteURL(src)
    // è®°å½•å›¾ç‰‡URL
    result.Assets = append(result.Assets, absoluteURL)
})

collector.OnHTML("link[rel='stylesheet']", func(e *colly.HTMLElement) {
    href := e.Attr("href")
    absoluteURL := e.Request.AbsoluteURL(href)
    // CSSæ–‡ä»¶éœ€è¦ä¸‹è½½åˆ†æ
    result.Links = append(result.Links, absoluteURL)
})
```

#### 8.1.3 core/scope_control.go ä¿®æ”¹

**æ–°å¢æ–¹æ³•ï¼š**
```go
// ShouldRequestURL åˆ¤æ–­URLæ˜¯å¦åº”è¯¥è¢«è¯·æ±‚
// è¿”å›ï¼š(æ˜¯å¦è¯·æ±‚, åŸå› )
func (sc *ScopeController) ShouldRequestURL(rawURL string) (bool, string) {
    // è§£æURL
    parsedURL, err := url.Parse(rawURL)
    if err != nil {
        return false, "URLè§£æå¤±è´¥"
    }
    
    path := strings.ToLower(parsedURL.Path)
    
    // JSå’ŒCSSæ–‡ä»¶å§‹ç»ˆè¯·æ±‚ï¼ˆéœ€è¦åˆ†æï¼‰
    if strings.HasSuffix(path, ".js") || 
       strings.HasSuffix(path, ".mjs") ||
       strings.HasSuffix(path, ".jsx") ||
       strings.HasSuffix(path, ".css") ||
       strings.HasSuffix(path, ".scss") {
        return true, "JS/CSSéœ€è¦åˆ†æ"
    }
    
    // æ£€æŸ¥æ‰©å±•å
    ext := filepath.Ext(path)
    if ext != "" {
        ext = ext[1:] // ç§»é™¤ç‚¹å·
        for _, excludeExt := range sc.config.ExcludeExtensions {
            if strings.EqualFold(ext, excludeExt) {
                // åŒ¹é…æ’é™¤æ‰©å±•åï¼Œä¸è¯·æ±‚ä½†è¦è®°å½•
                return false, "é™æ€èµ„æºï¼š" + ext
            }
        }
    }
    
    // æ£€æŸ¥æ˜¯å¦åœ¨ä½œç”¨åŸŸå†…
    if !sc.IsInScope(rawURL) {
        return false, "è¶…å‡ºä½œç”¨åŸŸ"
    }
    
    return true, "éœ€è¦è¯·æ±‚"
}
```

#### 8.1.4 cmd/spider/main.go ä¿®æ”¹

**åˆ é™¤ä¸‰ä¸ªæ–‡ä»¶çš„ä¿å­˜ä»£ç ï¼š**
```go
// åˆ é™¤ä»¥ä¸‹ä»£ç å—ï¼š

// 1. åˆ é™¤ _params.txt
/* åˆ é™¤ç¬¬852-856è¡Œ
if len(paramURLs) > 0 {
    if err := writeURLsToFile(paramURLs, baseFilename+"_params.txt"); err != nil {
        log.Printf("è­¦å‘Š: ä¿å­˜å‚æ•°URLå¤±è´¥: %v", err)
    }
}
*/

// 2. åˆ é™¤ _forms.txt
/* åˆ é™¤ç¬¬866-870è¡Œ
if len(formURLs) > 0 {
    if err := writeURLsToFile(formURLs, baseFilename+"_forms.txt"); err != nil {
        log.Printf("è­¦å‘Š: ä¿å­˜è¡¨å•URLå¤±è´¥: %v", err)
    }
}
*/

// 3. åˆ é™¤ _structure_unique_urls.txt
/* åˆ é™¤ç¬¬583-591è¡Œ
spider.CollectAllURLsForStructureDedup()
structureUniqueFile := baseFilename + "_structure_unique_urls.txt"
if err := spider.SaveStructureUniqueURLsToFile(structureUniqueFile); err != nil {
    log.Printf("ä¿å­˜ç»“æ„åŒ–å»é‡URLå¤±è´¥: %v", err)
}
*/
```

**æ·»åŠ æ–°çš„ä¿å­˜å‡½æ•°ï¼š**
```go
// saveExcludedURLs ä¿å­˜è¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æºURL
func saveExcludedURLs(spider *core.Spider, baseFilename string) error {
    file, err := os.Create(baseFilename + "_excluded.txt")
    if err != nil {
        return err
    }
    defer file.Close()
    
    writer := bufio.NewWriter(file)
    defer writer.Flush()
    
    totalCount := 0
    
    // æ–‡ä»¶å¤´
    writer.WriteString("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n")
    writer.WriteString("  GogoSpider - æ’é™¤çš„URLåˆ—è¡¨\n")
    writer.WriteString("  ç”Ÿæˆæ—¶é—´: " + time.Now().Format("2006-01-02 15:04:05") + "\n")
    writer.WriteString("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n")
    
    // 1. å¤–éƒ¨åŸŸåURL
    externalLinks := spider.GetExternalLinks()
    if len(externalLinks) > 0 {
        writer.WriteString(fmt.Sprintf("ã€å¤–éƒ¨åŸŸåURLã€‘ å…± %d ä¸ª\n", len(externalLinks)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, link := range externalLinks {
            writer.WriteString(link + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(externalLinks)
    }
    
    // 2. é™æ€èµ„æº
    staticResources := spider.GetStaticResources()
    
    if len(staticResources.Images) > 0 {
        writer.WriteString(fmt.Sprintf("ã€å›¾ç‰‡èµ„æºã€‘ å…± %d ä¸ª\n", len(staticResources.Images)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, img := range staticResources.Images {
            writer.WriteString(img + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(staticResources.Images)
    }
    
    if len(staticResources.Videos) > 0 {
        writer.WriteString(fmt.Sprintf("ã€è§†é¢‘èµ„æºã€‘ å…± %d ä¸ª\n", len(staticResources.Videos)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, video := range staticResources.Videos {
            writer.WriteString(video + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(staticResources.Videos)
    }
    
    if len(staticResources.Audios) > 0 {
        writer.WriteString(fmt.Sprintf("ã€éŸ³é¢‘èµ„æºã€‘ å…± %d ä¸ª\n", len(staticResources.Audios)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, audio := range staticResources.Audios {
            writer.WriteString(audio + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(staticResources.Audios)
    }
    
    if len(staticResources.Fonts) > 0 {
        writer.WriteString(fmt.Sprintf("ã€å­—ä½“èµ„æºã€‘ å…± %d ä¸ª\n", len(staticResources.Fonts)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, font := range staticResources.Fonts {
            writer.WriteString(font + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(staticResources.Fonts)
    }
    
    if len(staticResources.Documents) > 0 {
        writer.WriteString(fmt.Sprintf("ã€æ–‡æ¡£èµ„æºã€‘ å…± %d ä¸ª\n", len(staticResources.Documents)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, doc := range staticResources.Documents {
            writer.WriteString(doc + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(staticResources.Documents)
    }
    
    if len(staticResources.Archives) > 0 {
        writer.WriteString(fmt.Sprintf("ã€å‹ç¼©åŒ…èµ„æºã€‘ å…± %d ä¸ª\n", len(staticResources.Archives)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, archive := range staticResources.Archives {
            writer.WriteString(archive + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(staticResources.Archives)
    }
    
    // 3. é»‘åå•URL
    blacklistedURLs := spider.GetBlacklistedURLs()
    if len(blacklistedURLs) > 0 {
        writer.WriteString(fmt.Sprintf("ã€é»‘åå•URLã€‘ å…± %d ä¸ª\n", len(blacklistedURLs)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, url := range blacklistedURLs {
            writer.WriteString(url + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(blacklistedURLs)
    }
    
    // 4. ç‰¹æ®Šåè®®é“¾æ¥
    specialLinks := spider.GetSpecialProtocolLinks()
    
    if len(specialLinks.Mailto) > 0 {
        writer.WriteString(fmt.Sprintf("ã€Mailtoé“¾æ¥ã€‘ å…± %d ä¸ª\n", len(specialLinks.Mailto)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, link := range specialLinks.Mailto {
            writer.WriteString(link + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(specialLinks.Mailto)
    }
    
    if len(specialLinks.Tel) > 0 {
        writer.WriteString(fmt.Sprintf("ã€ç”µè¯é“¾æ¥ã€‘ å…± %d ä¸ª\n", len(specialLinks.Tel)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, link := range specialLinks.Tel {
            writer.WriteString(link + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(specialLinks.Tel)
    }
    
    if len(specialLinks.WebSocket) > 0 {
        writer.WriteString(fmt.Sprintf("ã€WebSocketé“¾æ¥ã€‘ å…± %d ä¸ª\n", len(specialLinks.WebSocket)))
        writer.WriteString(strings.Repeat("-", 55) + "\n")
        for _, link := range specialLinks.WebSocket {
            writer.WriteString(link + "\n")
        }
        writer.WriteString("\n\n")
        totalCount += len(specialLinks.WebSocket)
    }
    
    // æ€»è®¡
    writer.WriteString(strings.Repeat("â•", 55) + "\n")
    writer.WriteString(fmt.Sprintf("æ€»è®¡ï¼š%d ä¸ªæ’é™¤çš„URL\n", totalCount))
    writer.WriteString(strings.Repeat("â•", 55) + "\n")
    
    fmt.Printf("  - %s_excluded.txt : %d ä¸ªæ’é™¤çš„URL\n", baseFilename, totalCount)
    return nil
}

// saveJSAndCSSFiles ä¿å­˜JSå’ŒCSSæ–‡ä»¶åˆ—è¡¨
func saveJSAndCSSFiles(results []*core.Result, baseFilename string) error {
    jsFiles := make(map[string]bool)
    cssFiles := make(map[string]bool)
    
    for _, result := range results {
        for _, link := range result.Links {
            lowerLink := strings.ToLower(link)
            if strings.HasSuffix(lowerLink, ".js") || 
               strings.HasSuffix(lowerLink, ".mjs") ||
               strings.HasSuffix(lowerLink, ".jsx") {
                jsFiles[link] = true
            } else if strings.HasSuffix(lowerLink, ".css") ||
                      strings.HasSuffix(lowerLink, ".scss") ||
                      strings.HasSuffix(lowerLink, ".sass") {
                cssFiles[link] = true
            }
        }
    }
    
    // ä¿å­˜JSæ–‡ä»¶
    if len(jsFiles) > 0 {
        if err := writeURLsToFile(jsFiles, baseFilename+"_js_files.txt"); err != nil {
            log.Printf("è­¦å‘Š: ä¿å­˜JSæ–‡ä»¶åˆ—è¡¨å¤±è´¥: %v", err)
        } else {
            fmt.Printf("  - %s_js_files.txt : %d ä¸ªJSæ–‡ä»¶\n", baseFilename, len(jsFiles))
        }
    }
    
    // ä¿å­˜CSSæ–‡ä»¶
    if len(cssFiles) > 0 {
        if err := writeURLsToFile(cssFiles, baseFilename+"_css_files.txt"); err != nil {
            log.Printf("è­¦å‘Š: ä¿å­˜CSSæ–‡ä»¶åˆ—è¡¨å¤±è´¥: %v", err)
        } else {
            fmt.Printf("  - %s_css_files.txt : %d ä¸ªCSSæ–‡ä»¶\n", baseFilename, len(cssFiles))
        }
    }
    
    return nil
}
```

**ä¿®æ”¹mainå‡½æ•°ï¼Œè°ƒç”¨æ–°çš„ä¿å­˜å‡½æ•°ï¼š**
```go
func main() {
    // ... ç°æœ‰ä»£ç 
    
    // ä¿å­˜ç»“æœ
    if err := saveResults(results, baseFilename+".txt"); err != nil {
        log.Printf("ä¿å­˜ç»“æœå¤±è´¥: %v", err)
    }
    
    // ä¿å­˜URLåˆ—è¡¨
    if err := saveURLs(results, baseFilename+"_urls.txt"); err != nil {
        log.Printf("ä¿å­˜URLåˆ—è¡¨å¤±è´¥: %v", err)
    }
    
    // ä¿å­˜æ‰€æœ‰ç±»å‹çš„URLï¼ˆå·²åˆ é™¤paramså’Œformsï¼‰
    if err := saveAllURLs(results, baseFilename); err != nil {
        log.Printf("ä¿å­˜åˆ†ç±»URLå¤±è´¥: %v", err)
    }
    
    // ä¿å­˜å»é‡åçš„URL
    uniqueURLFile := baseFilename + "_unique_urls.txt"
    if err := spider.SaveUniqueURLsToFile(uniqueURLFile); err != nil {
        log.Printf("ä¿å­˜å»é‡URLå¤±è´¥: %v", err)
    }
    
    // âŒ åˆ é™¤ï¼šä¿å­˜ç»“æ„åŒ–å»é‡URLçš„ä»£ç 
    // spider.CollectAllURLsForStructureDedup()
    // structureUniqueFile := baseFilename + "_structure_unique_urls.txt"
    // if err := spider.SaveStructureUniqueURLsToFile(structureUniqueFile); err != nil { ... }
    
    // ğŸ†• æ–°å¢ï¼šä¿å­˜æ’é™¤çš„URLï¼ˆè¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æºï¼‰
    if err := saveExcludedURLs(spider, baseFilename); err != nil {
        log.Printf("ä¿å­˜æ’é™¤çš„URLå¤±è´¥: %v", err)
    }
    
    // ğŸ†• æ–°å¢ï¼šä¿å­˜JSå’ŒCSSæ–‡ä»¶åˆ—è¡¨
    if err := saveJSAndCSSFiles(results, baseFilename); err != nil {
        log.Printf("ä¿å­˜JS/CSSæ–‡ä»¶åˆ—è¡¨å¤±è´¥: %v", err)
    }
    
    // ä¿å­˜æ•æ„Ÿä¿¡æ¯
    if enableSensitiveDetection {
        sensitiveFile := baseFilename + "_sensitive.txt"
        if err := spider.SaveSensitiveInfoToFile(sensitiveFile); err != nil {
            log.Printf("ä¿å­˜æ•æ„Ÿä¿¡æ¯å¤±è´¥: %v", err)
        }
        
        sensitiveJSONFile := baseFilename + "_sensitive.json"
        if err := spider.SaveSensitiveInfoToJSON(sensitiveJSONFile); err != nil {
            log.Printf("ä¿å­˜æ•æ„Ÿä¿¡æ¯JSONå¤±è´¥: %v", err)
        }
    }
    
    // ... ç°æœ‰ä»£ç 
}
```

### 8.2 é…ç½®æ–‡ä»¶ä¿®æ”¹

**config.json æ·»åŠ æ³¨é‡Šè¯´æ˜ï¼š**
```json
{
    "scope_settings": {
        "_comment_exclude_important": "ã€âœ… é‡è¦ã€‘é™æ€èµ„æºå¤„ç†è¯´æ˜",
        "_exclude_note_1": "âœ… JS/CSSæ–‡ä»¶ä¼šè¢«ä¸‹è½½å’Œåˆ†æï¼ˆä»æ’é™¤åˆ—è¡¨ç§»é™¤ï¼‰",
        "_exclude_note_2": "âœ… å…¶ä»–é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰åªè®°å½•URLä¸è¯·æ±‚",
        "_exclude_note_3": "âœ… æ‰€æœ‰è¢«æ’é™¤çš„URLéƒ½ä¼šä¿å­˜åˆ° *_excluded.txt æ–‡ä»¶",
        "_exclude_note_4": "âœ… å¤–éƒ¨åŸŸåå’Œé»‘åå•URLä¹Ÿä¼šä¿å­˜åˆ° *_excluded.txt",
        "exclude_extensions": [
            "jpg", "jpeg", "png", "gif", "svg", "ico", "webp", "bmp",
            "css", "scss", "sass",
            "woff", "woff2", "ttf", "eot", "otf",
            "mp4", "mp3", "avi", "mov", "wmv", "flv", "webm", "ogg", "wav",
            "pdf", "doc", "docx", "xls", "xlsx", "ppt", "pptx",
            "zip", "rar", "tar", "gz", "7z"
        ]
    }
}
```

### 8.3 æµ‹è¯•è®¡åˆ’

#### æµ‹è¯•ç”¨ä¾‹1ï¼šå¤–éƒ¨é“¾æ¥è®°å½•
**æµ‹è¯•ç½‘é¡µï¼š**
```html
<html>
<body>
    <a href="http://example.com/page1">å†…éƒ¨é“¾æ¥</a>
    <a href="http://external.com/page">å¤–éƒ¨é“¾æ¥</a>
    <a href="http://cdn.external.com/static.js">å¤–éƒ¨JS</a>
</body>
</html>
```

**é¢„æœŸç»“æœï¼š**
- `example.com`çš„é“¾æ¥åœ¨`_all_urls.txt`ä¸­
- `external.com`å’Œ`cdn.external.com`çš„é“¾æ¥åœ¨`_excluded.txt`çš„ã€å¤–éƒ¨åŸŸåURLã€‘éƒ¨åˆ†

#### æµ‹è¯•ç”¨ä¾‹2ï¼šé™æ€èµ„æºè®°å½•
**æµ‹è¯•ç½‘é¡µï¼š**
```html
<html>
<head>
    <link rel="stylesheet" href="/styles/main.css">
    <script src="/js/app.js"></script>
</head>
<body>
    <img src="/images/logo.png">
    <video src="/videos/demo.mp4"></video>
    <a href="/docs/manual.pdf">PDFæ–‡æ¡£</a>
</body>
</html>
```

**é¢„æœŸç»“æœï¼š**
- `main.css` åœ¨ `_css_files.txt` ä¸­ï¼ˆè¢«ä¸‹è½½åˆ†æï¼‰
- `app.js` åœ¨ `_js_files.txt` ä¸­ï¼ˆè¢«ä¸‹è½½åˆ†æï¼‰
- `logo.png` åœ¨ `_excluded.txt` çš„ã€å›¾ç‰‡èµ„æºã€‘éƒ¨åˆ†
- `demo.mp4` åœ¨ `_excluded.txt` çš„ã€è§†é¢‘èµ„æºã€‘éƒ¨åˆ†
- `manual.pdf` åœ¨ `_excluded.txt` çš„ã€æ–‡æ¡£èµ„æºã€‘éƒ¨åˆ†

#### æµ‹è¯•ç”¨ä¾‹3ï¼šç‰¹æ®Šåè®®é“¾æ¥
**æµ‹è¯•ç½‘é¡µï¼š**
```html
<html>
<body>
    <a href="mailto:admin@example.com">è”ç³»æˆ‘ä»¬</a>
    <a href="tel:+8613800138000">ç”µè¯</a>
    <a href="javascript:void(0)">æ— æ•ˆé“¾æ¥</a>
</body>
</html>
```

**é¢„æœŸç»“æœï¼š**
- `mailto:` é“¾æ¥åœ¨ `_excluded.txt` çš„ã€Mailtoé“¾æ¥ã€‘éƒ¨åˆ†
- `tel:` é“¾æ¥åœ¨ `_excluded.txt` çš„ã€ç”µè¯é“¾æ¥ã€‘éƒ¨åˆ†
- `javascript:void(0)` è¢«è¿‡æ»¤ï¼ˆä¸è®°å½•ï¼‰

#### æµ‹è¯•ç”¨ä¾‹4ï¼šé»‘åå•åŸŸå
**é…ç½®ï¼š**
```json
"blacklist_settings": {
    "enabled": true,
    "domains": ["*.gov.cn"]
}
```

**æµ‹è¯•ç½‘é¡µï¼š**
```html
<a href="http://www.gov.cn/">æ”¿åºœç½‘ç«™</a>
```

**é¢„æœŸç»“æœï¼š**
- é“¾æ¥åœ¨ `_excluded.txt` çš„ã€é»‘åå•URLã€‘éƒ¨åˆ†

### 8.4 æ–‡æ¡£æ›´æ–°

éœ€è¦æ›´æ–°ä»¥ä¸‹æ–‡æ¡£ï¼š

1. **README.md**
   - è¯´æ˜æ–°çš„è¾“å‡ºæ–‡ä»¶æ ¼å¼
   - è§£é‡Š`_excluded.txt`çš„å†…å®¹

2. **CONFIG_GUIDE.md**
   - æ›´æ–°`exclude_extensions`çš„è¯´æ˜
   - å¼ºè°ƒJS/CSSä¼šè¢«åˆ†æ

3. **CHANGELOG.md**
   - è®°å½•æœ¬æ¬¡ä¼˜åŒ–çš„æ‰€æœ‰å˜æ›´

---

## ä¹ã€æ€»ç»“

### 9.1 å‘ç°çš„ä¸»è¦é—®é¢˜

1. âœ… **è¶…å‡ºèŒƒå›´é“¾æ¥è®°å½•ä¸å®Œæ•´**
   - é¦–æ¬¡çˆ¬å–çš„å¤–éƒ¨é“¾æ¥æœªè®°å½•
   - æ²¡æœ‰ä¿å­˜å¤–éƒ¨é“¾æ¥çš„å‡½æ•°
   
2. âœ… **é™æ€èµ„æºé“¾æ¥è®°å½•ç¼ºå¤±**
   - `Result.Assets`å­—æ®µæœªä½¿ç”¨
   - `exclude_extensions`ä¸­çš„æ–‡ä»¶è¢«ç›´æ¥ä¸¢å¼ƒ
   - `ResourceClassifier`çš„åˆ†ç±»ç»“æœæœªä¿å­˜
   
3. âœ… **JSæ–‡ä»¶å¤„ç†åŸºæœ¬æ­£å¸¸**
   - éœ€è¦æ·»åŠ å•ç‹¬çš„JSæ–‡ä»¶åˆ—è¡¨è¾“å‡º
   
4. âœ… **å…¶ä»–é“¾æ¥ç±»å‹æœªè®°å½•**
   - é»‘åå•URL
   - ç‰¹æ®Šåè®®é“¾æ¥ï¼ˆmailtoã€telç­‰ï¼‰
   - è¢«å„ç§è¿‡æ»¤å™¨è¿‡æ»¤çš„URL
   
5. âœ… **è¾“å‡ºæ–‡ä»¶å†—ä½™**
   - `_params.txt`ã€`_forms.txt`ã€`_structure_unique_urls.txt`éœ€è¦åˆ é™¤

### 9.2 ä¼˜åŒ–æ•ˆæœé¢„æœŸ

**å®æ–½å‰ï¼š**
- åªèƒ½çœ‹åˆ°è¢«çˆ¬å–çš„URL
- å¤§é‡URLä¸¢å¤±ï¼ˆå¤–éƒ¨é“¾æ¥ã€é™æ€èµ„æºç­‰ï¼‰
- ä¸çŸ¥é“å“ªäº›URLè¢«è¿‡æ»¤äº†
- è¾“å‡ºæ–‡ä»¶è¿‡å¤šä¸”æœ‰é‡å¤

**å®æ–½åï¼š**
- âœ… æ‰€æœ‰å‘ç°çš„URLéƒ½è¢«è®°å½•
- âœ… æŒ‰ç±»å‹åˆ†ç±»æ¸…æ™°
- âœ… è¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æºç»Ÿä¸€åœ¨`_excluded.txt`
- âœ… è¾“å‡ºæ–‡ä»¶ç²¾ç®€ä¸”å®ç”¨
- âœ… ç”¨æˆ·å¯ä»¥å®Œæ•´äº†è§£çˆ¬è™«çš„è¡Œä¸º

### 9.3 æ–‡ä»¶è¾“å‡ºå¯¹æ¯”

**ä¼˜åŒ–å‰ï¼š**
```
spider_example.com_20251026_143000.txt
spider_example.com_20251026_143000_urls.txt
spider_example.com_20251026_143000_all_urls.txt
spider_example.com_20251026_143000_params.txt              âŒ å†—ä½™
spider_example.com_20251026_143000_forms.txt               âŒ å†—ä½™
spider_example.com_20251026_143000_apis.txt
spider_example.com_20251026_143000_unique_urls.txt
spider_example.com_20251026_143000_structure_unique_urls.txt  âŒ å†—ä½™
spider_example.com_20251026_143000_post_requests.txt
spider_example.com_20251026_143000_sensitive.txt
spider_example.com_20251026_143000_sensitive.json
```

**ä¼˜åŒ–åï¼š**
```
spider_example.com_20251026_143000.txt
spider_example.com_20251026_143000_urls.txt
spider_example.com_20251026_143000_all_urls.txt
spider_example.com_20251026_143000_apis.txt
spider_example.com_20251026_143000_unique_urls.txt
spider_example.com_20251026_143000_post_requests.txt
spider_example.com_20251026_143000_sensitive.txt
spider_example.com_20251026_143000_sensitive.json
spider_example.com_20251026_143000_excluded.txt            âœ¨ æ–°å¢
spider_example.com_20251026_143000_js_files.txt            âœ¨ æ–°å¢
spider_example.com_20251026_143000_css_files.txt           âœ¨ æ–°å¢
```

### 9.4 å®æ–½ä¼˜å…ˆçº§

**P0ï¼ˆå¿…é¡»å®æ–½ï¼‰ï¼š**
1. æ·»åŠ `_excluded.txt`è¾“å‡º
2. ä¿®æ”¹é™æ€èµ„æºè®°å½•é€»è¾‘
3. åˆ é™¤ä¸‰ä¸ªå†—ä½™æ–‡ä»¶
4. ä¿®æ”¹`exclude_extensions`å¤„ç†é€»è¾‘

**P1ï¼ˆå»ºè®®å®æ–½ï¼‰ï¼š**
1. æ·»åŠ `_js_files.txt`å’Œ`_css_files.txt`è¾“å‡º
2. å®Œå–„å¤–éƒ¨é“¾æ¥è®°å½•
3. æ·»åŠ é»‘åå•URLè®°å½•

**P2ï¼ˆå¯é€‰å®æ–½ï¼‰ï¼š**
1. æ·»åŠ è¯¦ç»†çš„è¿‡æ»¤æŠ¥å‘Š
2. æ·»åŠ ç»Ÿè®¡ä»ªè¡¨æ¿
3. æ”¯æŒJSONæ ¼å¼çš„åˆ†ç±»è¾“å‡º

---

## åã€é™„å½•

### 10.1 ç›¸å…³ä»£ç æ–‡ä»¶æ¸…å•

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼š**
- `core/spider.go` - ä¸»çˆ¬è™«åè°ƒå™¨
- `core/static_crawler.go` - é™æ€çˆ¬è™«
- `core/scope_control.go` - ä½œç”¨åŸŸæ§åˆ¶
- `core/resource_classifier.go` - èµ„æºåˆ†ç±»å™¨
- `cmd/spider/main.go` - ä¸»ç¨‹åºå’Œè¾“å‡ºé€»è¾‘

**å‚è€ƒæ–‡æ¡£ï¼š**
- `config.json` - é…ç½®æ–‡ä»¶
- `README.md` - é¡¹ç›®è¯´æ˜
- `CONFIG_GUIDE.md` - é…ç½®æŒ‡å—

### 10.2 å…³é”®æ•°æ®ç»“æ„

```go
// Result ç»“æ„ï¼ˆéœ€è¦å¢å¼ºï¼‰
type Result struct {
    URL          string
    Links        []string      // éœ€è¦çˆ¬å–çš„é“¾æ¥
    Assets       []string      // é™æ€èµ„æºï¼ˆéœ€è¦å……åˆ†åˆ©ç”¨ï¼‰
    Forms        []Form
    APIs         []string
    POSTRequests []POSTRequest
    StatusCode   int
    ContentType  string
    HTMLContent  string
    Headers      map[string]string
    IsSimilar    bool
    SimilarToURL string
}

// Spider ç»“æ„ï¼ˆéœ€è¦æ–°å¢å­—æ®µï¼‰
type Spider struct {
    // ç°æœ‰å­—æ®µ...
    
    // æ–°å¢å­—æ®µ
    staticResources  StaticResources
    blacklistedURLs  []string
    specialLinks     SpecialLinks
    filteredURLs     []FilteredURL
}
```

### 10.3 é…ç½®ç¤ºä¾‹

**æ¨èé…ç½®ï¼ˆç”¨äºæµ‹è¯•ï¼‰ï¼š**
```json
{
    "target_url": "http://example.com",
    "depth_settings": {
        "max_depth": 3
    },
    "scope_settings": {
        "enabled": true,
        "stay_in_domain": true,
        "allow_subdomains": false,
        "exclude_extensions": [
            "jpg", "jpeg", "png", "gif", "svg", "ico", "webp", "bmp",
            "mp4", "mp3", "avi", "mov",
            "woff", "woff2", "ttf", "eot", "otf",
            "pdf", "doc", "docx", "xls", "xlsx",
            "zip", "rar", "tar", "gz", "7z"
        ]
    },
    "blacklist_settings": {
        "enabled": true,
        "domains": ["*.gov.cn", "*.edu.cn"],
        "strict_mode": true
    }
}
```

---

## ç»“è®º

æœ¬æŠ¥å‘Šå…¨é¢åˆ†æäº†GogoSpiderçˆ¬è™«å·¥å…·çš„ä»£ç å’Œé…ç½®æ–‡ä»¶ï¼Œå‘ç°äº†ä»¥ä¸‹ä¸»è¦é—®é¢˜ï¼š

1. **è¶…å‡ºèŒƒå›´çš„é“¾æ¥è®°å½•ä¸å®Œæ•´**ï¼Œé¦–æ¬¡çˆ¬å–çš„å¤–éƒ¨é“¾æ¥å’Œéƒ¨åˆ†é€’å½’çˆ¬å–ä¸­çš„å¤–éƒ¨é“¾æ¥æœªè¢«è®°å½•
2. **é™æ€èµ„æºé“¾æ¥å®Œå…¨ç¼ºå¤±**ï¼Œé…ç½®æ–‡ä»¶ä¸­`exclude_extensions`çš„æ–‡ä»¶è¢«ç›´æ¥ä¸¢å¼ƒè€Œä¸æ˜¯ä¿å­˜
3. **JSæ–‡ä»¶å¤„ç†åŸºæœ¬æ­£å¸¸**ï¼Œä½†å»ºè®®æ·»åŠ å•ç‹¬çš„JSæ–‡ä»¶åˆ—è¡¨è¾“å‡º
4. **å¤šç§é“¾æ¥ç±»å‹æœªè¢«è®°å½•**ï¼ŒåŒ…æ‹¬é»‘åå•URLã€ç‰¹æ®Šåè®®é“¾æ¥ã€è¢«è¿‡æ»¤çš„URLç­‰
5. **è¾“å‡ºæ–‡ä»¶å­˜åœ¨å†—ä½™**ï¼Œä¸‰ä¸ªæ–‡ä»¶éœ€è¦åˆ é™¤

æœ¬æŠ¥å‘Šæä¾›äº†è¯¦ç»†çš„ä¼˜åŒ–æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä»£ç ä¿®æ”¹ã€é…ç½®æ›´æ–°ã€æµ‹è¯•è®¡åˆ’ç­‰ï¼Œå®æ–½åå°†æ˜¾è‘—æå‡çˆ¬è™«å·¥å…·çš„å®Œæ•´æ€§å’Œå®ç”¨æ€§ã€‚

**å»ºè®®ç«‹å³å¼€å§‹å®æ–½P0çº§åˆ«çš„ä¼˜åŒ–ï¼Œä»¥ç¡®ä¿çˆ¬è™«å·¥å…·èƒ½å¤Ÿå®Œæ•´ã€å‡†ç¡®åœ°è®°å½•å’Œçˆ¬å–æ‰€æœ‰éœ€è¦çš„é“¾æ¥åœ°å€å’Œèµ„æºã€‚**

