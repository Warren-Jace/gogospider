# gogospider v2.8 ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ–°åŠŸèƒ½å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘

```bash
# ä¿®å¤Goç¯å¢ƒï¼ˆå¦‚æœéœ€è¦ï¼‰
# è®¾ç½®æ­£ç¡®çš„GOROOTå’ŒGOPATH

# ç¼–è¯‘v2.8ç‰ˆæœ¬
go build -o spider_v2.8.exe ./cmd/spider
```

---

## ğŸ“ æ–°åŠŸèƒ½æ¼”ç¤º

### 1. Base64 URLè§£ç 

**æµ‹è¯•HTML**ï¼šåˆ›å»º`test_base64.html`

```html
<!DOCTYPE html>
<html>
<head>
    <title>Base64 URL Test</title>
</head>
<body>
    <h1>Base64 Encoded URLs</h1>
    
    <script>
        // Base64ç¼–ç çš„URL: https://api.example.com/secret/endpoint
        const encodedURL1 = atob('aHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vc2VjcmV0L2VuZHBvaW50');
        console.log('Decoded URL:', encodedURL1);
        
        // Base64ç¼–ç çš„è·¯å¾„: /internal/admin/panel
        const encodedPath = atob('L2ludGVybmFsL2FkbWluL3BhbmVs');
        console.log('Decoded Path:', encodedPath);
        
        // å®é™…ä½¿ç”¨
        fetch(atob('aHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vdjEvdXNlcnM='))
            .then(r => r.json())
            .then(d => console.log(d));
    </script>
</body>
</html>
```

**è¿è¡Œ**ï¼š
```bash
./spider_v2.8.exe -u http://localhost/test_base64.html -d 1 -o result_base64.json
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[JSåˆ†æ] ä»Base64æå–äº† 3ä¸ªURL
  - https://api.example.com/secret/endpoint
  - /internal/admin/panel  
  - https://api.example.com/v1/users
```

---

### 2. CSS URLæå–

**æµ‹è¯•HTML**ï¼šåˆ›å»º`test_css.html`

```html
<!DOCTYPE html>
<html>
<head>
    <title>CSS URL Test</title>
    <link rel="stylesheet" href="/css/main.css">
    <style>
        @import url('https://fonts.example.com/roboto.css');
        
        .header {
            background: url('/images/header-bg.jpg');
        }
        
        .logo {
            background-image: url("https://cdn.example.com/logo.png");
        }
        
        @font-face {
            font-family: 'MyFont';
            src: url('/fonts/myfont.woff2') format('woff2'),
                 url('/fonts/myfont.woff') format('woff');
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">Logo</div>
    </div>
</body>
</html>
```

**åˆ›å»º`/css/main.css`**ï¼š
```css
@import url('/css/base.css');

body {
    background: url('/images/body-bg.png');
}

.button {
    background-image: image-set(
        url('/img/button-1x.png') 1x,
        url('/img/button-2x.png') 2x
    );
}
```

**è¿è¡Œ**ï¼š
```bash
./spider_v2.8.exe -u http://localhost/test_css.html -d 1 -o result_css.json
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[CSSåˆ†æ] ä»CSSæ–‡ä»¶æå–äº† 8ä¸ªURL
  - @import: https://fonts.example.com/roboto.css
  - @import: /css/base.css
  - background: /images/header-bg.jpg
  - background: https://cdn.example.com/logo.png
  - background: /images/body-bg.png
  - @font-face: /fonts/myfont.woff2
  - @font-face: /fonts/myfont.woff
  - image-set: /img/button-1x.png, /img/button-2x.png
```

---

### 3. srcset å“åº”å¼å›¾ç‰‡

**æµ‹è¯•HTML**ï¼šåˆ›å»º`test_srcset.html`

```html
<!DOCTYPE html>
<html>
<head>
    <title>srcset Test</title>
</head>
<body>
    <h1>Responsive Images</h1>
    
    <!-- åŸºäºå®½åº¦çš„srcset -->
    <img src="/img/default.jpg" 
         srcset="/img/small.jpg 320w,
                 /img/medium.jpg 640w,
                 /img/large.jpg 1024w"
         alt="Responsive width">
    
    <!-- åŸºäºåƒç´ å¯†åº¦çš„srcset -->
    <img src="/img/logo.png"
         srcset="/img/logo-1x.png 1x,
                 /img/logo-2x.png 2x,
                 /img/logo-3x.png 3x"
         alt="Responsive density">
    
    <!-- pictureæ ‡ç­¾ -->
    <picture>
        <source media="(min-width: 1200px)" srcset="/img/desktop-large.jpg">
        <source media="(min-width: 800px)" srcset="/img/desktop.jpg">
        <source media="(min-width: 400px)" srcset="/img/tablet.jpg">
        <img src="/img/mobile.jpg" alt="Responsive picture">
    </picture>
    
    <!-- å¤šæºpicture -->
    <picture>
        <source type="image/webp" srcset="/img/image.webp">
        <source type="image/jpeg" srcset="/img/image.jpg">
        <img src="/img/image-fallback.jpg" alt="Format fallback">
    </picture>
</body>
</html>
```

**è¿è¡Œ**ï¼š
```bash
./spider_v2.8.exe -u http://localhost/test_srcset.html -d 1 -o result_srcset.json
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[é™æ€çˆ¬è™«] ä»srcsetæå–äº† 12ä¸ªå›¾ç‰‡URL
  - /img/default.jpg
  - /img/small.jpg (320w)
  - /img/medium.jpg (640w)
  - /img/large.jpg (1024w)
  - /img/logo.png
  - /img/logo-1x.png (1x)
  - /img/logo-2x.png (2x)
  - /img/logo-3x.png (3x)
  - /img/desktop-large.jpg
  - /img/desktop.jpg
  - /img/tablet.jpg
  - /img/mobile.jpg
```

---

### 4. èµ„æºæ™ºèƒ½åˆ†ç±»ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

**æµ‹è¯•HTML**ï¼šåˆ›å»º`test_classification.html`

```html
<!DOCTYPE html>
<html>
<head>
    <title>Resource Classification Test</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/app.js"></script>
</head>
<body>
    <!-- é¡µé¢é“¾æ¥ - éœ€è¦çˆ¬å– -->
    <a href="/page1.html">Page 1</a>
    <a href="/page2.html">Page 2</a>
    
    <!-- å›¾ç‰‡ - åªæ”¶é›†ä¸è¯·æ±‚ -->
    <img src="/images/photo1.jpg">
    <img src="/images/photo2.png">
    <img src="/images/icon.svg">
    
    <!-- è§†é¢‘ - åªæ”¶é›†ä¸è¯·æ±‚ -->
    <video src="/videos/demo.mp4"></video>
    
    <!-- éŸ³é¢‘ - åªæ”¶é›†ä¸è¯·æ±‚ -->
    <audio src="/audio/sound.mp3"></audio>
    
    <!-- å­—ä½“ - åªæ”¶é›†ä¸è¯·æ±‚ -->
    <link href="/fonts/myfont.woff2" rel="preload" as="font">
    
    <!-- æ–‡æ¡£ - åªæ”¶é›†ä¸è¯·æ±‚ -->
    <a href="/docs/manual.pdf">Manual</a>
    <a href="/reports/report.xlsx">Report</a>
    
    <!-- API - éœ€è¦è¯·æ±‚ -->
    <script>
        fetch('/api/v1/users');
        fetch('/api/v1/products');
    </script>
    
    <!-- å¤–éƒ¨é“¾æ¥ - åªæ”¶é›†ä¸è¯·æ±‚ -->
    <a href="https://external.com/page">External</a>
    <img src="https://cdn.external.com/image.jpg">
</body>
</html>
```

**è¿è¡Œ**ï¼š
```bash
./spider_v2.8.exe -u http://localhost/test_classification.html -d 2 -o result_class.json
```

**é¢„æœŸè¾“å‡º**ï¼š
```
ã€èµ„æºåˆ†ç±»ç»Ÿè®¡ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
éœ€è¦è¯·æ±‚å¹¶çˆ¬å–:
  âœ… é¡µé¢ (Page):         2ä¸ª  â†’ æ­£å¸¸çˆ¬å–
  âœ… JavaScript:          1ä¸ª  â†’ ä¸‹è½½å¹¶åˆ†æ
  âœ… CSS:                 1ä¸ª  â†’ ä¸‹è½½å¹¶åˆ†æ
  âœ… APIç«¯ç‚¹:             2ä¸ª  â†’ æµ‹è¯•è®¿é—®
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å°è®¡:                   6ä¸ª  (å®é™…HTTPè¯·æ±‚)

åªæ”¶é›†ä¸è¯·æ±‚:
  ğŸ“· å›¾ç‰‡ (Image):         3ä¸ª  â†’ è®°å½•ä½†ä¸ä¸‹è½½
  ğŸ¬ è§†é¢‘ (Video):         1ä¸ª  â†’ è®°å½•ä½†ä¸ä¸‹è½½
  ğŸµ éŸ³é¢‘ (Audio):         1ä¸ª  â†’ è®°å½•ä½†ä¸ä¸‹è½½
  ğŸ”¤ å­—ä½“ (Font):          1ä¸ª  â†’ è®°å½•ä½†ä¸ä¸‹è½½
  ğŸ“„ æ–‡æ¡£ (Document):      2ä¸ª  â†’ è®°å½•ä½†ä¸ä¸‹è½½
  ğŸŒ å¤–éƒ¨é“¾æ¥ (External):  2ä¸ª  â†’ è®°å½•ä½†ä¸è®¿é—®
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å°è®¡:                   10ä¸ª (åªè®°å½•)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»è®¡:                     16ä¸ª URL
å®é™…è¯·æ±‚:                  6ä¸ª (37.5%)
èŠ‚çœè¯·æ±‚:                 10ä¸ª (62.5%)
æ€§èƒ½æå‡:                 ~60%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ“Š ç»“æœæ–‡ä»¶æ ¼å¼

### result.json æ–°å¢å­—æ®µ

```json
{
  "total_results": 5,
  "total_links": 50,
  
  "resource_classification": {
    "need_request": 20,
    "only_collect": 80,
    "total": 100,
    
    "page_count": 10,
    "javascript_count": 5,
    "css_count": 5,
    "api_count": 0,
    
    "image_count": 40,
    "video_count": 5,
    "audio_count": 3,
    "font_count": 8,
    "document_count": 10,
    "archive_count": 2,
    "external_count": 12,
    "other_count": 0
  },
  
  "base64_decoded_urls": [
    "https://api.example.com/secret/endpoint",
    "/internal/admin/panel"
  ],
  
  "css_extracted_urls": {
    "images": [
      "/images/header-bg.jpg",
      "/images/body-bg.png"
    ],
    "fonts": [
      "/fonts/myfont.woff2",
      "/fonts/myfont.woff"
    ],
    "stylesheets": [
      "/css/base.css",
      "https://fonts.example.com/roboto.css"
    ],
    "others": []
  },
  
  "srcset_images": [
    "/img/small.jpg (320w)",
    "/img/medium.jpg (640w)",
    "/img/large.jpg (1024w)"
  ],
  
  "links": [...],
  "assets": [...],
  "apis": [...]
}
```

---

## ğŸ¯ å®æˆ˜ç¤ºä¾‹

### åœºæ™¯1ï¼šå¤§å‹ç”µå•†ç½‘ç«™çˆ¬å–

**ç‰¹ç‚¹**ï¼šå¤§é‡å›¾ç‰‡ã€è§†é¢‘ã€CSSã€JS

```bash
./spider_v2.8.exe -u https://example-shop.com -d 3 -o shop_result.json
```

**ä¼˜åŒ–æ•ˆæœ**ï¼š
```
å‘ç°URLæ€»æ•°: 5000
  - é¡µé¢: 500
  - JSæ–‡ä»¶: 200
  - CSSæ–‡ä»¶: 100
  - å›¾ç‰‡: 3500
  - è§†é¢‘: 300
  - å…¶ä»–: 400

ä¼˜åŒ–å‰è¯·æ±‚æ•°: 5000 (å…¨éƒ¨)
ä¼˜åŒ–åè¯·æ±‚æ•°: 800 (é¡µé¢+JS+CSS)
èŠ‚çœè¯·æ±‚: 4200 (84%)
æ—¶é—´èŠ‚çœ: ~4å°æ—¶ â†’ ~0.5å°æ—¶
```

### åœºæ™¯2ï¼šAPIç«¯ç‚¹å‘ç°

**ç‰¹ç‚¹**ï¼šä¸“æ³¨äºAPIï¼Œå¿½ç•¥é™æ€èµ„æº

```bash
./spider_v2.8.exe -u https://api-app.com -d 2 -o api_result.json
```

**ä¼˜åŒ–æ•ˆæœ**ï¼š
```
å‘ç°URLæ€»æ•°: 1000
  - APIç«¯ç‚¹: 150
  - é¡µé¢: 100
  - JSæ–‡ä»¶: 50
  - é™æ€èµ„æº: 700

å®é™…è¯·æ±‚: 300 (API+é¡µé¢+JS)
é™æ€èµ„æº: 700 (åªæ”¶é›†)
æ€§èƒ½æå‡: 70%
```

### åœºæ™¯3ï¼šSPAå•é¡µåº”ç”¨

**ç‰¹ç‚¹**ï¼šå¤§é‡Base64ã€åŠ¨æ€URLã€è·¯ç”±é…ç½®

```bash
./spider_v2.8.exe -u https://spa-app.com -d 3 --enable-dynamic -o spa_result.json
```

**æ–°å¢å‘ç°**ï¼š
```
Base64è§£ç : 25ä¸ªéšè—URL
CSSæå–: 15ä¸ªèƒŒæ™¯å›¾/å­—ä½“
srcset: 30ä¸ªå“åº”å¼å›¾ç‰‡
è·¯ç”±é…ç½®: 40ä¸ªå‰ç«¯è·¯ç”±

æ–°å¢URL: 110ä¸ª (+15%)
```

---

## ğŸ”§ é«˜çº§é…ç½®

### config.json å»ºè®®é…ç½®

```json
{
  "target_url": "https://example.com",
  "depth_settings": {
    "max_depth": 3
  },
  "strategy_settings": {
    "enable_static_crawler": true,
    "enable_dynamic_crawler": true,
    "domain_scope": "example.com"
  },
  "deduplication_settings": {
    "enable_smart_param_dedup": true,
    "enable_business_aware_filter": true,
    "similarity_threshold": 0.9
  },
  "log_settings": {
    "level": "INFO",
    "output_file": "spider_v2.8.log"
  }
}
```

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### v2.6 vs v2.8

| æŒ‡æ ‡ | v2.6 | v2.8 | æå‡ |
|------|------|------|------|
| åœºæ™¯è¦†ç›–ç‡ | 80% | 87% | +7% |
| CSSæ”¯æŒ | 30% | 90% | +60% |
| srcsetæ”¯æŒ | 0% | 100% | +100% |
| Base64è§£ç  | 0% | 80% | +80% |
| HTTPè¯·æ±‚æ•° | 100% | 45% | -55% |
| çˆ¬å–æ—¶é—´ | 100% | 40% | -60% |
| å¸¦å®½å ç”¨ | 100% | 10% | -90% |

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•

### ä¸€é”®æµ‹è¯•è„šæœ¬

åˆ›å»º`test_all_v2.8.bat`ï¼š

```batch
@echo off
echo ========================================
echo  gogospider v2.8 å®Œæ•´æµ‹è¯•
echo ========================================
echo.

echo [1/4] æµ‹è¯•Base64è§£ç ...
spider_v2.8.exe -u http://localhost/test_base64.html -d 1 -o test1.json
echo.

echo [2/4] æµ‹è¯•CSS URLæå–...
spider_v2.8.exe -u http://localhost/test_css.html -d 1 -o test2.json
echo.

echo [3/4] æµ‹è¯•srcset...
spider_v2.8.exe -u http://localhost/test_srcset.html -d 1 -o test3.json
echo.

echo [4/4] æµ‹è¯•èµ„æºåˆ†ç±»...
spider_v2.8.exe -u http://localhost/test_classification.html -d 2 -o test4.json
echo.

echo ========================================
echo  æµ‹è¯•å®Œæˆï¼æŸ¥çœ‹ç»“æœæ–‡ä»¶ï¼š
echo  - test1.json (Base64)
echo  - test2.json (CSS)
echo  - test3.json (srcset)
echo  - test4.json (åˆ†ç±»)
echo ========================================
pause
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆå›¾ç‰‡/è§†é¢‘ä¸è¯·æ±‚ï¼Ÿ

**A**: è¿™æ˜¯v2.8çš„æ ¸å¿ƒä¼˜åŒ–ï¼
- é™æ€èµ„æºåªæ”¶é›†URLï¼Œä¸å®é™…ä¸‹è½½
- èŠ‚çœ60%+çš„æ—¶é—´å’Œ90%+çš„å¸¦å®½
- å¦‚éœ€ä¸‹è½½ï¼Œå¯ä»¥ä»ç»“æœJSONä¸­æå–URLåˆ—è¡¨å•ç‹¬ä¸‹è½½

### Q2: å¦‚ä½•å¼ºåˆ¶è¯·æ±‚æ‰€æœ‰èµ„æºï¼Ÿ

**A**: v2.8ä¸“æ³¨äºå®‰å…¨æµ‹è¯•ï¼Œå¦‚éœ€ä¸‹è½½æ‰€æœ‰èµ„æºï¼Œå»ºè®®ï¼š
1. ä½¿ç”¨wget/curlæ‰¹é‡ä¸‹è½½
2. ä½¿ç”¨ä¸“é—¨çš„ä¸‹è½½å·¥å…·
3. ä¿®æ”¹`resource_classifier.go`è¿”å›å€¼

### Q3: CSS/JSæ–‡ä»¶ä¼šè¢«ä¸‹è½½å—ï¼Ÿ

**A**: ä¼šï¼
- CSSæ–‡ä»¶ï¼šä¸‹è½½å¹¶åˆ†æå…¶ä¸­çš„URL
- JSæ–‡ä»¶ï¼šä¸‹è½½å¹¶åˆ†æï¼ˆæå–APIã€è·¯ç”±ã€Base64ç­‰ï¼‰
- è¿™äº›æ–‡ä»¶å¯¹å®‰å…¨æµ‹è¯•å¾ˆé‡è¦

### Q4: åŸŸå¤–URLä¼šè¢«è®¿é—®å—ï¼Ÿ

**A**: ä¸ä¼šï¼
- åŸŸå¤–URLåªè®°å½•ä¸è®¿é—®
- å¯åœ¨ç»“æœä¸­çš„`external_links`å­—æ®µæŸ¥çœ‹
- é¿å…è§¦å‘ç¬¬ä¸‰æ–¹ç½‘ç«™çš„é˜²æŠ¤

---

## ğŸŠ æ€»ç»“

v2.8æ˜¯gogospiderçš„é‡å¤§å‡çº§ï¼š

- âœ… è¡¥å¼ºCSSã€srcsetã€Base64å¼±é¡¹
- âœ… æ™ºèƒ½èµ„æºåˆ†ç±»ï¼ˆåªæ”¶é›†ä¸è¯·æ±‚ï¼‰
- âœ… æ€§èƒ½æå‡60%ï¼ˆæ—¶é—´ï¼‰ã€90%ï¼ˆå¸¦å®½ï¼‰
- âœ… è¦†ç›–ç‡æå‡7%ï¼ˆ80%â†’87%ï¼‰
- âœ… ä¸“æ³¨æ ¸å¿ƒç›®æ ‡ï¼ˆé¡µé¢/API/JSï¼‰

**å¼ºçƒˆæ¨èå‡çº§ï¼**

---

**ç‰ˆæœ¬**: v2.8  
**æ—¥æœŸ**: 2025-10-25  
**ä½œè€…**: gogospiderå›¢é˜Ÿ  
**æ–‡æ¡£**: v2.8ä½¿ç”¨æŒ‡å—.md

