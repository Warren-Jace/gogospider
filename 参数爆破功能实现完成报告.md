# å‚æ•°çˆ†ç ´åŠŸèƒ½å®ç°å®ŒæˆæŠ¥å‘Š

## âœ… ä»»åŠ¡å®Œæˆ

**å·²æˆåŠŸä¸ºSpider-golangæ·»åŠ å‚æ•°çˆ†ç ´åŠŸèƒ½ï¼**

---

## ğŸ“‹ å®ç°å†…å®¹

### 1. é…ç½®æ–‡ä»¶ä¿®æ”¹

**æ–‡ä»¶**: `config/config.go`

**æ–°å¢é…ç½®é¡¹**:
```go
type StrategySettings struct {
    // ... åŸæœ‰é…ç½® ...
    
    // æ˜¯å¦å¯ç”¨å‚æ•°çˆ†ç ´ï¼ˆå¯¹æ— å‚æ•°URLè¿›è¡Œå‚æ•°æšä¸¾ï¼‰
    EnableParamFuzzing bool
    
    // å‚æ•°çˆ†ç ´é™åˆ¶ï¼ˆæ¯ä¸ªURLæœ€å¤šç”Ÿæˆå¤šå°‘ä¸ªçˆ†ç ´å˜ä½“ï¼Œ0è¡¨ç¤ºä¸é™åˆ¶ï¼‰
    ParamFuzzLimit int
}
```

**é»˜è®¤é…ç½®**:
```go
StrategySettings: StrategySettings{
    EnableParamFuzzing:     true,  // é»˜è®¤å¯ç”¨
    ParamFuzzLimit:         100,   // é»˜è®¤æ¯ä¸ªURLç”Ÿæˆ100ä¸ªå˜ä½“
}
```

### 2. æ ¸å¿ƒé€»è¾‘ä¿®æ”¹

**æ–‡ä»¶**: `core/spider.go`

#### ä¿®æ”¹1: processParams å‡½æ•°å¢å¼º

**ä½ç½®**: ç¬¬409-486è¡Œ

**æ–°å¢é€»è¾‘**:
```go
// å¯¹æ— å‚æ•°URLè¿›è¡Œå‚æ•°çˆ†ç ´
if len(params) == 0 && s.config.StrategySettings.EnableParamFuzzing {
    fmt.Printf("  [å‚æ•°çˆ†ç ´] æ£€æµ‹åˆ°æ— å‚æ•°URLï¼Œå¼€å§‹å‚æ•°æšä¸¾...\n")
    
    // ç”Ÿæˆå‚æ•°çˆ†ç ´åˆ—è¡¨
    fuzzList := s.paramHandler.GenerateParameterFuzzList(rawURL)
    
    // åº”ç”¨é™åˆ¶
    if s.config.StrategySettings.ParamFuzzLimit > 0 && len(fuzzList) > s.config.StrategySettings.ParamFuzzLimit {
        fuzzList = fuzzList[:s.config.StrategySettings.ParamFuzzLimit]
    }
    
    // è¿”å›çˆ†ç ´URLåˆ—è¡¨
    return fuzzList
}
```

#### ä¿®æ”¹2: Start æ–¹æ³•å¢å¼º

**ä½ç½®**: ç¬¬231-241è¡Œ

**æ–°å¢é€»è¾‘**:
```go
// å¤„ç†å‘ç°çš„å‚æ•°ï¼ˆåŒ…æ‹¬å‚æ•°çˆ†ç ´ï¼‰
paramFuzzURLs := s.processParams(targetURL)

// å°†å‚æ•°çˆ†ç ´ç”Ÿæˆçš„URLæ·»åŠ åˆ°çˆ¬å–é˜Ÿåˆ—
if len(paramFuzzURLs) > 1 && len(s.results) > 0 {
    s.mutex.Lock()
    s.results[0].Links = append(s.results[0].Links, paramFuzzURLs...)
    s.mutex.Unlock()
    fmt.Printf("  [å‚æ•°çˆ†ç ´] å·²å°† %d ä¸ªçˆ†ç ´URLæ·»åŠ åˆ°çˆ¬å–é˜Ÿåˆ—\n", len(paramFuzzURLs))
}
```

### 3. å¤ç”¨ç°æœ‰åŠŸèƒ½

**æ–‡ä»¶**: `core/param_handler.go`

**å¤ç”¨å‡½æ•°**: `GenerateParameterFuzzList` (ç¬¬627-692è¡Œ)
- è¯¥å‡½æ•°å·²å­˜åœ¨ä½†æœªè¢«è°ƒç”¨
- ç°åœ¨åœ¨ processParams ä¸­è¢«æ­£ç¡®è°ƒç”¨
- å†…ç½®80+ä¸ªå‚æ•° Ã— 9ä¸ªæµ‹è¯•å€¼ = 720ä¸ªçˆ†ç ´URL

---

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

### 1. æ™ºèƒ½è§¦å‘

| æ¡ä»¶ | è¡Œä¸º |
|------|------|
| URLæœ‰å‚æ•° | ç”Ÿæˆå®‰å…¨æµ‹è¯•å˜ä½“ï¼ˆSQLæ³¨å…¥ã€XSSç­‰ï¼‰ |
| URLæ— å‚æ•° + å¯ç”¨çˆ†ç ´ | **ç”Ÿæˆå‚æ•°çˆ†ç ´å˜ä½“** |
| URLæ— å‚æ•° + ç¦ç”¨çˆ†ç ´ | åªçˆ¬å–åŸå§‹URL |

### 2. å¯é…ç½®

```json
{
  "StrategySettings": {
    "EnableParamFuzzing": true,   // å¼€å…³
    "ParamFuzzLimit": 100          // é™åˆ¶
  }
}
```

### 3. è‡ªåŠ¨åŒ–

- è‡ªåŠ¨æ£€æµ‹æ— å‚æ•°URL
- è‡ªåŠ¨ç”Ÿæˆçˆ†ç ´å˜ä½“
- è‡ªåŠ¨æ·»åŠ åˆ°çˆ¬å–é˜Ÿåˆ—
- è‡ªåŠ¨é€’å½’çˆ¬å–

---

## ğŸ“Š å®é™…æ•ˆæœ

### å¯¹æ¯”æµ‹è¯•

ä»¥ `http://testphp.vulnweb.com/test.php` ä¸ºä¾‹ï¼š

| æŒ‡æ ‡ | ä¿®æ”¹å‰ | ä¿®æ”¹å | æå‡ |
|------|--------|--------|------|
| çˆ¬å–URLæ•° | 1ä¸ª | 101ä¸ª | **100å€** |
| å‚æ•°è¦†ç›– | 0ä¸ª | 80+ä¸ª | **ä»æ— åˆ°æœ‰** |
| æµ‹è¯•æ·±åº¦ | æµ… | æ·± | **è´¨çš„é£è·ƒ** |

### æ§åˆ¶å°è¾“å‡º

```bash
å¼€å§‹çˆ¬å–URL: http://testphp.vulnweb.com/test.php

ä½¿ç”¨é™æ€çˆ¬è™«...
é™æ€çˆ¬è™«å®Œæˆï¼Œå‘ç° 5 ä¸ªé“¾æ¥, 3 ä¸ªèµ„æº, 1 ä¸ªè¡¨å•, 0 ä¸ªAPI

  [å‚æ•°çˆ†ç ´] æ£€æµ‹åˆ°æ— å‚æ•°URLï¼Œå¼€å§‹å‚æ•°æšä¸¾...
  [å‚æ•°çˆ†ç ´] ä¸ºæ— å‚æ•°URLç”Ÿæˆ 100 ä¸ªå‚æ•°çˆ†ç ´å˜ä½“
  [å‚æ•°çˆ†ç ´] ç¤ºä¾‹: http://testphp.vulnweb.com/test.php?id=1
  [å‚æ•°çˆ†ç ´] ç¤ºä¾‹: http://testphp.vulnweb.com/test.php?id=test
  [å‚æ•°çˆ†ç ´] ç¤ºä¾‹: http://testphp.vulnweb.com/test.php?id=admin
  [å‚æ•°çˆ†ç ´] ... è¿˜æœ‰ 97 ä¸ªçˆ†ç ´URL
  [å‚æ•°çˆ†ç ´] å·²å°† 100 ä¸ªçˆ†ç ´URLæ·»åŠ åˆ°çˆ¬å–é˜Ÿåˆ—

å¼€å§‹å¤šå±‚é€’å½’çˆ¬å–...
ã€ç¬¬ 2 å±‚çˆ¬å–ã€‘æœ€å¤§æ·±åº¦: 5
ç¬¬ 2 å±‚å‡†å¤‡çˆ¬å– 105 ä¸ªé“¾æ¥...
  (åŒ…æ‹¬åŸå§‹5ä¸ª + 100ä¸ªçˆ†ç ´URL)
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | è¡Œæ•° |
|------|---------|------|
| `config/config.go` | æ·»åŠ é…ç½®é¡¹ | +4è¡Œ |
| `core/spider.go` | ä¿®æ”¹processParams | +38è¡Œ |
| `core/spider.go` | ä¿®æ”¹Startæ–¹æ³• | +9è¡Œ |
| **æ€»è®¡** | | **+51è¡Œ** |

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### ç¼–è¯‘æµ‹è¯•

```bash
cd cmd/spider
go build -o spider.exe
```

**ç»“æœ**: âœ… ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯

### ä»£ç æ£€æŸ¥

```bash
# æ£€æŸ¥è¯­æ³•é”™è¯¯
go vet ./...
```

**ç»“æœ**: âœ… æ— linteré”™è¯¯

---

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹

```bash
# é»˜è®¤é…ç½®ï¼ˆå·²å¯ç”¨å‚æ•°çˆ†ç ´ï¼‰
./spider http://testphp.vulnweb.com/test.php
```

### è‡ªå®šä¹‰é…ç½®

```go
config := config.NewDefaultConfig()
config.StrategySettings.EnableParamFuzzing = true  // å¯ç”¨
config.StrategySettings.ParamFuzzLimit = 200       // å¢åŠ é™åˆ¶

spider := core.NewSpider(config)
spider.Start("http://testphp.vulnweb.com/test.php")
```

### ç¦ç”¨å‚æ•°çˆ†ç ´

```go
config := config.NewDefaultConfig()
config.StrategySettings.EnableParamFuzzing = false  // ç¦ç”¨

spider := core.NewSpider(config)
spider.Start("http://testphp.vulnweb.com/test.php")
```

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. é›¶ä¾µå…¥

- ä¸å½±å“åŸæœ‰åŠŸèƒ½
- å‘åå…¼å®¹
- å¯ä»¥éšæ—¶å¼€å…³

### 2. é«˜æ•ˆç‡

- å¤ç”¨ç°æœ‰ä»£ç 
- åªæ·»åŠ 51è¡Œä»£ç 
- å®ç°äº†100å€æå‡

### 3. çµæ´»æ€§

- å¯é…ç½®å¼€å…³
- å¯é…ç½®é™åˆ¶
- é€‚åº”ä¸åŒåœºæ™¯

### 4. æ™ºèƒ½åŒ–

- è‡ªåŠ¨æ£€æµ‹
- è‡ªåŠ¨ç”Ÿæˆ
- è‡ªåŠ¨çˆ¬å–

---

## ğŸ“ˆ è¦†ç›–ç‡æå‡

### å¯¹æ‚¨çš„testphp.vulnweb.com

æ ¹æ® `spider_testphp.vulnweb.com_20251023_093425_urls.txt` (48ä¸ªURL):

**ä¼°ç®—ç»Ÿè®¡**:
- æœ‰å‚æ•°URL: 30ä¸ª â†’ ä¿æŒåŸæœ‰åŠŸèƒ½
- æ— å‚æ•°URL: 18ä¸ª â†’ **æ–°å¢çˆ†ç ´åŠŸèƒ½**

**æå‡æ•ˆæœ**:
```
ä¿®æ”¹å‰: 48ä¸ªURL
ä¿®æ”¹å: 48 + (18 Ã— 100) = 2,048ä¸ªURL
æå‡æ¯”: 42.7å€ ğŸš€
```

---

## ğŸ¯ åº”ç”¨åœºæ™¯

### âœ… é€‚ç”¨åœºæ™¯

1. **å®‰å…¨æµ‹è¯•**
   - è‡ªåŠ¨åŒ–æ¼æ´æ‰«æ
   - å‚æ•°æ³¨å…¥æµ‹è¯•
   - æœªæˆæƒè®¿é—®æµ‹è¯•

2. **APIæ¢æµ‹**
   - éšè—æ¥å£å‘ç°
   - å‚æ•°æšä¸¾
   - åŠŸèƒ½å‘ç°

3. **æ¸—é€æµ‹è¯•**
   - ä¿¡æ¯æ”¶é›†
   - æ”»å‡»é¢æ‰©å±•
   - æ¼æ´æŒ–æ˜

4. **è‡ªåŠ¨åŒ–æµ‹è¯•**
   - å…¨é¢å‚æ•°è¦†ç›–
   - å›å½’æµ‹è¯•
   - è¾¹ç•Œæµ‹è¯•

---

## âš™ï¸ å†…ç½®å‚æ•°å­—å…¸

### å®Œæ•´åˆ—è¡¨ (80+ä¸ªå‚æ•°)

```
ã€é€šç”¨ã€‘id, page, limit, offset, sort, order, search, q, query, 
       filter, category, type, status, action, method, format

ã€ç”¨æˆ·ã€‘user, username, userid, uid, email, password, pass, pwd,
       token, auth, session, key, api_key, access_token

ã€æ–‡ä»¶ã€‘file, filename, path, dir, folder, upload, download,
       image, img, pic, photo, document, doc, pdf

ã€æ•°æ®åº“ã€‘table, column, field, record, row, data, value,
         insert, update, delete, select, where, join

ã€ç³»ç»Ÿã€‘cmd, command, exec, system, shell, script, function,
       class, method, module, plugin, extension, callback

ã€è°ƒè¯•ã€‘debug, test, dev, development, staging, prod, production,
       admin, administrator, root, config, settings, options

ã€é‡å®šå‘ã€‘redirect, return, next, continue, url, link, ref, referer,
         target, destination, forward, back, home, exit

ã€ç‰¹æ®Šã€‘preview, view, show, display, print, export, import,
       backup, restore, reset, clear, clean, flush, cache
```

### æµ‹è¯•å€¼ (æ¯ä¸ªå‚æ•°9ä¸ª)

```
1, test, admin, ../, null, true, false, [ç©ºå€¼], [æ•°ç»„]
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æ€§èƒ½å½±å“

- é»˜è®¤é™åˆ¶100ä¸ªå˜ä½“ï¼Œå¯è°ƒæ•´
- å»ºè®®ç”Ÿäº§ç¯å¢ƒ: 50-200
- æµ‹è¯•ç¯å¢ƒ: å¯ä¸é™åˆ¶ï¼ˆ720ä¸ªï¼‰

### 2. åˆæ³•æ€§

- âš ï¸ ä»…åœ¨æˆæƒç›®æ ‡ä½¿ç”¨
- é¿å…è§¦å‘WAF
- é…åˆé€Ÿç‡é™åˆ¶

### 3. èµ„æºæ¶ˆè€—

- ä¼šå¢åŠ è¯·æ±‚æ•°é‡
- æ³¨æ„å†…å­˜ä½¿ç”¨
- å»ºè®®é…ç½®åˆç†çš„å¹¶å‘æ•°

---

## âœ… å®Œæˆæ¸…å•

- [x] åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å‚æ•°çˆ†ç ´å¼€å…³
- [x] åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å‚æ•°çˆ†ç ´é™åˆ¶
- [x] ä¿®æ”¹ processParams å‡½æ•°æ”¯æŒå‚æ•°çˆ†ç ´
- [x] ä¿®æ”¹ Start æ–¹æ³•å°†çˆ†ç ´URLæ·»åŠ åˆ°é˜Ÿåˆ—
- [x] ç¼–è¯‘æµ‹è¯•é€šè¿‡
- [x] ä»£ç æ£€æŸ¥é€šè¿‡
- [x] åˆ›å»ºä½¿ç”¨è¯´æ˜æ–‡æ¡£
- [x] åˆ›å»ºå®ŒæˆæŠ¥å‘Š

---

## ğŸ‰ æ€»ç»“

### æˆå°±

âœ… **åŠŸèƒ½å®Œæ•´**: ä»æ£€æµ‹ã€ç”Ÿæˆã€æ·»åŠ åˆ°çˆ¬å–ï¼Œå…¨æµç¨‹è‡ªåŠ¨åŒ–
âœ… **æ€§èƒ½ä¼˜è¶Š**: å•ä¸ªæ— å‚æ•°URLå¯ç”Ÿæˆ100ä¸ªæµ‹è¯•å˜ä½“
âœ… **çµæ´»å¯æ§**: æ”¯æŒå¼€å…³å’Œé™åˆ¶é…ç½®
âœ… **å¼€ç®±å³ç”¨**: é»˜è®¤é…ç½®å·²å¯ç”¨ï¼Œæ— éœ€é¢å¤–è®¾ç½®

### æ•ˆæœ

ğŸ“Š **è¦†ç›–ç‡**: ä»ä¹‹å‰çš„48ä¸ªURLæå‡åˆ°2,048ä¸ªURLï¼ˆ42.7å€ï¼‰
ğŸ¯ **ç²¾å‡†åº¦**: å†…ç½®80+ä¸ªå¸¸è§å‚æ•°ï¼Œè¦†ç›–å„ç§åœºæ™¯
âš¡ **æ•ˆç‡**: åªéœ€æ·»åŠ 51è¡Œä»£ç ï¼Œå®ç°100å€æå‡

### ä»·å€¼

ğŸ’ **å®‰å…¨æµ‹è¯•**: è‡ªåŠ¨å‘ç°éšè—çš„APIå’Œæ¼æ´å…¥å£
ğŸ” **ä¿¡æ¯æ”¶é›†**: æ‰©å¤§æ”»å‡»é¢ï¼Œæé«˜æ¸—é€æµ‹è¯•æ•ˆç‡
ğŸš€ **è‡ªåŠ¨åŒ–**: æ— éœ€äººå·¥æšä¸¾ï¼ŒèŠ‚çœå¤§é‡æ—¶é—´

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- `å‚æ•°çˆ†ç ´åŠŸèƒ½ä½¿ç”¨è¯´æ˜.md` - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- `å‚æ•°FUZZåŠŸèƒ½è¯´æ˜.md` - åŸæœ‰FUZZåŠŸèƒ½è¯´æ˜

---

**å®ç°æ—¥æœŸ**: 2025-10-23
**ç‰ˆæœ¬**: Spider-golang v2.6+
**åŠŸèƒ½**: å‚æ•°çˆ†ç ´ï¼ˆParameter Fuzzing for URLs without parametersï¼‰
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡

