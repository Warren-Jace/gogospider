# å¿«é€Ÿå¼€å§‹ - v2.6 ç¬¬ä¸€å‘¨å®æ–½æŒ‡å—

## ğŸ¯ æœ¬å‘¨ç›®æ ‡

**å®Œæˆç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ + å®æ—¶ç›‘æ§æŒ‡æ ‡**

**é¢„è®¡æ—¶é—´**: 5ä¸ªå·¥ä½œæ—¥  
**éš¾åº¦**: â­â­â­ (ä¸­ç­‰)  
**æ”¶ç›Š**: â­â­â­â­â­ (æé«˜)

---

## ğŸ“… Day 1-3: ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ

### Day 1: è®¾è®¡å’ŒåŸºç¡€å®ç° (8å°æ—¶)

#### ä¸Šåˆ (4å°æ—¶): è®¾è®¡æ—¥å¿—ç³»ç»Ÿ

**1. åˆ›å»ºæ—¥å¿—æ¥å£** (1h)

åˆ›å»ºæ–‡ä»¶: `core/logger.go`

```go
package core

import (
	"context"
	"log/slog"
	"os"
)

// Logger æ—¥å¿—æ¥å£
type Logger interface {
	Debug(msg string, args ...any)
	Info(msg string, args ...any)
	Warn(msg string, args ...any)
	Error(msg string, args ...any)
	With(args ...any) Logger
}

// SlogLogger åŸºäº slog çš„å®ç°
type SlogLogger struct {
	logger *slog.Logger
}

// NewLogger åˆ›å»ºæ–°çš„æ—¥å¿—è®°å½•å™¨
func NewLogger(level slog.Level, output *os.File) Logger {
	handler := slog.NewJSONHandler(output, &slog.HandlerOptions{
		Level: level,
		ReplaceAttr: func(groups []string, a slog.Attr) slog.Attr {
			// è‡ªå®šä¹‰æ—¶é—´æ ¼å¼
			if a.Key == slog.TimeKey {
				return slog.String("timestamp", a.Value.Time().Format("2006-01-02 15:04:05"))
			}
			return a
		},
	})
	
	return &SlogLogger{
		logger: slog.New(handler),
	}
}

func (l *SlogLogger) Debug(msg string, args ...any) {
	l.logger.Debug(msg, args...)
}

func (l *SlogLogger) Info(msg string, args ...any) {
	l.logger.Info(msg, args...)
}

func (l *SlogLogger) Warn(msg string, args ...any) {
	l.logger.Warn(msg, args...)
}

func (l *SlogLogger) Error(msg string, args ...any) {
	l.logger.Error(msg, args...)
}

func (l *SlogLogger) With(args ...any) Logger {
	return &SlogLogger{
		logger: l.logger.With(args...),
	}
}

// å…¨å±€æ—¥å¿—å®ä¾‹
var DefaultLogger Logger

func init() {
	DefaultLogger = NewLogger(slog.LevelInfo, os.Stdout)
}

// ä¾¿æ·æ–¹æ³•
func Debug(msg string, args ...any) { DefaultLogger.Debug(msg, args...) }
func Info(msg string, args ...any)  { DefaultLogger.Info(msg, args...) }
func Warn(msg string, args ...any)  { DefaultLogger.Warn(msg, args...) }
func Error(msg string, args ...any) { DefaultLogger.Error(msg, args...) }
```

**2. æ·»åŠ æ—¥å¿—é…ç½®** (1h)

æ›´æ–° `config/config.go`:

```go
// LogSettings æ—¥å¿—è®¾ç½®
type LogSettings struct {
	Level      string // DEBUG, INFO, WARN, ERROR
	OutputFile string // æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œç©ºè¡¨ç¤º stdout
	Format     string // json, text
}

// åœ¨ Config ç»“æ„ä½“ä¸­æ·»åŠ 
type Config struct {
	// ... ç°æœ‰å­—æ®µ
	LogSettings LogSettings
}

// åœ¨ NewDefaultConfig ä¸­æ·»åŠ 
func NewDefaultConfig() *Config {
	return &Config{
		// ... ç°æœ‰é…ç½®
		LogSettings: LogSettings{
			Level:      "INFO",
			OutputFile: "",
			Format:     "json",
		},
	}
}
```

**3. å‘½ä»¤è¡Œå‚æ•°** (30min)

æ›´æ–° `cmd/spider/main.go`:

```go
var (
	// ... ç°æœ‰å‚æ•°
	logLevel  string
	logFile   string
	logFormat string
)

func init() {
	// ... ç°æœ‰å‚æ•°å®šä¹‰
	flag.StringVar(&logLevel, "log-level", "info", "æ—¥å¿—çº§åˆ«: debug, info, warn, error")
	flag.StringVar(&logFile, "log-file", "", "æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆç©ºè¡¨ç¤ºè¾“å‡ºåˆ°æ§åˆ¶å°ï¼‰")
	flag.StringVar(&logFormat, "log-format", "json", "æ—¥å¿—æ ¼å¼: json, text")
}
```

**4. ç¼–å†™æµ‹è¯•** (1.5h)

åˆ›å»ºæ–‡ä»¶: `core/logger_test.go`

```go
package core

import (
	"bytes"
	"log/slog"
	"os"
	"strings"
	"testing"
)

func TestLogger(t *testing.T) {
	// åˆ›å»ºæµ‹è¯•ç¼“å†²åŒº
	var buf bytes.Buffer
	logger := NewLogger(slog.LevelDebug, &buf)
	
	// æµ‹è¯• Info
	logger.Info("test message", "key", "value")
	output := buf.String()
	
	if !strings.Contains(output, "test message") {
		t.Errorf("æ—¥å¿—åº”è¯¥åŒ…å«æ¶ˆæ¯")
	}
	if !strings.Contains(output, "key") {
		t.Errorf("æ—¥å¿—åº”è¯¥åŒ…å«é”®å€¼å¯¹")
	}
}

func TestLogLevels(t *testing.T) {
	var buf bytes.Buffer
	logger := NewLogger(slog.LevelWarn, &buf)
	
	// Info åº”è¯¥è¢«è¿‡æ»¤
	logger.Info("info message")
	if buf.Len() > 0 {
		t.Errorf("INFO æ—¥å¿—åº”è¯¥è¢«è¿‡æ»¤")
	}
	
	// Warn åº”è¯¥è¾“å‡º
	logger.Warn("warn message")
	if buf.Len() == 0 {
		t.Errorf("WARN æ—¥å¿—åº”è¯¥è¾“å‡º")
	}
}
```

#### ä¸‹åˆ (4å°æ—¶): æ›¿æ¢ç°æœ‰æ—¥å¿—

**5. æ›¿æ¢ Spider ä¸­çš„æ—¥å¿—** (2h)

æ›´æ–° `core/spider.go`:

```go
// åœ¨ Spider ç»“æ„ä½“ä¸­æ·»åŠ 
type Spider struct {
	// ... ç°æœ‰å­—æ®µ
	logger Logger
}

// åœ¨ NewSpider ä¸­åˆå§‹åŒ–
func NewSpider(cfg *config.Config) *Spider {
	// åˆ›å»ºæ—¥å¿—è®°å½•å™¨
	var logOutput *os.File = os.Stdout
	if cfg.LogSettings.OutputFile != "" {
		var err error
		logOutput, err = os.OpenFile(cfg.LogSettings.OutputFile, 
			os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0644)
		if err != nil {
			log.Printf("æ— æ³•æ‰“å¼€æ—¥å¿—æ–‡ä»¶: %v", err)
			logOutput = os.Stdout
		}
	}
	
	level := parseLogLevel(cfg.LogSettings.Level)
	logger := NewLogger(level, logOutput)
	
	spider := &Spider{
		// ... ç°æœ‰åˆå§‹åŒ–
		logger: logger,
	}
	
	return spider
}

// è§£ææ—¥å¿—çº§åˆ«
func parseLogLevel(level string) slog.Level {
	switch strings.ToUpper(level) {
	case "DEBUG":
		return slog.LevelDebug
	case "INFO":
		return slog.LevelInfo
	case "WARN":
		return slog.LevelWarn
	case "ERROR":
		return slog.LevelError
	default:
		return slog.LevelInfo
	}
}

// æ›¿æ¢æ—¥å¿—è°ƒç”¨
func (s *Spider) Start(targetURL string) error {
	// âŒ fmt.Printf("å¼€å§‹çˆ¬å–URL: %s\n", targetURL)
	// âœ… ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—
	s.logger.Info("å¼€å§‹çˆ¬å–",
		"url", targetURL,
		"target_domain", s.targetDomain,
		"max_depth", s.config.DepthSettings.MaxDepth)
	
	// ... å…¶ä»–ä»£ç 
}
```

**6. æ‰¹é‡æ›¿æ¢** (2h)

ä½¿ç”¨ä»¥ä¸‹æ¨¡å¼æ›¿æ¢æ‰€æœ‰æ—¥å¿—ï¼š

```go
// æ›¿æ¢æ¨¡å¼
// fmt.Printf("xxx") â†’ s.logger.Info("xxx")
// fmt.Printf("xxx: %v", err) â†’ s.logger.Error("xxx", "error", err)
// fmt.Println("xxx") â†’ s.logger.Info("xxx")
```

**é‡ç‚¹æ–‡ä»¶**:
- `core/spider.go` (çº¦ 88 å¤„)
- `core/static_crawler.go` (çº¦ 14 å¤„)
- `core/dynamic_crawler.go` (çº¦ 21 å¤„)

---

### Day 2: å®Œæˆæ—¥å¿—æ›¿æ¢ (8å°æ—¶)

#### ä¸Šåˆ (4å°æ—¶): ç»§ç»­æ›¿æ¢æ—¥å¿—

**ç»§ç»­æ›¿æ¢æ–‡ä»¶**:
- `core/param_handler.go`
- `core/js_analyzer.go`
- `core/form_filler.go`
- å…¶ä»– core æ–‡ä»¶

**æ›¿æ¢ç¤ºä¾‹**:

```go
// Before
fmt.Printf("å‘ç° %d ä¸ªé“¾æ¥\n", len(links))

// After
s.logger.Info("é“¾æ¥å‘ç°å®Œæˆ",
	"count", len(links),
	"url", currentURL)

// Before
fmt.Printf("é”™è¯¯: %v\n", err)

// After
s.logger.Error("æ“ä½œå¤±è´¥",
	"error", err,
	"url", url,
	"operation", "crawl")
```

#### ä¸‹åˆ (4å°æ—¶): æµ‹è¯•å’ŒéªŒè¯

**7. é›†æˆæµ‹è¯•** (2h)

```bash
# æµ‹è¯•ä¸åŒæ—¥å¿—çº§åˆ«
./spider.exe -url https://example.com -log-level debug
./spider.exe -url https://example.com -log-level info
./spider.exe -url https://example.com -log-level warn

# æµ‹è¯•æ—¥å¿—æ–‡ä»¶
./spider.exe -url https://example.com -log-file spider.log

# éªŒè¯æ—¥å¿—æ ¼å¼
cat spider.log | jq .
```

**8. æ–‡æ¡£æ›´æ–°** (1h)

æ›´æ–° `README.md`:

```markdown
## æ—¥å¿—é…ç½®

### æ—¥å¿—çº§åˆ«

```bash
# DEBUG - è¯¦ç»†è°ƒè¯•ä¿¡æ¯
spider -url https://example.com -log-level debug

# INFO - ä¸€èˆ¬ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰
spider -url https://example.com -log-level info

# WARN - è­¦å‘Šä¿¡æ¯
spider -url https://example.com -log-level warn

# ERROR - ä»…é”™è¯¯
spider -url https://example.com -log-level error
```

### æ—¥å¿—æ–‡ä»¶

```bash
# è¾“å‡ºåˆ°æ–‡ä»¶
spider -url https://example.com -log-file ./spider.log

# æ—¥å¿—æ ¼å¼ï¼ˆJSONï¼‰
{"timestamp":"2025-10-24 10:00:00","level":"INFO","msg":"å¼€å§‹çˆ¬å–","url":"https://example.com"}
```
```

**9. ä»£ç å®¡æŸ¥** (1h)

æ£€æŸ¥æ¸…å•:
- [ ] æ‰€æœ‰ `fmt.Printf` å·²æ›¿æ¢
- [ ] æ‰€æœ‰ `fmt.Println` å·²æ›¿æ¢
- [ ] æ—¥å¿—åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- [ ] æ—¥å¿—çº§åˆ«ä½¿ç”¨æ­£ç¡®
- [ ] æ•æ„Ÿä¿¡æ¯å·²è„±æ•

---

### Day 3: ä¼˜åŒ–å’Œå®Œå–„ (8å°æ—¶)

#### ä¸Šåˆ (4å°æ—¶): æ—¥å¿—å¢å¼º

**10. æ·»åŠ è¯·æ±‚è¿½è¸ª** (2h)

```go
// ç”Ÿæˆå”¯ä¸€è¯·æ±‚ID
import "github.com/google/uuid"

func (s *Spider) Start(targetURL string) error {
	requestID := uuid.New().String()
	logger := s.logger.With("request_id", requestID)
	
	logger.Info("å¼€å§‹çˆ¬å–", "url", targetURL)
	// ... ä½¿ç”¨ logger
}
```

**11. æ€§èƒ½ç»Ÿè®¡æ—¥å¿—** (2h)

```go
func (s *Spider) crawlURL(targetURL string) (*Result, error) {
	start := time.Now()
	defer func() {
		elapsed := time.Since(start)
		s.logger.Debug("URLçˆ¬å–å®Œæˆ",
			"url", targetURL,
			"elapsed_ms", elapsed.Milliseconds(),
			"success", err == nil)
	}()
	
	// ... çˆ¬å–é€»è¾‘
}
```

#### ä¸‹åˆ (4å°æ—¶): æ—¥å¿—åˆ†æå·¥å…·

**12. åˆ›å»ºæ—¥å¿—åˆ†æè„šæœ¬** (2h)

åˆ›å»ºæ–‡ä»¶: `tools/analyze_logs.sh`

```bash
#!/bin/bash
# æ—¥å¿—åˆ†æå·¥å…·

LOG_FILE=$1

if [ -z "$LOG_FILE" ]; then
    echo "Usage: $0 <log_file>"
    exit 1
fi

echo "=== æ—¥å¿—ç»Ÿè®¡ ==="
echo "æ€»æ—¥å¿—æ•°: $(wc -l < $LOG_FILE)"
echo "INFO: $(grep -c '"level":"INFO"' $LOG_FILE)"
echo "WARN: $(grep -c '"level":"WARN"' $LOG_FILE)"
echo "ERROR: $(grep -c '"level":"ERROR"' $LOG_FILE)"

echo ""
echo "=== é”™è¯¯ç»Ÿè®¡ ==="
grep '"level":"ERROR"' $LOG_FILE | jq -r '.msg' | sort | uniq -c | sort -rn

echo ""
echo "=== æ€§èƒ½ç»Ÿè®¡ ==="
grep 'elapsed_ms' $LOG_FILE | jq -r '.elapsed_ms' | awk '
{
    sum+=$1; 
    count++; 
    if($1>max) max=$1; 
    if($1<min || min==0) min=$1
} 
END {
    print "å¹³å‡: "sum/count" ms"
    print "æœ€å°: "min" ms"
    print "æœ€å¤§: "max" ms"
}'
```

**13. ç¼–å†™å®Œæ•´æµ‹è¯•** (2h)

```go
// core/spider_logging_test.go
func TestSpiderLogging(t *testing.T) {
	// åˆ›å»ºä¸´æ—¶æ—¥å¿—æ–‡ä»¶
	tmpfile, err := os.CreateTemp("", "spider-test-*.log")
	require.NoError(t, err)
	defer os.Remove(tmpfile.Name())
	
	// é…ç½®
	cfg := config.NewDefaultConfig()
	cfg.TargetURL = "https://httpbin.org/html"
	cfg.LogSettings.OutputFile = tmpfile.Name()
	cfg.LogSettings.Level = "DEBUG"
	
	// è¿è¡Œçˆ¬è™«
	spider := NewSpider(cfg)
	defer spider.Close()
	
	err = spider.Start(cfg.TargetURL)
	require.NoError(t, err)
	
	// éªŒè¯æ—¥å¿—
	content, err := os.ReadFile(tmpfile.Name())
	require.NoError(t, err)
	
	// æ£€æŸ¥æ—¥å¿—å†…å®¹
	assert.Contains(t, string(content), "å¼€å§‹çˆ¬å–")
	assert.Contains(t, string(content), cfg.TargetURL)
}
```

---

## ğŸ“… Day 4-5: å®æ—¶ç›‘æ§æŒ‡æ ‡

### Day 4: æŒ‡æ ‡ç³»ç»Ÿå®ç° (8å°æ—¶)

#### ä¸Šåˆ (4å°æ—¶): è®¾è®¡æŒ‡æ ‡ç³»ç»Ÿ

**14. åˆ›å»ºæŒ‡æ ‡ç»“æ„** (2h)

åˆ›å»ºæ–‡ä»¶: `core/metrics.go`

```go
package core

import (
	"sync"
	"sync/atomic"
	"time"
)

// Metrics çˆ¬è™«æŒ‡æ ‡
type Metrics struct {
	// åŸºç¡€è®¡æ•°å™¨ï¼ˆä½¿ç”¨ atomic ä¿è¯å¹¶å‘å®‰å…¨ï¼‰
	totalRequests   int64
	successRequests int64
	failedRequests  int64
	totalURLs       int64
	totalForms      int64
	totalAPIs       int64
	totalLinks      int64
	
	// æ—¶é—´ç»Ÿè®¡
	startTime     time.Time
	totalDuration time.Duration
	
	// å“åº”æ—¶é—´ç»Ÿè®¡
	responseTimes []time.Duration
	mu            sync.RWMutex
	
	// HTTPçŠ¶æ€ç ç»Ÿè®¡
	statusCodes map[int]int64
	statusMu    sync.RWMutex
	
	// é”™è¯¯ç»Ÿè®¡
	errorTypes map[string]int64
	errorMu    sync.RWMutex
}

// NewMetrics åˆ›å»ºæŒ‡æ ‡æ”¶é›†å™¨
func NewMetrics() *Metrics {
	return &Metrics{
		startTime:     time.Now(),
		responseTimes: make([]time.Duration, 0, 10000),
		statusCodes:   make(map[int]int64),
		errorTypes:    make(map[string]int64),
	}
}

// IncrementRequests å¢åŠ è¯·æ±‚è®¡æ•°
func (m *Metrics) IncrementRequests() {
	atomic.AddInt64(&m.totalRequests, 1)
}

// IncrementSuccess å¢åŠ æˆåŠŸè®¡æ•°
func (m *Metrics) IncrementSuccess() {
	atomic.AddInt64(&m.successRequests, 1)
}

// RecordResponseTime è®°å½•å“åº”æ—¶é—´
func (m *Metrics) RecordResponseTime(duration time.Duration) {
	m.mu.Lock()
	defer m.mu.Unlock()
	m.responseTimes = append(m.responseTimes, duration)
}

// RecordStatusCode è®°å½•HTTPçŠ¶æ€ç 
func (m *Metrics) RecordStatusCode(code int) {
	m.statusMu.Lock()
	defer m.statusMu.Unlock()
	m.statusCodes[code]++
}

// GetSnapshot è·å–æŒ‡æ ‡å¿«ç…§
func (m *Metrics) GetSnapshot() *MetricsSnapshot {
	m.mu.RLock()
	m.statusMu.RLock()
	m.errorMu.RLock()
	defer m.mu.RUnlock()
	defer m.statusMu.RUnlock()
	defer m.errorMu.RUnlock()
	
	elapsed := time.Since(m.startTime)
	
	snapshot := &MetricsSnapshot{
		TotalRequests:   atomic.LoadInt64(&m.totalRequests),
		SuccessRequests: atomic.LoadInt64(&m.successRequests),
		FailedRequests:  atomic.LoadInt64(&m.failedRequests),
		Elapsed:         elapsed,
	}
	
	// è®¡ç®—é€Ÿç‡
	if elapsed.Seconds() > 0 {
		snapshot.RequestsPerSec = float64(snapshot.TotalRequests) / elapsed.Seconds()
	}
	
	// è®¡ç®—å“åº”æ—¶é—´
	if len(m.responseTimes) > 0 {
		snapshot.AvgResponseTime = m.calculateAverage()
	}
	
	return snapshot
}

// MetricsSnapshot æŒ‡æ ‡å¿«ç…§
type MetricsSnapshot struct {
	TotalRequests   int64
	SuccessRequests int64
	FailedRequests  int64
	Elapsed         time.Duration
	RequestsPerSec  float64
	AvgResponseTime time.Duration
}
```

**15. é›†æˆåˆ° Spider** (2h)

```go
// åœ¨ Spider ä¸­æ·»åŠ 
type Spider struct {
	// ... ç°æœ‰å­—æ®µ
	metrics *Metrics
}

// åœ¨ NewSpider ä¸­åˆå§‹åŒ–
func NewSpider(cfg *config.Config) *Spider {
	spider := &Spider{
		// ... ç°æœ‰åˆå§‹åŒ–
		metrics: NewMetrics(),
	}
	return spider
}

// åœ¨ crawlURL ä¸­è®°å½•æŒ‡æ ‡
func (s *Spider) crawlURL(targetURL string) (*Result, error) {
	s.metrics.IncrementRequests()
	
	start := time.Now()
	result, err := s.staticCrawler.Crawl(parsedURL)
	elapsed := time.Since(start)
	
	s.metrics.RecordResponseTime(elapsed)
	
	if err != nil {
		s.metrics.IncrementFailure()
		return nil, err
	}
	
	s.metrics.IncrementSuccess()
	s.metrics.RecordStatusCode(result.StatusCode)
	
	return result, nil
}
```

#### ä¸‹åˆ (4å°æ—¶): å®æ—¶è¿›åº¦æ˜¾ç¤º

**16. å®ç°è¿›åº¦æ¡** (3h)

```go
// æ·»åŠ å®æ—¶è¿›åº¦æ˜¾ç¤º
func (s *Spider) ShowProgress(ctx context.Context) {
	ticker := time.NewTicker(1 * time.Second)
	defer ticker.Stop()
	
	for {
		select {
		case <-ctx.Done():
			return
		case <-ticker.C:
			snapshot := s.metrics.GetSnapshot()
			s.printProgress(snapshot)
		}
	}
}

func (s *Spider) printProgress(m *MetricsSnapshot) {
	successRate := float64(0)
	if m.TotalRequests > 0 {
		successRate = float64(m.SuccessRequests) / float64(m.TotalRequests) * 100
	}
	
	fmt.Printf("\r[è¿›åº¦] è¯·æ±‚: %d | æˆåŠŸ: %d (%.1f%%) | é€Ÿåº¦: %.1f req/s | å¹³å‡å“åº”: %v",
		m.TotalRequests,
		m.SuccessRequests,
		successRate,
		m.RequestsPerSec,
		m.AvgResponseTime)
}
```

**17. ç¼–å†™æµ‹è¯•** (1h)

```go
func TestMetrics(t *testing.T) {
	m := NewMetrics()
	
	// æ¨¡æ‹Ÿè¯·æ±‚
	m.IncrementRequests()
	m.IncrementSuccess()
	m.RecordResponseTime(100 * time.Millisecond)
	m.RecordStatusCode(200)
	
	// è·å–å¿«ç…§
	snapshot := m.GetSnapshot()
	
	assert.Equal(t, int64(1), snapshot.TotalRequests)
	assert.Equal(t, int64(1), snapshot.SuccessRequests)
}
```

---

### Day 5: å®Œå–„å’Œæµ‹è¯• (8å°æ—¶)

#### ä¸Šåˆ (4å°æ—¶): é›†æˆæµ‹è¯•

**18. ç«¯åˆ°ç«¯æµ‹è¯•** (2h)

```bash
# æµ‹è¯•æ—¥å¿— + ç›‘æ§
./spider.exe -url https://httpbin.org \
  -depth 2 \
  -log-level debug \
  -log-file spider.log \
  -show-metrics

# éªŒè¯è¾“å‡º
# åº”è¯¥çœ‹åˆ°:
# 1. å®æ—¶è¿›åº¦æ¡
# 2. æ—¥å¿—æ–‡ä»¶ç”Ÿæˆ
# 3. æœ€ç»ˆç»Ÿè®¡æŠ¥å‘Š
```

**19. æ€§èƒ½æµ‹è¯•** (2h)

```go
func BenchmarkLogging(b *testing.B) {
	logger := NewLogger(slog.LevelInfo, io.Discard)
	
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		logger.Info("test", "key", "value")
	}
}

func BenchmarkMetrics(b *testing.B) {
	m := NewMetrics()
	
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		m.IncrementRequests()
		m.RecordResponseTime(100 * time.Millisecond)
	}
}
```

#### ä¸‹åˆ (4å°æ—¶): æ–‡æ¡£å’Œå‘å¸ƒ

**20. å®Œå–„æ–‡æ¡£** (2h)

æ›´æ–° `README.md`:

```markdown
## v2.6 æ–°ç‰¹æ€§

### ç»“æ„åŒ–æ—¥å¿—

Spider v2.6 å¼•å…¥äº†å®Œæ•´çš„ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿï¼š

- âœ… æ”¯æŒå¤šçº§åˆ«æ—¥å¿—ï¼ˆDEBUG/INFO/WARN/ERRORï¼‰
- âœ… JSON æ ¼å¼è¾“å‡º
- âœ… æ–‡ä»¶å’Œæ§åˆ¶å°è¾“å‡º
- âœ… è¯·æ±‚è¿½è¸ªæ”¯æŒ

### å®æ—¶ç›‘æ§

- âœ… å®æ—¶è¿›åº¦æ¡
- âœ… è¯·æ±‚æˆåŠŸç‡
- âœ… å¹³å‡å“åº”æ—¶é—´
- âœ… çˆ¬å–é€Ÿç‡

### ä½¿ç”¨ç¤ºä¾‹

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—å’Œå®æ—¶ç›‘æ§
spider -url https://example.com \
  -log-level debug \
  -log-file spider.log \
  -show-metrics

# è¾“å‡ºç¤ºä¾‹
[è¿›åº¦] è¯·æ±‚: 145 | æˆåŠŸ: 142 (97.9%) | é€Ÿåº¦: 12.3 req/s | å¹³å‡å“åº”: 234ms
```
```

**21. æäº¤ä»£ç ** (1h)

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test -v ./...

# æ£€æŸ¥ä»£ç 
go vet ./...
golangci-lint run

# æäº¤
git add .
git commit -m "feat: æ·»åŠ ç»“æ„åŒ–æ—¥å¿—å’Œå®æ—¶ç›‘æ§ (v2.6 Week 1)

- å®ç°åŸºäº slog çš„ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ
- æ·»åŠ æ—¥å¿—çº§åˆ«æ§åˆ¶å’Œæ–‡ä»¶è¾“å‡º
- å®ç°å®æ—¶ç›‘æ§æŒ‡æ ‡
- æ·»åŠ è¿›åº¦æ¡æ˜¾ç¤º
- å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–

ç›¸å…³ Issue: #xxx"

# æ¨é€
git push origin develop/v2.6
```

**22. åˆ›å»º PR** (1h)

åˆ›å»º Pull Request:
- æ ‡é¢˜: `feat: ç»“æ„åŒ–æ—¥å¿—å’Œå®æ—¶ç›‘æ§ (v2.6 Week 1)`
- æè¿°: è¯¦ç»†è¯´æ˜æ”¹åŠ¨
- æˆªå›¾: å±•ç¤ºæ–°åŠŸèƒ½
- æµ‹è¯•: è¯´æ˜æµ‹è¯•æƒ…å†µ

---

## âœ… ç¬¬ä¸€å‘¨å®Œæˆæ£€æŸ¥æ¸…å•

### ä»£ç 

- [ ] `core/logger.go` - æ—¥å¿—æ¥å£å’Œå®ç°
- [ ] `core/metrics.go` - æŒ‡æ ‡æ”¶é›†ç³»ç»Ÿ
- [ ] æ‰€æœ‰ `fmt.Printf` æ›¿æ¢ä¸ºç»“æ„åŒ–æ—¥å¿—
- [ ] é›†æˆåˆ° Spider ä¸»æµç¨‹

### æµ‹è¯•

- [ ] `core/logger_test.go` - æ—¥å¿—æµ‹è¯•
- [ ] `core/metrics_test.go` - æŒ‡æ ‡æµ‹è¯•
- [ ] `core/spider_logging_test.go` - é›†æˆæµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•æ— æ˜æ˜¾ä¸‹é™

### æ–‡æ¡£

- [ ] README.md æ›´æ–°
- [ ] ç¤ºä¾‹ä»£ç æ·»åŠ 
- [ ] å‘½ä»¤è¡Œå¸®åŠ©æ›´æ–°

### éªŒæ”¶

```bash
# 1. ç¼–è¯‘æµ‹è¯•
go build -o spider.exe cmd/spider/main.go

# 2. åŠŸèƒ½æµ‹è¯•
./spider.exe -url https://httpbin.org -log-level debug -show-metrics

# 3. æ—¥å¿—æµ‹è¯•
./spider.exe -url https://httpbin.org -log-file spider.log
cat spider.log | jq .

# 4. å•å…ƒæµ‹è¯•
go test -v -cover ./... | grep coverage:
# æœŸæœ›: coverage: 60%+

# 5. æ€§èƒ½æµ‹è¯•
go test -bench=. -benchmem ./...
```

---

## ğŸ“Š é¢„æœŸæˆæœ

### æ—¥å¿—ç³»ç»Ÿ

**Before**:
```
å¼€å§‹çˆ¬å–URL: https://example.com
å‘ç° 42 ä¸ªé“¾æ¥
é”™è¯¯: connection timeout
```

**After**:
```json
{"timestamp":"2025-10-24 10:00:00","level":"INFO","msg":"å¼€å§‹çˆ¬å–","url":"https://example.com","depth":5}
{"timestamp":"2025-10-24 10:00:01","level":"INFO","msg":"é“¾æ¥å‘ç°å®Œæˆ","count":42,"url":"https://example.com"}
{"timestamp":"2025-10-24 10:00:02","level":"ERROR","msg":"è¯·æ±‚å¤±è´¥","error":"connection timeout","url":"https://example.com/page1"}
```

### ç›‘æ§æŒ‡æ ‡

**ç»ˆç«¯è¾“å‡º**:
```
[è¿›åº¦] è¯·æ±‚: 1247 | æˆåŠŸ: 1198 (96.1%) | é€Ÿåº¦: 15.2 req/s | å¹³å‡å“åº”: 187ms
```

**æœ€ç»ˆæŠ¥å‘Š**:
```
============================================================
                        çˆ¬å–ç»Ÿè®¡
============================================================
æ€»è¯·æ±‚æ•°:        1247
æˆåŠŸè¯·æ±‚:        1198 (96.1%)
å¤±è´¥è¯·æ±‚:        49 (3.9%)
å‘ç°URLæ•°:       2456
å‘ç°è¡¨å•æ•°:      87
å‘ç°APIæ•°:       156

æ€§èƒ½æŒ‡æ ‡:
å¹³å‡å“åº”æ—¶é—´:    187ms
P50å“åº”æ—¶é—´:     125ms
P95å“åº”æ—¶é—´:     456ms
è¯·æ±‚é€Ÿç‡:        15.2 req/s

HTTPçŠ¶æ€ç åˆ†å¸ƒ:
  200: 1156 (93.0%)
  404: 35 (2.8%)
  500: 7 (0.6%)

è¿è¡Œæ—¶é—´:        82.1ç§’
============================================================
```

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

å®Œæˆæœ¬å‘¨ä»»åŠ¡åï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… è¿è¡Œçˆ¬è™«æ—¶çœ‹åˆ°å®æ—¶è¿›åº¦
2. âœ… åœ¨æ—¥å¿—æ–‡ä»¶ä¸­çœ‹åˆ°ç»“æ„åŒ–æ—¥å¿—
3. âœ… ä½¿ç”¨ä¸åŒæ—¥å¿—çº§åˆ«æ§åˆ¶è¾“å‡º
4. âœ… æŸ¥çœ‹è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡
5. âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œè¦†ç›–ç‡ > 60%

---

## ğŸ†˜ é‡åˆ°é—®é¢˜?

### å¸¸è§é—®é¢˜

**Q: ç¼–è¯‘é”™è¯¯ "undefined: slog"**  
A: ç¡®ä¿ä½¿ç”¨ Go 1.21+ï¼Œslog æ˜¯æ ‡å‡†åº“

**Q: æµ‹è¯•è¦†ç›–ç‡ä¸å¤Ÿ**  
A: é‡ç‚¹æµ‹è¯•æ ¸å¿ƒé€»è¾‘ï¼Œå¯ä»¥è·³è¿‡ä¸€äº›ç®€å•çš„ getter/setter

**Q: æ—¥å¿—å¤ªå¤š**  
A: ä½¿ç”¨ `-log-level warn` å‡å°‘è¾“å‡º

### è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹å®Œæ•´è®¡åˆ’: `ä¸‹ä¸€æ­¥è¿­ä»£è®¡åˆ’_v3.0.md`
- ğŸ’¬ æäº¤ Issue
- ğŸ“§ è”ç³»ç»´æŠ¤è€…

---

**å¼€å§‹æ—¶é—´**: ç°åœ¨ï¼  
**é¢„è®¡å®Œæˆ**: 5ä¸ªå·¥ä½œæ—¥å  
**æ”¶ç›Š**: æå¤§æå‡å¯ç»´æŠ¤æ€§å’Œå¯è°ƒè¯•æ€§

**è®©æˆ‘ä»¬å¼€å§‹å§ï¼** ğŸš€

