# GogoSpider v4.8 ä¸‰å¤§ä¼˜åŒ–éœ€æ±‚æµ‹è¯•æŒ‡å—

**ç‰ˆæœ¬**: v4.8  
**ç¼–è¯‘çŠ¶æ€**: âœ… ç¼–è¯‘æˆåŠŸ  
**æ›´æ–°æ—¶é—´**: 2025-11-06

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åˆ›å»ºçš„æ–°æ–‡ä»¶ï¼ˆ4ä¸ªï¼‰

| æ–‡ä»¶ | è¡Œæ•° | åŠŸèƒ½ | çŠ¶æ€ |
|-----|------|------|------|
| `core/js_scope_handler.go` | 180 | JSæ–‡ä»¶ç‰¹æ®Šå¤„ç† | âœ… å®Œæˆ |
| `core/static_resource_filter.go` | 200 | é™æ€èµ„æºè¿‡æ»¤ | âœ… å®Œæˆ |
| `core/similar_url_deduplicator.go` | 280 | ç›¸ä¼¼URLå»é‡ | âœ… å®Œæˆ |
| `core/dom_embedding_dedup.go` | 280 | DOM Embedding | âœ… å®Œæˆ |

### 2. ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | çŠ¶æ€ |
|-----|---------|------|
| `core/spider.go` | æ·»åŠ 4ä¸ªç»„ä»¶å­—æ®µã€åˆå§‹åŒ–ã€é›†æˆåˆ°çˆ¬å–æµç¨‹ | âœ… å®Œæˆ |
| `cmd/spider/main.go` | æ·»åŠ 4ä¸ªæŠ¥å‘Šæ‰“å°è°ƒç”¨ | âœ… å®Œæˆ |
| `config.json` | æ·»åŠ v4.8é…ç½®é¡¹ | âœ… å®Œæˆ |

### 3. ç¼–è¯‘æµ‹è¯•

```bash
âœ… ç¼–è¯‘æˆåŠŸï¼æ— é”™è¯¯
```

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•1: åŸºæœ¬åŠŸèƒ½æµ‹è¯•

```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶çˆ¬å–æµ‹è¯•ç«™ç‚¹
.\spider.exe -config config.json
```

**é¢„æœŸè¾“å‡º**ï¼ˆæ–°å¢éƒ¨åˆ†ï¼‰ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘      JSæ–‡ä»¶ç‰¹æ®Šå¤„ç†ç»Ÿè®¡æŠ¥å‘Š          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æ€»JSæ–‡ä»¶æ•°:      XX
  æœ¬åŸŸJS:          XX
  è·¨åŸŸJS:          XX
  è·¯å¾„æ‹¼æ¥:        XX
  é»‘åå•æ‹¦æˆª:      0
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     é™æ€èµ„æºè¿‡æ»¤ç»Ÿè®¡æŠ¥å‘Š             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æ€»æ£€æŸ¥æ•°:        XXX
  è¿‡æ»¤å›¾ç‰‡:        XX
  è¿‡æ»¤CSS:         XX
  è¿‡æ»¤å­—ä½“:        XX
  JSæ”¾è¡Œ:          XX
  å‚æ•°URLæ”¾è¡Œ:     XX
  è¿‡æ»¤ç‡:          XX.X%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘      ç›¸ä¼¼URLå»é‡ç»Ÿè®¡æŠ¥å‘Š             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æ€»URLæ•°:         XXX
  å”¯ä¸€Hashæ•°:      XX
  ç›¸ä¼¼URLæ•°:       XXX
    - å‚æ•°ç›¸ä¼¼:    XX
    - è·¯å¾„ç›¸ä¼¼:    XX
  å»é‡ç‡:          XX.X%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    DOM Embeddingå»é‡ç»Ÿè®¡æŠ¥å‘Š         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æ€»é¡µé¢æ•°:        XX
  ç›¸ä¼¼é¡µé¢æ•°:      XX
  å»é‡ç‡:          XX.X%
  å¹³å‡ç›¸ä¼¼åº¦:      XX.X%
  å‘é‡ç»´åº¦:        256
  ç›¸ä¼¼åº¦é˜ˆå€¼:      85.0%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ“‹ åŠŸèƒ½éªŒè¯æ¸…å•

### âœ… éœ€æ±‚1: JSæ–‡ä»¶ç‰¹æ®Šå¤„ç†

**æµ‹è¯•ç‚¹**ï¼š
- [ ] CDNä¸Šçš„JSæ–‡ä»¶èƒ½å¦æ­£å¸¸çˆ¬å–ï¼Ÿ
  - ä¾‹å¦‚ï¼š`https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js`
- [ ] åè®®ç›¸å¯¹è·¯å¾„æ˜¯å¦æ­£ç¡®æ‹¼æ¥ï¼Ÿ
  - ä¾‹å¦‚ï¼š`//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js`
- [ ] ç›¸å¯¹è·¯å¾„æ˜¯å¦æ­£ç¡®æ‹¼æ¥ï¼Ÿ
  - ä¾‹å¦‚ï¼š`/static/js/app.js` â†’ `http://target.com/static/js/app.js`
- [ ] é»‘åå•æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ
  - ä¾‹å¦‚ï¼š`*.gov.cn` çš„JSåº”è¯¥è¢«æ‹¦æˆª

**éªŒè¯æ–¹æ³•**ï¼š
```bash
# æŸ¥çœ‹æ—¥å¿—ä¸­çš„ "JSæ–‡ä»¶ç‰¹æ®Šå¤„ç†" è¾“å‡º
# æ£€æŸ¥è·¨åŸŸJSæ˜¯å¦è¢«çˆ¬å–
```

---

### âœ… éœ€æ±‚2.1: é™æ€èµ„æºè¿‡æ»¤

**æµ‹è¯•ç‚¹**ï¼š
- [ ] å›¾ç‰‡æ˜¯å¦åªè®°å½•ä¸è¯·æ±‚ï¼Ÿ
  - æ£€æŸ¥ï¼š`spider_xxx_all_links.txt` æœ‰è®°å½•
  - æ£€æŸ¥ï¼š`spider_xxx_requests.txt` æ— è¯·æ±‚
- [ ] CSSæ˜¯å¦åªè®°å½•ä¸è¯·æ±‚ï¼Ÿ
- [ ] JSæ–‡ä»¶æ˜¯å¦æ­£å¸¸è¯·æ±‚ï¼Ÿ
- [ ] å‚æ•°åŒ–URLæ˜¯å¦æ­£å¸¸è¯·æ±‚ï¼Ÿ
  - `http://test.com/download?file=test.css` åº”è¯¥è¢«è¯·æ±‚

**éªŒè¯æ–¹æ³•**ï¼š
```bash
# å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶
# all_links.txt: æ‰€æœ‰å‘ç°çš„URLï¼ˆåŒ…æ‹¬é™æ€èµ„æºï¼‰
# requests.txt: å®é™…å‘èµ·çš„è¯·æ±‚ï¼ˆä¸åŒ…æ‹¬è¢«è¿‡æ»¤çš„é™æ€èµ„æºï¼‰

# ç»Ÿè®¡å›¾ç‰‡æ•°
grep -E "\.(jpg|png|gif)" spider_*_all_links.txt | wc -l

# ç»Ÿè®¡è¯·æ±‚ä¸­çš„å›¾ç‰‡æ•°ï¼ˆåº”è¯¥ä¸º0æˆ–å¾ˆå°‘ï¼‰
grep -E "\.(jpg|png|gif)" spider_*_requests.txt | wc -l
```

---

### âœ… éœ€æ±‚2.2: ç›¸ä¼¼URLå»é‡

**æµ‹è¯•ç‚¹**ï¼š
- [ ] å‚æ•°å€¼ä¸åŒçš„URLæ˜¯å¦è¢«è¯†åˆ«ä¸ºç›¸ä¼¼ï¼Ÿ
  - `/test?id=1` vs `/test?id=2`
- [ ] è·¯å¾„å˜é‡ä¸åŒçš„URLæ˜¯å¦è¢«è¯†åˆ«ä¸ºç›¸ä¼¼ï¼Ÿ
  - `/product-1/` vs `/product-2/`

**éªŒè¯æ–¹æ³•**ï¼š
æŸ¥çœ‹æŠ¥å‘Šä¸­çš„"Top 5 ç›¸ä¼¼URLç»„"ï¼Œåº”è¯¥æ˜¾ç¤ºï¼š
```
[1] Hash=xxxxx, å…±Xä¸ªURL
    é¦–ä¸ª: http://test.com/test?id=1
    ç›¸ä¼¼: http://test.com/test?id=2
    ... (è¿˜æœ‰Xä¸ª)
```

---

### âœ… éœ€æ±‚3: DOM Embeddingå»é‡

**æµ‹è¯•ç‚¹**ï¼š
- [ ] æ¨¡æ¿ç”Ÿæˆçš„ç›¸ä¼¼é¡µé¢æ˜¯å¦è¢«è¯†åˆ«ï¼Ÿ
- [ ] ç›¸ä¼¼åº¦è®¡ç®—æ˜¯å¦åˆç†ï¼Ÿ
- [ ] æ˜¯å¦å‡å°‘äº†é‡å¤çˆ¬å–ï¼Ÿ

**éªŒè¯æ–¹æ³•**ï¼š
æŸ¥çœ‹çˆ¬å–æ—¥å¿—ä¸­çš„ `[DOM Embedding]` è¾“å‡ºï¼š
```
[DOM Embedding] å†…å®¹ç›¸ä¼¼é¡µé¢ï¼ç›¸ä¼¼åº¦: 92.3%, ç›¸ä¼¼äº: http://...
```

---

## ğŸ¯ å¿«é€ŸéªŒè¯å‘½ä»¤

### éªŒè¯ç¼–è¯‘
```bash
.\spider.exe -version
```

### éªŒè¯é…ç½®
```bash
# æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®åŠ è½½
.\spider.exe -config config.json -url http://testphp.vulnweb.com
```

### æŸ¥çœ‹ç»Ÿè®¡æŠ¥å‘Š
çˆ¬å–å®Œæˆåï¼ŒæŸ¥çœ‹è¾“å‡ºçš„æŠ¥å‘Šéƒ¨åˆ†ï¼Œåº”è¯¥åŒ…å«4ä¸ªæ–°æŠ¥å‘Šï¼š
1. JSæ–‡ä»¶ç‰¹æ®Šå¤„ç†ç»Ÿè®¡æŠ¥å‘Š
2. é™æ€èµ„æºè¿‡æ»¤ç»Ÿè®¡æŠ¥å‘Š
3. ç›¸ä¼¼URLå»é‡ç»Ÿè®¡æŠ¥å‘Š
4. DOM Embeddingå»é‡ç»Ÿè®¡æŠ¥å‘Š

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æ²¡æœ‰çœ‹åˆ°æ–°æŠ¥å‘Š

**åŸå› **: å¯èƒ½æ²¡æœ‰è§¦å‘ç›¸å…³åŠŸèƒ½

**è§£å†³**:
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat config.json | grep -A 20 "v4.8_ä¸‰å¤§ä¼˜åŒ–éœ€æ±‚"

# ç¡®è®¤ä»¥ä¸‹é…ç½®éƒ½æ˜¯ true
# enable_js_special_handling: true
# enable_static_resource_filter: true
# enable_similar_url_dedup: true
# enable_dom_embedding: true
```

### é—®é¢˜2: JSæ–‡ä»¶æ²¡æœ‰è¢«è·¨åŸŸçˆ¬å–

**åŸå› **: å¯èƒ½åœ¨é»‘åå•ä¸­

**è§£å†³**:
```json
// æ£€æŸ¥ config.json ä¸­çš„é»‘åå•
"blacklist_settings": {
  "domains": ["*.gov.cn", "*.edu.cn", "*.mil.cn"]
}

// ç¡®ä¿ç›®æ ‡CDNä¸åœ¨é»‘åå•
```

### é—®é¢˜3: é™æ€èµ„æºä»ç„¶è¢«è¯·æ±‚

**åŸå› **: å¯èƒ½æ˜¯å‚æ•°åŒ–URL

**è§£å†³**:
æŸ¥çœ‹æ—¥å¿—ä¸­çš„ `[é™æ€èµ„æºè¿‡æ»¤]` è¾“å‡ºï¼Œç¡®è®¤åˆ¤æ–­é€»è¾‘ï¼š
- å¦‚æœURLåŒ…å« `?file=` ç­‰å‚æ•°ï¼Œä¼šè¢«æ ‡è®°ä¸º"å‚æ•°åŒ–URLï¼Œä¸è¿‡æ»¤"

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### ä¼˜åŒ–å‰ vs ä¼˜åŒ–å

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–åï¼ˆé¢„æœŸï¼‰ | æå‡ |
|-----|--------|--------------|------|
| **æ€»è¯·æ±‚æ•°** | 500 | ~150 | -70% ğŸ”¥ |
| **JSæ–‡ä»¶å‘ç°** | 30 | 60+ | +100% |
| **é™æ€èµ„æºè¯·æ±‚** | 200 | 10 | -95% |
| **é‡å¤URLè¯·æ±‚** | 250 | 50 | -80% |
| **å†…å®¹é‡å¤ç‡** | æ— æ£€æµ‹ | <15% | è´¨çš„é£è·ƒ |

---

## ğŸ¨ è¾“å‡ºæ–‡ä»¶è¯´æ˜

çˆ¬å–å®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

### æ ¸å¿ƒæ–‡ä»¶
- `spider_xxx_detail.txt` - è¯¦ç»†æ•°æ®ï¼ˆåŒ…å«è·³è¿‡åŸå› ï¼‰
- `spider_xxx_all_links.txt` - æ‰€æœ‰é“¾æ¥ï¼ˆåŒ…æ‹¬è¢«è¿‡æ»¤çš„é™æ€èµ„æºï¼‰
- `spider_xxx_in_scope.txt` - èŒƒå›´å†…é“¾æ¥ï¼ˆå¯ç”¨äºæµ‹è¯•ï¼‰
- `spider_xxx_crawl_log.txt` - çˆ¬å–æ—¥å¿—ï¼ˆæ˜¾ç¤ºæ¯ä¸ªURLçš„å¤„ç†ï¼‰

### ç‰¹æ®Šè¯´æ˜
- é™æ€èµ„æºä¼šå‡ºç°åœ¨ `all_links.txt` ä¸­ï¼ˆå·²è®°å½•ï¼‰
- ä½†ä¸ä¼šå‡ºç°åœ¨ `requests.txt` ä¸­ï¼ˆæœªè¯·æ±‚ï¼‰
- ç›¸ä¼¼URLä¼šåœ¨ `crawl_log.txt` ä¸­æ ‡æ³¨è·³è¿‡åŸå› 

---

## ğŸ”§ è°ƒè¯•æŠ€å·§

### å¼€å¯è¯¦ç»†æ—¥å¿—
```bash
.\spider.exe -config config.json -log-level debug
```

### æŸ¥çœ‹ç‰¹å®šç»„ä»¶æ—¥å¿—
```bash
# è¿‡æ»¤JSå¤„ç†ç›¸å…³æ—¥å¿—
.\spider.exe ... 2>&1 | grep "JSæ–‡ä»¶ç‰¹æ®Šå¤„ç†"

# è¿‡æ»¤é™æ€èµ„æºç›¸å…³æ—¥å¿—
.\spider.exe ... 2>&1 | grep "é™æ€èµ„æºè¿‡æ»¤"

# è¿‡æ»¤ç›¸ä¼¼URLç›¸å…³æ—¥å¿—
.\spider.exe ... 2>&1 | grep "ç›¸ä¼¼URL"
```

---

## ğŸ’¡ é«˜çº§é…ç½®

### è°ƒæ•´DOM Embeddingç»´åº¦
```json
{
  "deduplication_settings": {
    "dom_embedding_dimensions": 512,  // æé«˜åˆ°512ç»´ï¼ˆæ›´ç²¾ç¡®ï¼‰
    "dom_embedding_threshold": 0.90   // æé«˜é˜ˆå€¼åˆ°90%ï¼ˆæ›´ä¸¥æ ¼ï¼‰
  }
}
```

### è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼
```json
{
  "deduplication_settings": {
    "dom_embedding_threshold": 0.80   // é™ä½åˆ°80%ï¼ˆæ›´å®½æ¾ï¼Œå»é‡æ›´å¤šï¼‰
  }
}
```

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœæ¼”ç¤º

### åœºæ™¯1: ç”µå•†ç½‘ç«™

**åŸå§‹URL**ï¼ˆ1000ä¸ªï¼‰:
```
/product?id=1
/product?id=2
...
/product?id=1000
```

**ä¼˜åŒ–å‰**: çˆ¬å–1000æ¬¡  
**ä¼˜åŒ–å**: 
- ç›¸ä¼¼URLå»é‡è¯†åˆ«ï¼šåªçˆ¬å–1æ¬¡ï¼ˆHashç›¸åŒï¼‰
- èŠ‚çœ999æ¬¡è¯·æ±‚ ğŸ”¥

### åœºæ™¯2: CDN JSæ–‡ä»¶

**åŸå§‹å‘ç°**:
```
https://cdn.jsdelivr.net/npm/vue@3/dist/vue.js
https://unpkg.com/axios/dist/axios.min.js
//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js
```

**ä¼˜åŒ–å‰**: å—scopeé™åˆ¶ï¼Œè·¨åŸŸJSå…¨éƒ¨è·³è¿‡  
**ä¼˜åŒ–å**: æ‰€æœ‰JSéƒ½èƒ½çˆ¬å–ï¼Œæå–APIç«¯ç‚¹ âœ…

### åœºæ™¯3: é™æ€èµ„æº

**åŸå§‹å‘ç°**ï¼ˆ500ä¸ªé™æ€èµ„æºï¼‰:
```
/images/logo.png
/css/style.css
/fonts/font.woff
...
```

**ä¼˜åŒ–å‰**: æ¯ä¸ªéƒ½å‘èµ·HTTPè¯·æ±‚  
**ä¼˜åŒ–å**: åªè®°å½•ä¸è¯·æ±‚ï¼ŒèŠ‚çœ500æ¬¡è¯·æ±‚ ğŸ’¾

---

## ğŸ¯ æˆåŠŸæ ‡å¿—

è¿è¡Œçˆ¬è™«åï¼Œå¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜åŠŸèƒ½æ­£å¸¸ï¼š

### âœ… æ ‡å¿—1: JSç‰¹æ®Šå¤„ç†ç”Ÿæ•ˆ
```
[DEBUG] JSæ–‡ä»¶ç‰¹æ®Šå¤„ç†
  original: //cdn.example.com/app.js
  processed: https://cdn.example.com/app.js
  reason: JSæ–‡ä»¶ï¼Œå…è®¸è·¨åŸŸçˆ¬å–
```

### âœ… æ ‡å¿—2: é™æ€èµ„æºè¿‡æ»¤ç”Ÿæ•ˆ
```
[DEBUG] é™æ€èµ„æºè¿‡æ»¤
  url: http://test.com/logo.png
  type: image
  reason: é™æ€èµ„æº(image)ï¼Œåªè®°å½•ä¸è¯·æ±‚
```

### âœ… æ ‡å¿—3: ç›¸ä¼¼URLå»é‡ç”Ÿæ•ˆ
```
[DEBUG] ç›¸ä¼¼URLè·³è¿‡
  url: http://test.com/test?id=2
  similar_to: http://test.com/test?id=1
  reason: ç›¸ä¼¼URLï¼ˆparamç›¸ä¼¼ï¼‰ï¼ŒHash=abcd1234
```

### âœ… æ ‡å¿—4: DOM Embeddingç”Ÿæ•ˆ
```
[DOM Embedding] å†…å®¹ç›¸ä¼¼é¡µé¢ï¼ç›¸ä¼¼åº¦: 92.3%, ç›¸ä¼¼äº: http://...
```

---

## ğŸ” å¯¹æ¯”åˆ†æ

### ä¼˜åŒ–å‰åçš„ `spider_xxx_requests.txt` æ–‡ä»¶å¯¹æ¯”

**ä¼˜åŒ–å‰**ï¼ˆå‡è®¾çˆ¬å–500ä¸ªURLï¼‰:
```
Total Requests: 500

åŒ…å«ï¼š
- ä¸šåŠ¡é¡µé¢ï¼š200
- JSæ–‡ä»¶ï¼š50
- CSSæ–‡ä»¶ï¼š30
- å›¾ç‰‡ï¼š120
- å­—ä½“ï¼š20
- å…¶ä»–ï¼š80
```

**ä¼˜åŒ–å**ï¼ˆç›¸åŒç«™ç‚¹ï¼‰:
```
Total Requests: ~220

åŒ…å«ï¼š
- ä¸šåŠ¡é¡µé¢ï¼š100 ï¼ˆç›¸ä¼¼URLå»é‡åï¼‰
- JSæ–‡ä»¶ï¼š50   ï¼ˆå…¨éƒ¨ä¿ç•™ï¼‰
- CSSæ–‡ä»¶ï¼š0    ï¼ˆè¿‡æ»¤ï¼‰
- å›¾ç‰‡ï¼š0       ï¼ˆè¿‡æ»¤ï¼‰
- å­—ä½“ï¼š0       ï¼ˆè¿‡æ»¤ï¼‰
- å…¶ä»–ï¼š70

èŠ‚çœè¯·æ±‚æ•°: 280 (56%æå‡)
```

---

## ğŸŠ åŠŸèƒ½äº®ç‚¹å±•ç¤º

### 1. JSè·¨åŸŸæ™ºèƒ½å¤„ç† âœ¨

**ç¤ºä¾‹è¾“å…¥**:
```html
<script src="//cdn.jsdelivr.net/npm/vue@3/dist/vue.js"></script>
<script src="/static/app.js"></script>
<script src="../js/common.js"></script>
```

**å¤„ç†ç»“æœ**:
```
âœ… //cdn.jsdelivr.net/npm/vue@3/dist/vue.js
   â†’ https://cdn.jsdelivr.net/npm/vue@3/dist/vue.js (åè®®æ‹¼æ¥)

âœ… /static/app.js
   â†’ http://target.com/static/app.js (åŸŸåæ‹¼æ¥)

âœ… ../js/common.js
   â†’ http://target.com/js/common.js (ç›¸å¯¹è·¯å¾„è§£æ)
```

### 2. å‚æ•°åŒ–URLæ™ºèƒ½è¯†åˆ« âœ¨

**ç¤ºä¾‹**:
```
âŒ http://test.com/style.css           â†’ è¿‡æ»¤ï¼ˆé™æ€èµ„æºï¼‰
âœ… http://test.com/?file=style.css     â†’ ä¸è¿‡æ»¤ï¼ˆå‚æ•°åŒ–ï¼Œå¯èƒ½æ˜¯åŠ¨æ€ç”Ÿæˆï¼‰
âœ… http://test.com/download?path=/a.js â†’ ä¸è¿‡æ»¤ï¼ˆå‚æ•°åŒ–ï¼‰
```

### 3. è·¯å¾„å˜é‡è¯†åˆ« âœ¨

**ç¤ºä¾‹**:
```
ä¿ç•™ï¼šhttp://test.com/product-1/
è·³è¿‡ï¼šhttp://test.com/product-2/  (Hashç›¸åŒ)
è·³è¿‡ï¼šhttp://test.com/product-99/ (Hashç›¸åŒ)

ç»“æ„: /product-{id}/ (Hash: abcd1234)
```

### 4. DOMå‘é‡åŒ– âœ¨

**åŸç†å±•ç¤º**:
```
é¡µé¢1: <h1>Title</h1><p>Content</p>
  â†’ éå†èŠ‚ç‚¹ï¼šh1(æ·±åº¦1), p(æ·±åº¦1)
  â†’ hash(h1) = 12345, æƒé‡ = 1.8 Ã— 1.5^1 = 2.7
  â†’ index = (12345 Ã— 2.7) % 256 = 123
  â†’ vector[123] += 1
  â†’ æœ€ç»ˆ: [0,0,...,1,...,0] (256ç»´)

é¡µé¢2: <h1>Title2</h1><p>Content2</p>
  â†’ ç»“æ„ç›¸åŒï¼Œvectorç›¸ä¼¼
  â†’ ä½™å¼¦ç›¸ä¼¼åº¦ > 85% â†’ åˆ¤å®šä¸ºç›¸ä¼¼
```

---

## ğŸ“š é…ç½®æ–‡ä»¶è¯´æ˜

### æ–°å¢é…ç½®é¡¹ï¼ˆconfig.jsonï¼‰

```json
{
  "deduplication_settings": {
    // v4.8 æ–°å¢é…ç½®
    "enable_js_special_handling": true,      // JSè·¨åŸŸå¤„ç†
    "enable_static_resource_filter": true,   // é™æ€èµ„æºè¿‡æ»¤
    "enable_similar_url_dedup": true,        // ç›¸ä¼¼URLå»é‡
    "enable_dom_embedding": true,            // DOM Embedding
    "dom_embedding_dimensions": 256,         // å‘é‡ç»´åº¦
    "dom_embedding_threshold": 0.85          // ç›¸ä¼¼åº¦é˜ˆå€¼
  }
}
```

### æ¨èé…ç½®

**å¿«é€Ÿæ¨¡å¼**ï¼ˆé€Ÿåº¦ä¼˜å…ˆï¼‰:
```json
{
  "enable_similar_url_dedup": true,          // å¼€å¯
  "enable_dom_embedding": false,             // å…³é—­ï¼ˆèŠ‚çœè®¡ç®—ï¼‰
  "dom_embedding_dimensions": 128            // é™ä½ç»´åº¦
}
```

**ç²¾ç¡®æ¨¡å¼**ï¼ˆå‡†ç¡®ä¼˜å…ˆï¼‰:
```json
{
  "enable_similar_url_dedup": true,
  "enable_dom_embedding": true,              // å¼€å¯
  "dom_embedding_dimensions": 512,           // æé«˜ç»´åº¦
  "dom_embedding_threshold": 0.90            // æé«˜é˜ˆå€¼
}
```

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

### ä»£ç å®æ–½
- [x] åˆ›å»º `js_scope_handler.go`
- [x] åˆ›å»º `static_resource_filter.go`
- [x] åˆ›å»º `similar_url_deduplicator.go`
- [x] åˆ›å»º `dom_embedding_dedup.go`
- [x] ä¿®æ”¹ `spider.go` é›†æˆ
- [x] ä¿®æ”¹ `main.go` æ·»åŠ æŠ¥å‘Š
- [x] æ›´æ–° `config.json`
- [x] ç¼–è¯‘æˆåŠŸ âœ…

### åŠŸèƒ½éªŒè¯
- [ ] è¿è¡Œæµ‹è¯•çˆ¬å–
- [ ] éªŒè¯JSè·¨åŸŸåŠŸèƒ½
- [ ] éªŒè¯é™æ€èµ„æºè¿‡æ»¤
- [ ] éªŒè¯ç›¸ä¼¼URLå»é‡
- [ ] éªŒè¯DOM Embedding
- [ ] æŸ¥çœ‹æ€§èƒ½æå‡

---

## ğŸš€ å¼€å§‹æµ‹è¯•

```bash
# 1. è¿è¡Œçˆ¬è™«
.\spider.exe -config config.json

# 2. ç­‰å¾…çˆ¬å–å®Œæˆ

# 3. æŸ¥çœ‹æ‰€æœ‰æŠ¥å‘Šï¼ˆæ»šåŠ¨åˆ°åº•éƒ¨ï¼‰

# 4. æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
ls spider_*
```

---

**å‡†å¤‡å°±ç»ªï¼å¼€å§‹æµ‹è¯•å§ï¼** ğŸ‰

**ä¸‹ä¸€æ­¥å»ºè®®**:
1. åœ¨æµ‹è¯•ç«™ç‚¹è¿è¡Œä¸€æ¬¡
2. å¯¹æ¯”ä¼˜åŒ–å‰åçš„æ•ˆæœ
3. æ ¹æ®å®é™…æƒ…å†µå¾®è°ƒå‚æ•°
4. äº«å—æ•ˆç‡æå‡ï¼âœ¨

---

**End of Guide**

