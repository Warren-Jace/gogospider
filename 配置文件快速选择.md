# Spider Ultimate 配置文件快速选择指南

## 🎯 快速选择（30秒决策）

### 我的需求是...

| 如果你想... | 使用配置 | 命令 |
|-----------|---------|------|
| **快速了解网站结构** | `config_fast.json` | `.\spider.exe -config config_fast.json` |
| **深度挖掘漏洞** | `config_thorough.json` | `.\spider.exe -config config_thorough.json` |
| **配合Burp测试** | `config_burp.json` | `.\spider.exe -config config_burp.json` |
| **测试API接口** | `config_api.json` | `.\spider.exe -config config_api.json` |
| **绕过反爬虫** | `config_stealth.json` | `.\spider.exe -config config_stealth.json` |
| **日常通用测试** | `config.json` | `.\spider.exe -config config.json` |
| **学习所有选项** | `config_detailed.json` | `.\spider.exe -config config_detailed.json` |

---

## 📊 配置对比一览表

| 特性 | config.json | config_fast | config_thorough | config_burp | config_api | config_stealth |
|------|------------|-------------|-----------------|-------------|------------|----------------|
| **速度** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐ |
| **覆盖率** | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **隐蔽性** | ⭐⭐⭐ | ⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **最大深度** | 5层 | 3层 | 7层 | 5层 | 4层 | 4层 |
| **静态爬虫** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **动态爬虫** | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ |
| **参数爆破** | ✅ | ❌ | ✅✅ | ✅ | ✅ | ❌ |
| **请求延迟** | 500ms | 100ms | 800ms | 300ms | 200ms | 2000ms |
| **代理支持** | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ |
| **日志级别** | INFO | WARN | DEBUG | INFO | INFO | WARN |

---

## 🎨 使用场景矩阵

### 按目标类型选择

```
网站类型              推荐配置
─────────────────────────────────
电商网站            → config_thorough.json
企业官网            → config.json
API服务             → config_api.json
SaaS平台            → config_thorough.json
个人博客            → config_fast.json
大型门户            → config_fast.json
```

### 按测试目的选择

```
测试目的              推荐配置
─────────────────────────────────
漏洞挖掘            → config_thorough.json
资产盘点            → config_fast.json
渗透测试            → config_burp.json
API测试             → config_api.json
自动化扫描          → config.json
绕过WAF             → config_stealth.json
```

### 按时间预算选择

```
可用时间              推荐配置              预计耗时
────────────────────────────────────────────────
5-10分钟           → config_fast.json      5-8分钟
15-30分钟          → config.json           12-20分钟
30-60分钟          → config_thorough.json  30-50分钟
不限时间            → config_thorough.json  视网站规模
```

---

## 💡 典型工作流

### 工作流1: 快速评估 → 深度测试

```powershell
# 第1步: 快速扫描（5分钟）
.\spider.exe -config config_fast.json

# 第2步: 查看结果
cat spider_*_urls.txt | wc -l

# 第3步: 决定是否深入
# 如果发现有价值的目标，进行深度测试
.\spider.exe -config config_thorough.json
```

### 工作流2: Spider → Burp → 手动测试

```powershell
# 第1步: 启动Burp Suite
# 确保监听在 127.0.0.1:8080

# 第2步: Spider发现所有URL
.\spider.exe -config config_burp.json

# 第3步: 在Burp中查看
# Proxy > HTTP History
# 选择感兴趣的请求 → Send to Repeater

# 第4步: 手动测试漏洞
# 在Repeater中修改参数测试
```

### 工作流3: 批量扫描

```powershell
# 准备目标列表
@"
http://target1.com
http://target2.com
http://target3.com
"@ | Out-File targets.txt

# 批量快速扫描
Get-Content targets.txt | ForEach-Object {
    Write-Host "扫描: $_"
    # 临时修改配置
    $config = Get-Content config_fast.json | ConvertFrom-Json
    $config.target_url = $_
    $config | ConvertTo-Json -Depth 10 | Set-Content temp.json
    
    # 运行
    .\spider.exe -config temp.json
}

# 清理
Remove-Item temp.json
```

---

## 🔍 配置详细对比

### config_fast.json vs config_thorough.json

| 项目 | Fast（快速） | Thorough（全面） | 差异 |
|------|------------|-----------------|------|
| **适用场景** | 资产盘点 | 漏洞挖掘 | - |
| **爬取深度** | 3层 | 7层 | +133% |
| **动态爬虫** | ❌ | ✅ | - |
| **参数爆破** | ❌ | 200/100 | - |
| **请求延迟** | 100ms | 800ms | +700% |
| **去重阈值** | 90% | 75% | -15% |
| **预计速度** | 15-20页/s | 2-3页/s | -83% |
| **预计耗时** | 5分钟 | 40分钟 | +700% |
| **URL发现** | 基础 | 最全 | +50-100% |

**选择建议**:
- ⏱️ **时间有限** → Fast
- 🎯 **追求全面** → Thorough
- 🔄 **先Fast后Thorough** → 最佳实践

---

## 🎓 进阶技巧

### 1. 组合使用配置

```powershell
# 先快速扫描
.\spider.exe -config config_fast.json
# 输出: 发现 65 个URL

# 分析结果，发现有AJAX
# 使用全面模式重新扫描
.\spider.exe -config config_thorough.json
# 输出: 发现 127 个URL（+95%）
```

### 2. 动态调整配置

```powershell
# 根据网站规模动态选择
$url = "http://example.com"
$test_result = .\spider.exe -url $url -depth 1 -simple

if ($test_result.Count -lt 50) {
    # 小网站，用全面配置
    .\spider.exe -config config_thorough.json
} else {
    # 大网站，用快速配置
    .\spider.exe -config config_fast.json
}
```

### 3. 自定义混合配置

```powershell
# 复制基础配置
Copy-Item config_fast.json my_config.json

# 根据需要修改
# 例如：快速扫描 + 启用参数爆破
(Get-Content my_config.json | ConvertFrom-Json) | 
    ForEach-Object {
        $_.strategy_settings.enable_param_fuzzing = $true
        $_.strategy_settings.param_fuzz_limit = 50
        $_
    } | ConvertTo-Json -Depth 10 | Set-Content my_config.json

# 使用自定义配置
.\spider.exe -config my_config.json
```

---

## 📋 决策流程图

```
开始
  ↓
是否有Burp Suite？
  ├─ 是 → config_burp.json
  ↓
  └─ 否
      ↓
    目标是API吗？
      ├─ 是 → config_api.json
      ↓
      └─ 否
          ↓
        网站有严格反爬虫？
          ├─ 是 → config_stealth.json
          ↓
          └─ 否
              ↓
            时间充裕吗（>30分钟）？
              ├─ 是 → config_thorough.json
              ↓
              └─ 否
                  ↓
                时间很紧（<10分钟）？
                  ├─ 是 → config_fast.json
                  ↓
                  └─ 否 → config.json
```

---

## 🎯 实战示例

### 示例1: 测试DVWA

```powershell
# 场景: 漏洞演练平台，需要全面测试
# 配置: config_thorough.json

# 1. 登录获取Cookie
# 2. 保存Cookie
echo "PHPSESSID=xxx; security=low" > dvwa_cookie.txt

# 3. 运行爬虫
.\spider.exe -config config_thorough.json `
  -cookie-file dvwa_cookie.txt

# 预期: 发现所有漏洞页面和表单
```

### 示例2: 测试生产API

```powershell
# 场景: 生产环境API，需要隐蔽
# 配置: config_stealth.json

# 修改为API目标
$config = Get-Content config_api.json | ConvertFrom-Json
$config.target_url = "https://api.production.com"
$config.anti_detection_settings.request_delay = "2s"
$config | ConvertTo-Json -Depth 10 | Set-Content prod_api.json

.\spider.exe -config prod_api.json

# 预期: 发现API端点，不触发告警
```

### 示例3: 批量资产盘点

```powershell
# 场景: 100个子域名快速盘点
# 配置: config_fast.json

Get-Content subdomains.txt | ForEach-Object {
    $domain = $_
    Write-Host "[*] 扫描: $domain"
    
    # 使用快速配置
    .\spider.exe -url "http://$domain" `
      -mode static `
      -depth 2 `
      -simple `
      -format urls-only > "${domain}_urls.txt"
}

# 预期: 30分钟完成100个域名
```

---

## ✅ 检查清单

### 使用配置文件前

- [ ] 确认目标URL
- [ ] 选择合适的配置文件
- [ ] 检查是否需要Cookie
- [ ] 确认是否使用代理
- [ ] 评估预期耗时

### 运行中

- [ ] 观察日志输出
- [ ] 监控请求速度
- [ ] 检查是否被拦截
- [ ] 适时调整配置

### 完成后

- [ ] 查看输出文件
- [ ] 分析URL数量
- [ ] 检查覆盖率
- [ ] 决定是否需要重新扫描

---

## 🎊 总结

### 配置文件优化成果

✅ **7个专业配置** - 覆盖所有场景  
✅ **开箱即用** - 无需修改  
✅ **详细注释** - 易于理解  
✅ **性能优化** - 针对性调优  
✅ **灵活组合** - 可自由定制  

### 推荐使用顺序

1. **首次使用** → `config_fast.json`（了解程序）
2. **日常测试** → `config.json`（平衡配置）
3. **深度挖掘** → `config_thorough.json`（全面覆盖）
4. **配合工具** → `config_burp.json`（配合Burp）

### 立即开始

```powershell
# 选择你的场景，复制命令即可运行
.\spider.exe -config config_fast.json        # 快速
.\spider.exe -config config.json             # 默认
.\spider.exe -config config_thorough.json    # 全面
.\spider.exe -config config_burp.json        # Burp
```

---

**配置文件已全面优化，选择即用！** 🚀

