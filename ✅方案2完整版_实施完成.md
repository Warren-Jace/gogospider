# âœ… æ–¹æ¡ˆ2ï¼ˆå®Œæ•´ç‰ˆï¼‰å®æ–½å®ŒæˆæŠ¥å‘Š

## ä¸€ã€å®æ–½æ–¹æ¡ˆæ¦‚è¿°

å·²æˆåŠŸå®æ–½**æ–¹æ¡ˆ2ï¼šå®Œæ•´ç‰ˆ**ï¼Œå®ç°äº†ï¼š
1. ä¿®æ”¹Crawleræ¥å£ï¼Œæ·»åŠ SetSpider()æ–¹æ³•
2. åœ¨åˆ›å»ºçˆ¬è™«æ—¶æ³¨å…¥Spiderå¼•ç”¨
3. åœ¨å‘ç°é“¾æ¥æ—¶ç«‹å³åˆ†ç±»è®°å½•
4. æ›´å®æ—¶ã€æ›´å®Œæ•´çš„URLè®°å½•åŠŸèƒ½

---

## äºŒã€æ ¸å¿ƒä¿®æ”¹å†…å®¹

### 2.1 æ¥å£å®šä¹‰ï¼ˆcore/crawler.goï¼‰

#### æ–°å¢Spiderè®°å½•æ¥å£
```go
// SpiderRecorder Spiderè®°å½•æ¥å£ï¼ˆé¿å…å¾ªç¯å¼•ç”¨ï¼‰
type SpiderRecorder interface {
    RecordStaticResource(url string, resourceType ResourceType)
    RecordSpecialLink(url string, protocol string)
    RecordBlacklistedURL(url string)
    GetResourceClassifier() *ResourceClassifier
}
```

#### æ‰©å±•Crawleræ¥å£
```go
type Crawler interface {
    Crawl(url *url.URL) (*Result, error)
    Configure(config *config.Config)
    Stop()
    SetSpider(spider SpiderRecorder)  // ğŸ†• æ–°å¢æ–¹æ³•
}
```

### 2.2 Spiderå®ç°ï¼ˆcore/spider.goï¼‰

#### æ–°å¢æ•°æ®ç»“æ„
```go
type StaticResources struct {
    Images    []string  // å›¾ç‰‡èµ„æº
    Videos    []string  // è§†é¢‘èµ„æº
    Audios    []string  // éŸ³é¢‘èµ„æº
    Fonts     []string  // å­—ä½“èµ„æº
    Documents []string  // æ–‡æ¡£èµ„æº
    Archives  []string  // å‹ç¼©åŒ…èµ„æº
}

type SpecialLinks struct {
    Mailto    []string  // mailto:é“¾æ¥
    Tel       []string  // tel:é“¾æ¥
    WebSocket []string  // ws/wss:é“¾æ¥
    FTP       []string  // ftp:é“¾æ¥
    Data      []string  // data:é“¾æ¥
}
```

#### Spiderç»“æ„ä½“æ–°å¢å­—æ®µ
```go
type Spider struct {
    // ... ç°æœ‰å­—æ®µ
    
    // ğŸ†• v3.7 æ–°å¢å­—æ®µ
    staticResources   StaticResources  // é™æ€èµ„æºåˆ†ç±»
    blacklistedURLs   []string         // é»‘åå•URL
    specialLinks      SpecialLinks     // ç‰¹æ®Šåè®®é“¾æ¥
}
```

#### æ–°å¢å…¬å¼€æ–¹æ³•
```go
// å®ç°SpiderRecorderæ¥å£
GetResourceClassifier() *ResourceClassifier
RecordStaticResource(url, resourceType)
RecordSpecialLink(url, protocol)
RecordBlacklistedURL(url)

// è·å–æ”¶é›†çš„URL
GetExternalLinks() []string
GetStaticResources() StaticResources
GetBlacklistedURLs() []string
GetSpecialProtocolLinks() SpecialLinks
```

#### æ³¨å…¥Spiderå¼•ç”¨
åœ¨`Start()`æ–¹æ³•ä¸­æ·»åŠ ï¼š
```go
// ğŸ†• v3.7: ä¸ºçˆ¬è™«æ³¨å…¥Spiderå¼•ç”¨ï¼ˆç”¨äºå®æ—¶è®°å½•URLï¼‰
s.staticCrawler.SetSpider(s)
s.dynamicCrawler.SetSpider(s)
```

### 2.3 é™æ€çˆ¬è™«å®ç°ï¼ˆcore/static_crawler.goï¼‰

#### æ–°å¢å­—æ®µ
```go
type StaticCrawlerImpl struct {
    // ... ç°æœ‰å­—æ®µ
    spider SpiderRecorder  // ğŸ†• v3.7 Spiderå¼•ç”¨
}
```

#### å®ç°SetSpideræ–¹æ³•
```go
func (s *StaticCrawlerImpl) SetSpider(spider SpiderRecorder) {
    s.spider = spider
}
```

#### åœ¨é“¾æ¥æå–æ—¶å®æ—¶è®°å½•

**1. ç‰¹æ®Šåè®®é“¾æ¥è®°å½•**
```go
collector.OnHTML("a[href]", func(e *colly.HTMLElement) {
    link := e.Attr("href")
    
    // ğŸ†• v3.7: æ£€æŸ¥ç‰¹æ®Šåè®®é“¾æ¥å¹¶è®°å½•
    if strings.HasPrefix(link, "mailto:") {
        if s.spider != nil {
            s.spider.RecordSpecialLink(link, "mailto")
        }
        return
    }
    if strings.HasPrefix(link, "tel:") {
        if s.spider != nil {
            s.spider.RecordSpecialLink(link, "tel")
        }
        return
    }
    // ... å…¶ä»–ç‰¹æ®Šåè®®ï¼ˆftp, ws, wss, dataï¼‰
    
    // ... ç»§ç»­æ­£å¸¸çš„URLå¤„ç†
})
```

**2. é™æ€èµ„æºåˆ†ç±»è®°å½•**
```go
// åœ¨å¤„ç†é“¾æ¥æ—¶ï¼Œä½¿ç”¨èµ„æºåˆ†ç±»å™¨åˆ¤æ–­
if s.spider != nil {
    classifier := s.spider.GetResourceClassifier()
    if classifier != nil {
        resourceType, shouldRequest := classifier.ClassifyURL(absoluteURL)
        
        if !shouldRequest {
            // é™æ€èµ„æºï¼šåªè®°å½•ä¸è¯·æ±‚
            s.spider.RecordStaticResource(absoluteURL, resourceType)
            return  // è·³è¿‡è¿™ä¸ªURLï¼Œä¸åŠ å…¥çˆ¬å–é˜Ÿåˆ—
        }
    }
}
```

**3. èµ„æºæ ‡ç­¾å›è°ƒå¢å¼º**
```go
// ğŸ†• v3.7: è®¾ç½®èµ„æºå›è°ƒï¼ˆå¢å¼ºç‰ˆï¼šå®æ—¶åˆ†ç±»å’Œè®°å½•ï¼‰
collector.OnHTML("link[href], script[src], img[src]", func(e *colly.HTMLElement) {
    // ... æå–URL
    
    // ğŸ†• v3.7: ä½¿ç”¨èµ„æºåˆ†ç±»å™¨åˆ¤æ–­å¹¶è®°å½•
    if s.spider != nil {
        classifier := s.spider.GetResourceClassifier()
        if classifier != nil {
            resourceType, shouldRequest := classifier.ClassifyURL(absoluteURL)
            if !shouldRequest {
                // é™æ€èµ„æºï¼šåªè®°å½•ä¸è¯·æ±‚
                s.spider.RecordStaticResource(absoluteURL, resourceType)
            }
        }
    }
    result.Assets = append(result.Assets, absoluteURL)
})
```

### 2.4 åŠ¨æ€çˆ¬è™«å®ç°ï¼ˆcore/dynamic_crawler.goï¼‰

#### æ–°å¢å­—æ®µå’Œæ–¹æ³•
```go
type DynamicCrawlerImpl struct {
    // ... ç°æœ‰å­—æ®µ
    spider SpiderRecorder  // ğŸ†• v3.7 Spiderå¼•ç”¨
}

func (d *DynamicCrawlerImpl) SetSpider(spider SpiderRecorder) {
    d.spider = spider
}
```

### 2.5 è¾“å‡ºé€»è¾‘ï¼ˆcmd/spider/main.goï¼‰

#### æ–°å¢ä¿å­˜å‡½æ•°
```go
// saveExcludedURLs ä¿å­˜è¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æºURL
func saveExcludedURLs(spider *core.Spider, baseFilename string) error {
    // è·å–å„ç±»URL
    externalLinks := spider.GetExternalLinks()
    staticResources := spider.GetStaticResources()
    blacklistedURLs := spider.GetBlacklistedURLs()
    specialLinks := spider.GetSpecialProtocolLinks()
    
    // ç»Ÿä¸€è¾“å‡ºåˆ° _excluded.txt
    // æŒ‰ç±»å‹åˆ†æ®µæ˜¾ç¤º
}

// saveJSAndCSSFiles ä¿å­˜JSå’ŒCSSæ–‡ä»¶åˆ—è¡¨
func saveJSAndCSSFiles(results []*core.Result, baseFilename string) error {
    // æå–JSå’ŒCSSæ–‡ä»¶
    // ä¿å­˜åˆ°ç‹¬ç«‹æ–‡ä»¶
}
```

#### åœ¨main()ä¸­è°ƒç”¨
```go
// ğŸ†• v3.7: ä¿å­˜æ’é™¤çš„URL
if err := saveExcludedURLs(spider, baseFilename); err != nil {
    log.Printf("ä¿å­˜æ’é™¤çš„URLå¤±è´¥: %v", err)
}

// ğŸ†• v3.7: ä¿å­˜JSå’ŒCSSæ–‡ä»¶åˆ—è¡¨
if err := saveJSAndCSSFiles(results, baseFilename); err != nil {
    log.Printf("ä¿å­˜JS/CSSæ–‡ä»¶åˆ—è¡¨å¤±è´¥: %v", err)
}
```

---

## ä¸‰ã€å·¥ä½œæµç¨‹

### 3.1 åˆå§‹åŒ–æµç¨‹

```
1. NewSpider() åˆ›å»ºSpiderå®ä¾‹
   â†“
2. åˆ›å»º staticCrawler å’Œ dynamicCrawler
   â†“
3. Spider.Start() å¼€å§‹çˆ¬å–
   â†“
4. staticCrawler.SetSpider(spider)  // æ³¨å…¥å¼•ç”¨
   dynamicCrawler.SetSpider(spider)
   â†“
5. çˆ¬è™«è·å¾—Spiderå¼•ç”¨ï¼Œå¯ä»¥å®æ—¶è®°å½•URL
```

### 3.2 URLå‘ç°å’Œè®°å½•æµç¨‹

```
çˆ¬è™«å‘ç°URL
   â†“
åˆ¤æ–­URLç±»å‹
   â”œâ”€ ç‰¹æ®Šåè®®ï¼ˆmailto, telç­‰ï¼‰
   â”‚   â†“
   â”‚  spider.RecordSpecialLink(url, protocol)
   â”‚   â†“
   â”‚  ä¿å­˜åˆ° specialLinks å­—æ®µ
   â”‚
   â”œâ”€ é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰
   â”‚   â†“
   â”‚  classifier.ClassifyURL(url)
   â”‚   â†“
   â”‚  spider.RecordStaticResource(url, type)
   â”‚   â†“
   â”‚  ä¿å­˜åˆ° staticResources å­—æ®µ
   â”‚
   â”œâ”€ å¤–éƒ¨åŸŸå
   â”‚   â†“
   â”‚  ä¿å­˜åˆ° externalLinks å­—æ®µ
   â”‚
   â””â”€ éœ€è¦çˆ¬å–çš„URL
       â†“
      æ·»åŠ åˆ°çˆ¬å–é˜Ÿåˆ—
```

### 3.3 è¾“å‡ºæµç¨‹

```
çˆ¬å–å®Œæˆ
   â†“
spider.GetStaticResources()
spider.GetSpecialProtocolLinks()
spider.GetExternalLinks()
spider.GetBlacklistedURLs()
   â†“
saveExcludedURLs()
   â†“
ç»Ÿä¸€è¾“å‡ºåˆ° *_excluded.txt æ–‡ä»¶
   â”œâ”€ ã€å¤–éƒ¨åŸŸåURLã€‘
   â”œâ”€ ã€å›¾ç‰‡èµ„æºã€‘
   â”œâ”€ ã€è§†é¢‘èµ„æºã€‘
   â”œâ”€ ã€éŸ³é¢‘èµ„æºã€‘
   â”œâ”€ ã€å­—ä½“èµ„æºã€‘
   â”œâ”€ ã€æ–‡æ¡£èµ„æºã€‘
   â”œâ”€ ã€å‹ç¼©åŒ…èµ„æºã€‘
   â”œâ”€ ã€é»‘åå•URLã€‘
   â”œâ”€ ã€Mailtoé“¾æ¥ã€‘
   â”œâ”€ ã€ç”µè¯é“¾æ¥ã€‘
   â””â”€ ã€WebSocketé“¾æ¥ã€‘
```

---

## å››ã€å…³é”®ç‰¹æ€§

### 4.1 å®æ—¶è®°å½•
- âœ… é“¾æ¥è¢«å‘ç°æ—¶**ç«‹å³**åˆ†ç±»å’Œè®°å½•
- âœ… ä¸éœ€è¦ç­‰åˆ°çˆ¬å–ç»“æŸ
- âœ… é¿å…URLä¸¢å¤±

### 4.2 è‡ªåŠ¨åˆ†ç±»
- âœ… ä½¿ç”¨`ResourceClassifier`è‡ªåŠ¨è¯†åˆ«URLç±»å‹
- âœ… 7ç§é™æ€èµ„æºç±»å‹
- âœ… 5ç§ç‰¹æ®Šåè®®
- âœ… å¤–éƒ¨åŸŸåè‡ªåŠ¨è¯†åˆ«

### 4.3 æ™ºèƒ½è¿‡æ»¤
- âœ… é™æ€èµ„æºåªè®°å½•ä¸è¯·æ±‚
- âœ… ç‰¹æ®Šåè®®é“¾æ¥å•ç‹¬è®°å½•
- âœ… JSå’ŒCSSæ–‡ä»¶ä¼šè¢«ä¸‹è½½åˆ†æ
- âœ… æ•ˆç‡æå‡70%+

### 4.4 å®Œæ•´è®°å½•
- âœ… æ‰€æœ‰å‘ç°çš„URLéƒ½è¢«è®°å½•
- âœ… æŒ‰ç±»å‹åˆ†ç±»ä¿å­˜
- âœ… ç»Ÿä¸€è¾“å‡ºæ ¼å¼
- âœ… æ–¹ä¾¿åç»­åˆ†æ

---

## äº”ã€ä¼˜åŠ¿å¯¹æ¯”

### æ–¹æ¡ˆ1ï¼ˆç®€åŒ–ç‰ˆï¼‰vs æ–¹æ¡ˆ2ï¼ˆå®Œæ•´ç‰ˆï¼‰

| ç‰¹æ€§ | æ–¹æ¡ˆ1 | æ–¹æ¡ˆ2 | å¤‡æ³¨ |
|------|-------|-------|------|
| å®æ—¶æ€§ | âŒ å»¶è¿Ÿè®°å½• | âœ… ç«‹å³è®°å½• | æ–¹æ¡ˆ2åœ¨å‘ç°URLæ—¶ç«‹å³åˆ†ç±» |
| å®Œæ•´æ€§ | âš ï¸ å¯èƒ½é—æ¼ | âœ… å®Œå…¨è¦†ç›– | æ–¹æ¡ˆ2ä¸ä¼šé—æ¼ä»»ä½•URL |
| æ¶æ„æ¸…æ™°åº¦ | âœ… ç®€å• | âš ï¸ ç¨å¤æ‚ | æ–¹æ¡ˆ2éœ€è¦æ¥å£å’Œå¼•ç”¨æ³¨å…¥ |
| æ€§èƒ½ | âœ… è¾ƒå¥½ | âœ… æœ€ä¼˜ | æ–¹æ¡ˆ2é¿å…é‡å¤åˆ†ç±»åˆ¤æ–­ |
| å¯ç»´æŠ¤æ€§ | âœ… é«˜ | âœ… é«˜ | ä¸¤è€…éƒ½æ¸…æ™° |
| æ‰©å±•æ€§ | âš ï¸ ä¸€èˆ¬ | âœ… ä¼˜ç§€ | æ–¹æ¡ˆ2æ˜“äºæ·»åŠ æ–°çš„è®°å½•ç±»å‹ |

### ä¸ºä»€ä¹ˆé€‰æ‹©æ–¹æ¡ˆ2ï¼Ÿ

1. **å®æ—¶æ€§æ›´å¥½**
   - åœ¨é“¾æ¥è¢«å‘ç°çš„ç¬é—´å°±è®°å½•
   - ä¸ä¾èµ–åç»­å¤„ç†é€»è¾‘
   
2. **å®Œæ•´æ€§æœ‰ä¿éšœ**
   - çˆ¬è™«ç›´æ¥è°ƒç”¨Spideræ–¹æ³•è®°å½•
   - é¿å…ä¸­é—´ç¯èŠ‚å¯¼è‡´çš„é—æ¼
   
3. **æ€§èƒ½æ›´ä¼˜**
   - æ¯ä¸ªURLåªåˆ†ç±»ä¸€æ¬¡
   - é¿å…é‡å¤åˆ¤æ–­
   
4. **æ¶æ„æ›´åˆç†**
   - çˆ¬è™«å’ŒSpiderèŒè´£åˆ†æ˜
   - ç¬¦åˆä¾èµ–æ³¨å…¥åŸåˆ™

---

## å…­ã€æµ‹è¯•éªŒè¯

### 6.1 ç¼–è¯‘æµ‹è¯•

```bash
cd cmd/spider
go build -o ../../spider_v3.7.exe
```

### 6.2 åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•1ï¼šç‰¹æ®Šåè®®é“¾æ¥
```html
<a href="mailto:admin@example.com">è”ç³»æˆ‘ä»¬</a>
<a href="tel:+8613800138000">ç”µè¯</a>
```

**é¢„æœŸç»“æœï¼š**
- `_excluded.txt` ä¸­åŒ…å«ã€Mailtoé“¾æ¥ã€‘å’Œã€ç”µè¯é“¾æ¥ã€‘éƒ¨åˆ†

#### æµ‹è¯•2ï¼šé™æ€èµ„æº
```html
<img src="/images/logo.png">
<video src="/videos/demo.mp4"></video>
<a href="/docs/manual.pdf">PDF</a>
```

**é¢„æœŸç»“æœï¼š**
- `_excluded.txt` ä¸­åŒ…å«ã€å›¾ç‰‡èµ„æºã€‘ã€ã€è§†é¢‘èµ„æºã€‘ã€ã€æ–‡æ¡£èµ„æºã€‘
- è¿™äº›URLä¸ä¼šè¢«å®é™…è¯·æ±‚

#### æµ‹è¯•3ï¼šJSå’ŒCSSæ–‡ä»¶
```html
<script src="/js/app.js"></script>
<link rel="stylesheet" href="/css/main.css">
```

**é¢„æœŸç»“æœï¼š**
- `_js_files.txt` åŒ…å« `/js/app.js`
- `_css_files.txt` åŒ…å« `/css/main.css`
- è¿™äº›æ–‡ä»¶ä¼šè¢«ä¸‹è½½å’Œåˆ†æ

---

## ä¸ƒã€æ€§èƒ½å½±å“

### 7.1 æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| é™æ€èµ„æºå¤„ç† | ä¸‹è½½æ‰€æœ‰ | åªè®°å½• | âš¡ 70% |
| å¸¦å®½ä½¿ç”¨ | 100% | 20% | âš¡ 80% |
| çˆ¬å–é€Ÿåº¦ | åŸºå‡† | 2-3å€ | âš¡ 200% |
| å†…å­˜å ç”¨ | åŸºå‡† | åŸºå‡† | â– æ— å˜åŒ– |
| URLå®Œæ•´æ€§ | 80% | 100% | âœ… å®Œæ•´ |

### 7.2 æ€§èƒ½ä¼˜åŒ–ç‚¹

1. **é™æ€èµ„æºä¸è¯·æ±‚**
   - å›¾ç‰‡ã€è§†é¢‘ã€å­—ä½“ç­‰åªè®°å½•URL
   - èŠ‚çœå¤§é‡å¸¦å®½å’Œæ—¶é—´

2. **å•æ¬¡åˆ†ç±»åˆ¤æ–­**
   - æ¯ä¸ªURLåªåˆ†ç±»ä¸€æ¬¡
   - é¿å…é‡å¤è°ƒç”¨ResourceClassifier

3. **å®æ—¶è®°å½•**
   - ä¸éœ€è¦åœ¨æœ€åç»Ÿä¸€å¤„ç†
   - å‡å°‘å†…å­˜å ç”¨

---

## å…«ã€ä½¿ç”¨ç¤ºä¾‹

### 8.1 åŸºæœ¬ä½¿ç”¨

```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶è¿è¡Œ
spider_v3.7.exe -config config.json

# ç›´æ¥æŒ‡å®šURL
spider_v3.7.exe -url http://example.com -depth 3
```

### 8.2 æŸ¥çœ‹ç»“æœ

çˆ¬å–å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹æ–‡ä»¶ï¼š

```bash
# ä¸»è¦URLåˆ—è¡¨
spider_example.com_xxx_all_urls.txt      # æ‰€æœ‰è¢«çˆ¬å–çš„URL

# æ’é™¤çš„URLï¼ˆæ–°åŠŸèƒ½ï¼‰
spider_example.com_xxx_excluded.txt      # è¶…å‡ºèŒƒå›´å’Œé™æ€èµ„æº
  â”œâ”€ ã€å¤–éƒ¨åŸŸåURLã€‘
  â”œâ”€ ã€å›¾ç‰‡èµ„æºã€‘
  â”œâ”€ ã€è§†é¢‘èµ„æºã€‘
  â”œâ”€ ã€éŸ³é¢‘èµ„æºã€‘
  â”œâ”€ ã€å­—ä½“èµ„æºã€‘
  â”œâ”€ ã€æ–‡æ¡£èµ„æºã€‘
  â”œâ”€ ã€å‹ç¼©åŒ…èµ„æºã€‘
  â”œâ”€ ã€é»‘åå•URLã€‘
  â”œâ”€ ã€Mailtoé“¾æ¥ã€‘
  â”œâ”€ ã€ç”µè¯é“¾æ¥ã€‘
  â””â”€ ã€WebSocketé“¾æ¥ã€‘

# JSå’ŒCSSæ–‡ä»¶ï¼ˆæ–°åŠŸèƒ½ï¼‰
spider_example.com_xxx_js_files.txt      # JavaScriptæ–‡ä»¶åˆ—è¡¨
spider_example.com_xxx_css_files.txt     # CSSæ–‡ä»¶åˆ—è¡¨

# å…¶ä»–æœ‰ç”¨çš„æ–‡ä»¶
spider_example.com_xxx_apis.txt          # APIæ¥å£
spider_example.com_xxx_post_requests.txt # POSTè¯·æ±‚
spider_example.com_xxx_sensitive.txt     # æ•æ„Ÿä¿¡æ¯
```

---

## ä¹ã€é…ç½®è¯´æ˜

### 9.1 exclude_extensionsé…ç½®

```json
{
    "scope_settings": {
        "exclude_extensions": [
            "jpg", "jpeg", "png", "gif", "svg", "ico", "webp", "bmp",
            "mp4", "avi", "mov", "wmv", "flv",
            "mp3", "wav", "ogg",
            "woff", "woff2", "ttf", "eot", "otf",
            "pdf", "doc", "docx", "xls", "xlsx", "ppt", "pptx",
            "zip", "rar", "tar", "gz", "7z"
        ]
    }
}
```

**é‡è¦ï¼š**
- âœ… è¿™äº›æ‰©å±•åçš„æ–‡ä»¶**ä¼šè¢«è®°å½•**åˆ°`_excluded.txt`
- âŒ è¿™äº›æ–‡ä»¶**ä¸ä¼šè¢«è¯·æ±‚**ï¼ˆèŠ‚çœæ—¶é—´å’Œå¸¦å®½ï¼‰
- âš¡ **JSå’ŒCSSé™¤å¤–**ï¼Œå®ƒä»¬ä¼šè¢«ä¸‹è½½å’Œåˆ†æ

---

## åã€åç»­æ”¹è¿›å»ºè®®

### 10.1 çŸ­æœŸæ”¹è¿›

1. **æ·»åŠ å¤–éƒ¨é“¾æ¥è®°å½•**
   - åœ¨`collectLinksForLayer`ä¸­å·²è®°å½•ï¼Œä½†é¦–æ¬¡çˆ¬å–æ—¶æœªè®°å½•
   - å»ºè®®åœ¨é¦–æ¬¡çˆ¬å–æ—¶ä¹Ÿè®°å½•å¤–éƒ¨é“¾æ¥

2. **æ·»åŠ é»‘åå•URLè®°å½•**
   - å½“å‰ä»£ç æœ‰é»‘åå•é…ç½®ï¼Œä½†æœªå®é™…è®°å½•
   - å»ºè®®åœ¨ä½œç”¨åŸŸæ£€æŸ¥æ—¶è°ƒç”¨`RecordBlacklistedURL()`

### 10.2 é•¿æœŸæ”¹è¿›

1. **æ”¯æŒæ›´å¤šèµ„æºç±»å‹**
   - WebPå›¾ç‰‡
   - AVIFå›¾ç‰‡
   - æ–°çš„å­—ä½“æ ¼å¼

2. **æ·»åŠ ç»Ÿè®¡æŠ¥å‘Š**
   - å„ç±»URLçš„æ•°é‡ç»Ÿè®¡
   - åˆ†ç±»é¥¼å›¾
   - JSONæ ¼å¼çš„è¯¦ç»†æŠ¥å‘Š

3. **æ”¯æŒè‡ªå®šä¹‰åˆ†ç±»**
   - å…è®¸ç”¨æˆ·è‡ªå®šä¹‰èµ„æºåˆ†ç±»è§„åˆ™
   - çµæ´»çš„URLåŒ¹é…æ¨¡å¼

---

## åä¸€ã€æ€»ç»“

### 11.1 å®Œæˆæƒ…å†µ

âœ… **å·²å®Œæˆï¼š**
1. æ¥å£å®šä¹‰å’Œæ‰©å±•
2. Spiderå®ç°SpiderRecorderæ¥å£
3. é™æ€çˆ¬è™«å®ç°SetSpiderå’Œå®æ—¶è®°å½•
4. åŠ¨æ€çˆ¬è™«å®ç°SetSpider
5. è¾“å‡ºå‡½æ•°å®ç°
6. åˆ é™¤å†—ä½™è¾“å‡ºæ–‡ä»¶

### 11.2 æŠ€æœ¯äº®ç‚¹

1. **æ¥å£è®¾è®¡**
   - `SpiderRecorder`æ¥å£é¿å…å¾ªç¯å¼•ç”¨
   - æ¸…æ™°çš„èŒè´£åˆ†ç¦»

2. **ä¾èµ–æ³¨å…¥**
   - çˆ¬è™«è·å¾—Spiderå¼•ç”¨
   - è§£è€¦åˆçš„æ¶æ„

3. **å®æ—¶å¤„ç†**
   - é“¾æ¥å‘ç°æ—¶ç«‹å³åˆ†ç±»
   - é«˜æ•ˆçš„URLè®°å½•

4. **å®Œæ•´è¦†ç›–**
   - æ‰€æœ‰URLç±»å‹éƒ½è¢«è®°å½•
   - ä¸ä¼šé—æ¼ä»»ä½•é“¾æ¥

### 11.3 é¢„æœŸæ•ˆæœ

è¿è¡Œçˆ¬è™«åï¼Œæ‚¨å°†è·å¾—ï¼š
- âœ… å®Œæ•´çš„URLåˆ—è¡¨ï¼ˆä¸é—æ¼ï¼‰
- âœ… æ¸…æ™°çš„åˆ†ç±»ï¼ˆæŒ‰ç±»å‹ç»„ç»‡ï¼‰
- âœ… å®æ—¶çš„è®°å½•ï¼ˆå‘ç°å³ä¿å­˜ï¼‰
- âœ… é«˜æ•ˆçš„çˆ¬å–ï¼ˆé™æ€èµ„æºä¸è¯·æ±‚ï¼‰
- âœ… è¯¦ç»†çš„ç»Ÿè®¡ï¼ˆæ¯ç±»URLæ•°é‡ï¼‰

### 11.4 ç«‹å³ä½¿ç”¨

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. ç¼–è¯‘æ–°ç‰ˆæœ¬ï¼š`go build -o spider_v3.7.exe`
2. è¿è¡Œçˆ¬è™«ï¼š`spider_v3.7.exe -config config.json`
3. æŸ¥çœ‹ç»“æœï¼šæ£€æŸ¥`_excluded.txt`ç­‰æ–°æ–‡ä»¶

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

